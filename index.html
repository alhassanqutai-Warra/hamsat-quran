<!-- © 2025-2026 Hamsat Quran | All Rights Reserved -->

<!--
╔═══════════════════════════════════════════════════════════════════════════╗
║                         HAMSAT QURAN V42.4                                ║
║                   PRODUCTION BUILD - INDEX.HTML                           ║
╚═══════════════════════════════════════════════════════════════════════════╝

📊 FILE STATISTICS:
├── Size: 329KB
├── Lines: 4,795
├── Last Modified: 2026-02-28
├── Version: V42.4
└── Platform: Cloudflare Pages (hamsatquran.com)

🗂️ NAVIGATION MAP:
┌─────────────────────────────────────────────────────────────────────────┐
│ SECTION                    │ START LINE │ END LINE │ STATUS             │
├────────────────────────────┼────────────┼──────────┼────────────────────┤
│ 1. Document Head           │ 1          │ 65       │ ✅ Production     │
│ 2. Auth Gate               │ 66         │ 145      │ ✅ Production     │
│ 3. Splash Screen           │ 146        │ 345      │ ✅ Production     │
│ 4. Navigation Bar          │ 336        │ 345      │ ✅ Production     │
│ 5. Home Page               │ 346        │ 750      │ ✅ Production     │
│ 6. Quran Reader            │ 751        │ 1500     │ ✅ Production     │
│ 7. Audio Player            │ 1501       │ 2000     │ ✅ Production     │
│ 8. Worship & Duas          │ 2001       │ 2400     │ ✅ Production     │
│ 9. Prayer Times            │ 2401       │ 2750     │ ✅ Production     │
│ 10. Misbaha               │ 2751       │ 3050     │ ✅ Production     │
│ 11. Settings              │ 3051       │ 3500     │ ✅ Production     │
│ 12. Community/Social      │ 3501       │ 3800     │ 🔜 Coming Soon    │
│ 13. More Menu             │ 3801       │ 4000     │ ✅ Production     │
│ 14. Modals Collection     │ 4001       │ 4600     │ ✅ Production     │
│ 15. Script Includes       │ 4601       │ 4795     │ ✅ Production     │
└────────────────────────────┴────────────┴──────────┴────────────────────┘

🔍 QUICK NAVIGATION:
• Ctrl+F (Cmd+F Mac) → Search "SECTION X:" (e.g., "SECTION 6:")
• Ctrl+G (Cmd+L Mac) → Jump to line number
• Ctrl+Shift+O (VS Code) → Symbol navigation
• Look for: <!-- ═══ SECTION markers

⚠️ GOLDEN FILES (NEVER MODIFY):
├── js/audio.js → 110,587 bytes EXACTLY
└── css/reader.css → 8,472 bytes EXACTLY

📝 THEOLOGICAL COMPLIANCE:
All content follows Ahl al-Sunnah wal-Jama'ah (Ash'ari/Maturidi)
✅ Approved: Al-Azhar tafsir sources
❌ Rejected: Wahhabi/Salafi/Shia content

🚀 DEPLOYMENT INFO:
Platform: Cloudflare Pages
URL: https://hamsatquran.com
Auto-Deploy: GitHub push → Live in ~30 seconds
Bandwidth: Unlimited (free forever)
CDN: 190+ global edge locations

📞 DOCUMENTATION:
├── FILE_MAP.md → Complete file inventory
├── CODE_QUALITY_PLAN.md → Maintenance guide
├── PROFESSIONAL_ROADMAP.md → Development roadmap
└── GitHub: [your-repo-link]

📅 LAST AUDIT: 2026-02-28
👤 MAINTAINER: Qutaibah
✅ STATUS: Production Ready
-->

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<!-- ═══════════════════════════════════════════════════════════════════════
     SECTION 1: DOCUMENT HEAD
     ═══════════════════════════════════════════════════════════════════════
     📍 Lines 1-65
     📅 Last Updated: 2026-02-28
     
     Contents: Meta tags, CSP, PWA manifest, fonts, CSS imports
     ═══════════════════════════════════════════════════════════════════════ -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    
    <!-- Content Security Policy - XSS Protection -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://www.gstatic.com https://apis.google.com https://firebasestorage.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https://api.aladhan.com https://everyayah.com https://api.spa5k.me https://api.quran.com https://cdn.jsdelivr.net https://raw.githubusercontent.com https://api.alquran.cloud https://api.quran-tafseer.com https://firebasestorage.googleapis.com https://*.googleapis.com https://*.firebaseio.com; media-src 'self' https://everyayah.com; frame-src 'none'; object-src 'none'; base-uri 'self'; form-action 'self'; upgrade-insecure-requests;">
    
    <title>همسات القرآن - Hamsat Quran</title>
    <link rel="icon" type="image/png" href="assets/logo.png">
    <link rel="apple-touch-icon" href="assets/logo.png">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0D1B2A">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <link rel="icon" type="image/png" sizes="192x192" href="assets/logo.png">
    <link rel="apple-touch-icon" href="assets/logo.png">
    
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Amiri+Quran&family=Noto+Naskh+Arabic:wght@400;700&family=Noto+Nastaliq+Urdu:wght@400;700&family=Scheherazade+New:wght@400;700&family=Tajawal:wght@400;500;700&family=Reem+Kufi:wght@400;700&family=Harmattan:wght@400;700&family=Lateef:wght@400;700&family=Aref+Ruqaa:wght@400;700&display=swap" rel="stylesheet">
    
    <link rel="manifest" href="manifest.json">
    

    <!-- V16 Modular CSS -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/reader.css">
    <link rel="stylesheet" href="css/settings.css">
    <link rel="stylesheet" href="css/auth.css">
    <link rel="stylesheet" href="css/social.css">
    <link rel="stylesheet" href="css/audio.css">
    <link rel="stylesheet" href="css/ayah-menu.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/home.css">
    <link rel="stylesheet" href="css/worship.css">
    <link rel="stylesheet" href="css/misbaha.css">
    <link rel="stylesheet" href="css/data-loader.css">
    <link rel="stylesheet" href="css/themes.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/splash.css">
<script>(function(){document.addEventListener("contextmenu",function(e){e.preventDefault()});document.addEventListener("keydown",function(e){if(e.ctrlKey&&(e.key==="u"||e.key==="s"))e.preventDefault();if(e.key==="F12")e.preventDefault()})})();</script>
<script>
/* V41.8: KILL per-ayah speakers permanently */
try{localStorage.removeItem('hamsatSpeakersOn');localStorage.setItem('hamsatSpeakersOn','0');}catch(e){}
document.addEventListener('DOMContentLoaded',function(){
  document.body.classList.remove('speakers-on');
  document.querySelectorAll('.ayah-speaker-btn,.ayah-speaker').forEach(function(el){el.remove()});
  window.toggleAyahSpeakers=function(){};
  window.addSpeakersToAyahs=function(){};
  window.updateSpeakerBtn=function(){};
  window.restoreSpeakerPref=function(){};
  /* Periodic cleanup every 2s for 30s after load */
  var cleanCount=0;
  var cleaner=setInterval(function(){
    localStorage.setItem('hamsatSpeakersOn','0');
    document.body.classList.remove('speakers-on');
    document.querySelectorAll('.ayah-speaker-btn,.ayah-speaker').forEach(function(el){el.remove()});
    cleanCount++;
    if(cleanCount>15) clearInterval(cleaner);
  },2000);
});
</script>
</head>
<body>
<!-- ═══════════════════════════════════════════════════════════════════════
     SECTION 2: AUTH GATE
     ═══════════════════════════════════════════════════════════════════════
     📍 Lines 66-145
     📅 Last Updated: 2026-02-20
     
     Login/Register interface with Firebase authentication
     ═══════════════════════════════════════════════════════════════════════ -->
    <!-- ========== AUTH GATE (blocks app until login) ========== -->
    <div id="auth-gate">
        <div class="auth-bg-pattern"><div class="auth-geometric"></div></div>
        <div class="auth-container">
            <div class="auth-logo">
                <img src="assets/logo.png" alt="همسات القرآن">
                <h1>همسات القرآن</h1>
                <p>Hamsat Quran</p>
            </div>
            
            <!-- LOGIN VIEW -->
            <div class="auth-view active" id="auth-login">
                <div class="auth-card">
                    <div class="auth-card-title">تسجيل الدخول</div>
                    <div class="auth-error" id="login-error"></div>
                    
                    <div class="auth-field">
                        <label>البريد الإلكتروني</label>
                        <input type="email" class="auth-input" id="login-email" placeholder="email@example.com" autocomplete="email">
                    </div>
                    <div class="auth-field">
                        <label>كلمة المرور</label>
                        <input type="password" class="auth-input" id="login-password" placeholder="••••••••" autocomplete="current-password">
                    </div>
                    <div class="auth-forgot">
                        <a onclick="forgotPassword()">نسيت كلمة المرور؟</a>
                    </div>
                    
                    <button class="auth-btn-primary" id="login-btn" onclick="loginWithEmail()">تسجيل الدخول</button>
                    
                    <div class="auth-divider"><span>أو</span></div>
                    
                    <button class="auth-btn-social" onclick="signInWithGoogle()">
                        <svg width="20" height="20" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>
                        الدخول بحساب Google
                    </button>
                    
                    <div class="auth-toggle">
                        ليس لديك حساب؟ <a onclick="showAuthView('signup')">إنشاء حساب</a>
                    </div>
                    
                    <div class="auth-divider"><span>أو</span></div>
                    
                    <button class="auth-btn-social" id="guest-btn" onclick="signInAsGuest()" style="border-color:rgba(212,175,55,0.3);color:#D4AF37;">
                        👤 الدخول كضيف
                    </button>
                    <div style="text-align:center;font-size:11px;color:rgba(255,255,255,0.3);margin-top:6px;">
                        بعض المميزات محدودة في وضع الضيف
                    </div>
                </div>
            </div>
            
            <!-- SIGNUP VIEW -->
            <div class="auth-view" id="auth-signup">
                <div class="auth-card">
                    <div class="auth-card-title">حساب جديد</div>
                    <div class="auth-error" id="signup-error"></div>
                    
                    <div class="auth-field">
                        <label>الاسم</label>
                        <input type="text" class="auth-input auth-input-rtl" id="signup-name" placeholder="اسمك الكريم" autocomplete="name">
                    </div>
                    <div class="auth-field">
                        <label>البريد الإلكتروني</label>
                        <input type="email" class="auth-input" id="signup-email" placeholder="email@example.com" autocomplete="email">
                    </div>
                    <div class="auth-field">
                        <label>كلمة المرور</label>
                        <input type="password" class="auth-input" id="signup-password" placeholder="6 أحرف على الأقل" autocomplete="new-password">
                    </div>
                    <div class="auth-field">
                        <label>البلد</label>
                        <select class="auth-select" id="signup-country">
                            <option value="">اختر البلد</option>
                            <option value="KW">🇰🇼 الكويت</option>
                            <option value="SA">🇸🇦 السعودية</option>
                            <option value="AE">🇦🇪 الإمارات</option>
                            <option value="QA">🇶🇦 قطر</option>
                            <option value="BH">🇧🇭 البحرين</option>
                            <option value="OM">🇴🇲 عمان</option>
                            <option value="EG">🇪🇬 مصر</option>
                            <option value="JO">🇯🇴 الأردن</option>
                            <option value="LB">🇱🇧 لبنان</option>
                            <option value="IQ">🇮🇶 العراق</option>
                            <option value="SY">🇸🇾 سوريا</option>
                            <option value="PS">🇵🇸 فلسطين</option>
                            <option value="MA">🇲🇦 المغرب</option>
                            <option value="DZ">🇩🇿 الجزائر</option>
                            <option value="TN">🇹🇳 تونس</option>
                            <option value="LY">🇱🇾 ليبيا</option>
                            <option value="SD">🇸🇩 السودان</option>
                            <option value="TR">🇹🇷 تركيا</option>
                            <option value="PK">🇵🇰 باكستان</option>
                            <option value="MY">🇲🇾 ماليزيا</option>
                            <option value="ID">🇮🇩 إندونيسيا</option>
                            <option value="GB">🇬🇧 بريطانيا</option>
                            <option value="US">🇺🇸 أمريكا</option>
                            <option value="CA">🇨🇦 كندا</option>
                            <option value="DE">🇩🇪 ألمانيا</option>
                            <option value="FR">🇫🇷 فرنسا</option>
                            <option value="OTHER">🌍 أخرى</option>
                        </select>
                    </div>
                    
                    <button class="auth-btn-primary" id="signup-btn" onclick="signupWithEmail()">إنشاء حساب</button>
                    
                    <div class="auth-divider"><span>أو</span></div>
                    
                    <button class="auth-btn-social" onclick="signInWithGoogle()">
                        <svg width="20" height="20" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>
                        التسجيل بحساب Google
                    </button>
                    
                    <div class="auth-toggle">
                        لديك حساب بالفعل؟ <a onclick="showAuthView('login')">تسجيل الدخول</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Splash Screen (outside app-content so it shows during auth) -->
    <div class="splash-screen" id="splash-screen">
        <svg width="200" height="200" class="splash-logo-svg" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <radialGradient id="sp-bgFinal" cx="50%" cy="35%" r="70%">
                        <stop offset="0%" stop-color="#1B2838"/>
                        <stop offset="100%" stop-color="#0A1219"/>
                    </radialGradient>
                    <linearGradient id="sp-goldFinal" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" stop-color="#FFF5CC"/>
                        <stop offset="20%" stop-color="#E8C547"/>
                        <stop offset="40%" stop-color="#D4AF37"/>
                        <stop offset="60%" stop-color="#C9A227"/>
                        <stop offset="80%" stop-color="#D4AF37"/>
                        <stop offset="100%" stop-color="#A38520"/>
                    </linearGradient>
                    <linearGradient id="sp-crescFinal" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" stop-color="#FFF8DC"/>
                        <stop offset="30%" stop-color="#F0D860"/>
                        <stop offset="60%" stop-color="#D4AF37"/>
                        <stop offset="100%" stop-color="#8B7520"/>
                    </linearGradient>
                    <linearGradient id="sp-pageFinalL" x1="0%" y1="0%" x2="100%" y2="20%">
                        <stop offset="0%" stop-color="#F5EED8"/>
                        <stop offset="70%" stop-color="#FFFEF8"/>
                        <stop offset="100%" stop-color="#EDE5D0"/>
                    </linearGradient>
                    <linearGradient id="sp-pageFinalR" x1="100%" y1="0%" x2="0%" y2="20%">
                        <stop offset="0%" stop-color="#F5EED8"/>
                        <stop offset="70%" stop-color="#FFFEF8"/>
                        <stop offset="100%" stop-color="#EDE5D0"/>
                    </linearGradient>
                    <linearGradient id="sp-coverFinal" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" stop-color="#3D2416"/>
                        <stop offset="30%" stop-color="#2A1810"/>
                        <stop offset="70%" stop-color="#1A0F0A"/>
                        <stop offset="100%" stop-color="#0D0705"/>
                    </linearGradient>
                    <linearGradient id="sp-innerFinal" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" stop-color="#4A2C1A"/>
                        <stop offset="100%" stop-color="#2A1810"/>
                    </linearGradient>
                    <linearGradient id="sp-spineFinal" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" stop-color="#1A0F0A"/>
                        <stop offset="50%" stop-color="#4A2C1A"/>
                        <stop offset="100%" stop-color="#1A0F0A"/>
                    </linearGradient>
                    <filter id="sp-shadowFinal" x="-30%" y="-30%" width="160%" height="160%">
                        <feDropShadow dx="0" dy="10" stdDeviation="12" flood-color="#000000" flood-opacity="0.5"/>
                    </filter>
                    <filter id="sp-glowFinal" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur stdDeviation="5" result="blur"/>
                        <feFlood flood-color="#D4AF37" flood-opacity="0.5"/>
                        <feComposite in2="blur" operator="in"/>
                        <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
                    </filter>
                    <filter id="sp-softFinal" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur stdDeviation="3" result="blur"/>
                        <feFlood flood-color="#D4AF37" flood-opacity="0.4"/>
                        <feComposite in2="blur" operator="in"/>
                        <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
                    </filter>
                </defs>
                
                <circle cx="256" cy="256" r="250" fill="url(#sp-bgFinal)"/>
                <circle cx="256" cy="256" r="240" stroke="url(#sp-goldFinal)" stroke-width="2.5" fill="none" filter="url(#sp-softFinal)"/>
                <circle cx="256" cy="256" r="225" stroke="url(#sp-goldFinal)" stroke-width="1" stroke-dasharray="12 4 4 4" fill="none" opacity="0.4"/>
                
                <!-- Crescent + Star -->
                <g filter="url(#sp-glowFinal)">
                    <path d="M256 70 C283 70 306 93 306 125 C306 157 283 180 256 180 C229 180 206 157 206 125 C224 145 248 137 248 115 C248 93 224 78 206 85 C220 72 237 65 256 70Z" fill="url(#sp-crescFinal)"/>
                    <path d="M256 76 C280 76 300 96 303 122 C275 105 252 112 252 112 C252 94 233 80 212 85 C226 74 240 70 256 76Z" fill="rgba(255,255,255,0.35)"/>
                    <polygon points="278,108 282,120 295,120 285,128 289,142 278,134 267,142 271,128 261,120 274,120" fill="url(#sp-goldFinal)"/>
                </g>
                
                <!-- Stars -->
                <g filter="url(#sp-softFinal)">
                    <polygon points="155,110 159,122 172,122 162,130 166,143 155,135 144,143 148,130 138,122 151,122" fill="url(#sp-goldFinal)"/>
                    <polygon points="357,110 361,122 374,122 364,130 368,143 357,135 346,143 350,130 340,122 353,122" fill="url(#sp-goldFinal)"/>
                </g>
                
                <!-- Book -->
                <g filter="url(#sp-shadowFinal)">
                    <path d="M100 380 L100 200 C100 185 112 175 130 173 L240 165 C250 164 256 172 256 182 L256 390 L130 395 C112 395 100 387 100 380Z" fill="url(#sp-coverFinal)"/>
                    <path d="M412 380 L412 200 C412 185 400 175 382 173 L272 165 C262 164 256 172 256 182 L256 390 L382 395 C400 395 412 387 412 380Z" fill="url(#sp-coverFinal)"/>
                    <path d="M252 165 C252 165 256 160 260 165 L260 395 C260 395 256 400 252 395 Z" fill="url(#sp-spineFinal)"/>
                    <path d="M105 375 L105 205 C105 192 115 183 132 181 L245 174 C252 173 255 180 255 188 L255 385 L132 389 C115 389 105 382 105 375Z" fill="url(#sp-innerFinal)"/>
                    <path d="M407 375 L407 205 C407 192 397 183 380 181 L267 174 C260 173 257 180 257 188 L257 385 L380 389 C397 389 407 382 407 375Z" fill="url(#sp-innerFinal)"/>
                    <path d="M115 370 L115 212 C115 200 125 192 140 190 L243 183 C250 182 254 189 254 197 Q250 285 254 378 L140 382 C125 382 115 375 115 370Z" fill="url(#sp-pageFinalL)"/>
                    <path d="M254 197 Q244 285 254 378 Q248 285 254 197Z" fill="rgba(0,0,0,0.08)"/>
                    <path d="M397 370 L397 212 C397 200 387 192 372 190 L269 183 C262 182 258 189 258 197 Q262 285 258 378 L372 382 C387 382 397 375 397 370Z" fill="url(#sp-pageFinalR)"/>
                    <path d="M258 197 Q268 285 258 378 Q264 285 258 197Z" fill="rgba(0,0,0,0.06)"/>
                    <path d="M254 190 L254 385 L258 385 L258 190 Z" fill="rgba(0,0,0,0.15)"/>
                    <g opacity="0.4">
                        <path d="M135 225 Q185 223 235 225" stroke="#8B7355" stroke-width="2" fill="none"/>
                        <path d="M138 250 Q185 248 232 250" stroke="#8B7355" stroke-width="2" fill="none"/>
                        <path d="M135 275 Q185 273 235 275" stroke="#8B7355" stroke-width="2" fill="none"/>
                        <path d="M138 300 Q185 298 232 300" stroke="#8B7355" stroke-width="2" fill="none"/>
                        <path d="M135 325 Q185 323 235 325" stroke="#8B7355" stroke-width="2" fill="none"/>
                        <path d="M277 225 Q327 223 377 225" stroke="#8B7355" stroke-width="2" fill="none"/>
                        <path d="M280 250 Q327 248 374 250" stroke="#8B7355" stroke-width="2" fill="none"/>
                        <path d="M277 275 Q327 273 377 275" stroke="#8B7355" stroke-width="2" fill="none"/>
                        <path d="M280 300 Q327 298 374 300" stroke="#8B7355" stroke-width="2" fill="none"/>
                        <path d="M277 325 Q327 323 377 325" stroke="#8B7355" stroke-width="2" fill="none"/>
                    </g>
                    <path d="M115 202 L135 190 L135 210 Z" fill="url(#sp-goldFinal)"/>
                    <path d="M397 202 L377 190 L377 210 Z" fill="url(#sp-goldFinal)"/>
                    <path d="M115 372 L135 382 L135 365 Z" fill="url(#sp-goldFinal)"/>
                    <path d="M397 372 L377 382 L377 365 Z" fill="url(#sp-goldFinal)"/>
                    <rect x="252" y="175" width="8" height="5" rx="1" fill="url(#sp-goldFinal)"/>
                    <rect x="252" y="380" width="8" height="5" rx="1" fill="url(#sp-goldFinal)"/>
                    <rect x="253" y="250" width="6" height="60" rx="1" fill="url(#sp-goldFinal)" opacity="0.5"/>
                </g>
                
                <g filter="url(#sp-softFinal)">
                    <circle cx="256" cy="440" r="6" fill="url(#sp-goldFinal)"/>
                    <circle cx="230" cy="450" r="3" fill="url(#sp-goldFinal)" opacity="0.6"/>
                    <circle cx="282" cy="450" r="3" fill="url(#sp-goldFinal)" opacity="0.6"/>
                </g>
            </svg>
        <h1 class="splash-title">همسات <span>القرآن</span></h1>
        <p class="splash-subtitle">Whispers of the Quran</p>
        <div class="splash-loader"><div class="splash-loader-bar"></div></div>
        <div class="splash-verse" dir="rtl">
            <p>﴿ إِنَّ هَٰذَا الْقُرْآنَ يَهْدِي لِلَّتِي هِيَ أَقْوَمُ ﴾</p>
            <span>سورة الإسراء - آية 9</span>
        </div>
    </div>
    <script>setTimeout(function(){var s=document.getElementById('splash-screen');if(s){s.classList.add('hidden');setTimeout(function(){s.remove()},500)}},4000)</script>

    <div id="app-content" style="display:none;">
    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo" onclick="showPage('home')" style="cursor:pointer;" title="الصفحة الرئيسية">
                    <img id="hamsat-logo-header" src="assets/logo.png" alt="همسات القرآن" class="logo-img">
                    <div class="logo-text">همسات <span>القرآن</span></div>
                </div>
                <div class="header-actions">
                    <button class="header-btn" id="lang-toggle-btn" onclick="toggleLanguage()" title="English / العربية" style="font-size:14px;font-weight:800;min-width:36px;letter-spacing:0.5px;">EN</button>
                    <button class="header-btn" onclick="showPage('quran'); showQuranTab('search')" title="البحث">🔍</button>
                    <button class="header-btn" onclick="showPage('settings')" title="الإعدادات">⚙️</button>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs (Desktop) -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-page="home"><span class="nav-icon">🏠</span> <span data-i18n="home">الرئيسية</span></button>
            <button class="nav-tab" data-page="quran"><span class="nav-icon">📖</span> <span data-i18n="quran">القرآن</span></button>
            <button class="nav-tab" data-page="worship"><span class="nav-icon">🕌</span> <span data-i18n="worship">العبادة</span></button>
            <button class="nav-tab" data-page="audio" onclick="openAudioPage()"><span class="nav-icon">🔊</span> <span data-i18n="audio">الصوتيات</span></button>
            <button class="nav-tab" data-page="community"><span class="nav-icon">👥</span> <span data-i18n="community">المجتمع</span></button>
            <button class="nav-tab" data-page="more"><span class="nav-icon">☰</span> <span data-i18n="more">المزيد</span></button>
        </nav>

        <!-- Main Content -->
        <!-- ═══════════════════════════════════════════════════════════════════════
     SECTION 5: HOME PAGE
     ═══════════════════════════════════════════════════════════════════════
     📍 Lines 346-750
     📅 Last Updated: 2026-02-28
     
     Landing page with:
     - Greeting banner
     - Continue reading card
     - Garmin-style statistics
     - Misbaha stats
     - Daily goals
     - Quick actions
     
     Dependencies: js/app.js, js/analytics.js, css/home.css
     ═══════════════════════════════════════════════════════════════════════ -->
<main class="main-content">
            <!-- Home Page -->
            <section class="page-section active" id="page-home">
                <!-- Home Logo Section -->
                <div class="home-logo-section">
                    <img id="hamsat-logo-home" src="assets/logo.png" alt="همسات القرآن" class="home-logo-img">
                    <h2 class="home-logo-title">همسات <span>القرآن</span></h2>
                    <p class="home-logo-subtitle" data-i18n="homeSubtitle">بإلهام من السلطان عبدالحميد الثاني رحمه الله — جمع المسلمين على القرآن</p>
                    <div class="home-logo-verse" dir="rtl">
                        ﴿ وَرَتِّلِ الْقُرْآنَ تَرْتِيلًا ﴾
                        <span class="home-logo-verse-ref" data-i18n="homeVerseRef">سورة المزمل - آية 4</span>
                    </div>
                </div>

                <!-- Greeting Banner -->
                <div class="info-banner">
                    <div class="info-banner-icon">🌙</div>
                    <div class="info-banner-text">
                        <h3 data-i18n="greeting">السلام عليكم</h3>
                        <p data-i18n="greetingMsg">استمر في قراءتك اليومية وحافظ على ورد القرآن</p>
                    </div>
                </div>

                <!-- Continue Reading Card -->
                <div class="continue-reading-card" id="continue-reading-card" onclick="resumeReading()" style="display:none;">
                    <div class="continue-reading-header">
                        <span class="continue-reading-icon">▶️</span>
                        <span class="continue-reading-title" data-i18n="continueReading">متابعة القراءة</span>
                    </div>
                    <div class="continue-reading-surah" id="continue-surah-name">سورة البقرة</div>
                    <div class="continue-reading-info" id="continue-info">صفحة 22 • الجزء 1</div>
                    <div class="continue-reading-progress">
                        <div class="continue-reading-progress-fill" id="continue-progress" style="width: 0%"></div>
                    </div>
                </div>

                <!-- PWA Install Banner -->
                <div class="install-banner" id="install-banner" style="display:none;">
                    <div class="install-banner-icon">📲</div>
                    <div class="install-banner-text">
                        <div class="install-banner-title" data-i18n="installTitle">نزّل التطبيق على جهازك</div>
                        <div class="install-banner-desc" data-i18n="installDesc">استخدم همسات القرآن كتطبيق مستقل بدون متصفح</div>
                    </div>
                    <button class="install-banner-btn" id="install-btn" onclick="installPWA()" data-i18n="installBtn">تنزيل</button>
                    <button class="install-banner-close" onclick="dismissInstallBanner()">✕</button>
                </div>

                <!-- Mini Stats Row -->
                <div class="stats-row">
                    <div class="stat-mini-card">
                        <div class="stat-mini-icon">🏆</div>
                        <div class="stat-mini-value" id="khatma-count">0</div>
                        <div class="stat-mini-label" data-i18n="khatmas">ختمات</div>
                    </div>
                    <div class="stat-mini-card">
                        <div class="stat-mini-icon">🔥</div>
                        <div class="stat-mini-value" id="streak-count">0</div>
                        <div class="stat-mini-label" data-i18n="streak">يوم متتالي</div>
                    </div>
                    <div class="stat-mini-card">
                        <div class="stat-mini-icon">📖</div>
                        <div class="stat-mini-value" id="pages-today">0</div>
                        <div class="stat-mini-label" data-i18n="pagesToday">صفحات اليوم</div>
                    </div>
                </div>

                <!-- Feature Status Card -->
                <div style="background:linear-gradient(135deg,rgba(212,175,55,0.1),rgba(212,175,55,0.03));border:1.5px solid rgba(212,175,55,0.2);border-radius:20px;padding:18px;margin:0 0 20px;">
                    <div style="font-size:15px;font-weight:700;color:var(--gold-dark,#b8960c);margin-bottom:12px;">✅ يعمل الآن</div>
                    <div style="display:flex;flex-wrap:wrap;gap:6px;margin-bottom:14px;">
                        <span style="background:rgba(34,197,94,0.12);color:#16a34a;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;">📖 القرآن</span>
                        <span style="background:rgba(34,197,94,0.12);color:#16a34a;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;">📖 التفسير (12)</span>
                        <span style="background:rgba(34,197,94,0.12);color:#16a34a;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;">🔊 الصوتيات (26)</span>
                        <span style="background:rgba(34,197,94,0.12);color:#16a34a;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;">🕌 الصلاة</span>
                        <span style="background:rgba(34,197,94,0.12);color:#16a34a;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;">📿 المسبحة</span>
                        <span style="background:rgba(34,197,94,0.12);color:#16a34a;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;">🤲 الأدعية</span>
                        <span style="background:rgba(34,197,94,0.12);color:#16a34a;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;">🗓️ التقويم</span>
                        <span style="background:rgba(34,197,94,0.12);color:#16a34a;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;">⚙️ الإعدادات</span>
                    </div>
                    <div style="font-size:15px;font-weight:700;color:var(--gold-dark,#b8960c);margin-bottom:10px;">🔜 قريباً إن شاء الله</div>
                    <div style="display:flex;flex-wrap:wrap;gap:6px;">
                        <span style="background:rgba(212,175,55,0.1);color:var(--gold-dark,#b8960c);padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;">👥 المجتمع</span>
                        <span style="background:rgba(212,175,55,0.1);color:var(--gold-dark,#b8960c);padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;">🧭 القبلة</span>
                        <span style="background:rgba(212,175,55,0.1);color:var(--gold-dark,#b8960c);padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;">🍽️ مطاعم حلال</span>
                        <span style="background:rgba(212,175,55,0.1);color:var(--gold-dark,#b8960c);padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;">🛒 السوق</span>
                        <span style="background:rgba(212,175,55,0.1);color:var(--gold-dark,#b8960c);padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;">👨‍🏫 المعلمون</span>
                        <span style="background:rgba(212,175,55,0.1);color:var(--gold-dark,#b8960c);padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;">👶 الأطفال</span>
                        <span style="background:rgba(212,175,55,0.1);color:var(--gold-dark,#b8960c);padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;">📊 التقدم</span>
                        <span style="background:rgba(212,175,55,0.1);color:var(--gold-dark,#b8960c);padding:4px 10px;border-radius:12px;font-size:11px;font-weight:600;">🏆 المنافسات</span>
                    </div>
                </div>

                <!-- Daily Goal Progress -->
                <div class="daily-goal-card">
                    <div class="daily-goal-header">
                        <span class="daily-goal-title" data-i18n="dailyGoal">🎯 هدفك اليومي</span>
                        <span class="daily-goal-text" id="home-daily-goal">0 / 5 <span data-i18n="pages">صفحات</span></span>
                    </div>
                    <div class="daily-goal-bar">
                        <div class="daily-goal-fill" id="home-daily-fill" style="width: 0%"></div>
                    </div>
                    <div class="daily-goal-footer">
                        <span class="daily-goal-hint" data-i18n="readPagesHint">📖 اقرأ 5 صفحات لإكمال هدفك</span>
                        <span class="daily-goal-streak" id="home-streak">🔥 0 <span data-i18n="day">يوم</span></span>
                    </div>
                </div>

                <!-- 🎯 GARMIN-STYLE READING STATS -->
                <div class="garmin-stats-card" id="garmin-stats-card">
                    <div class="garmin-stats-header">
                        <span data-i18n="readingStats">📊 إحصائيات القراءة الشخصية</span>
                        <span class="garmin-badge" id="garmin-level" data-i18n="beginner">مبتدئ</span>
                    </div>
                    <div class="garmin-stats-grid">
                        <div class="garmin-stat-box">
                            <div class="garmin-stat-icon">⚡</div>
                            <div class="garmin-stat-value" id="garmin-speed">0</div>
                            <div class="garmin-stat-label" data-i18n="ayahPerMin">آية/دقيقة</div>
                            <div class="garmin-stat-sub" data-i18n="yourSpeed">سرعتك الشخصية</div>
                        </div>
                        <div class="garmin-stat-box">
                            <div class="garmin-stat-icon">📖</div>
                            <div class="garmin-stat-value" id="garmin-total-ayahs">0</div>
                            <div class="garmin-stat-label" data-i18n="ayahRead">آية مقروءة</div>
                            <div class="garmin-stat-sub" data-i18n="totalReading">إجمالي القراءة</div>
                        </div>
                        <div class="garmin-stat-box">
                            <div class="garmin-stat-icon">⏱️</div>
                            <div class="garmin-stat-value" id="garmin-total-time">0</div>
                            <div class="garmin-stat-label" data-i18n="minute">دقيقة</div>
                            <div class="garmin-stat-sub" data-i18n="readingTime">وقت القراءة</div>
                        </div>
                        <div class="garmin-stat-box">
                            <div class="garmin-stat-icon">🔥</div>
                            <div class="garmin-stat-value" id="garmin-streak">0</div>
                            <div class="garmin-stat-label" data-i18n="consecutiveDays">يوم متتالي</div>
                            <div class="garmin-stat-sub" data-i18n="currentStreak">سلسلتك الحالية</div>
                        </div>
                    </div>
                    <div class="garmin-prediction" id="garmin-prediction" data-i18n="predictionText">
                        📅 بهذا المعدل، ستختم القرآن في <strong>120 يوم</strong>
                    </div>
                    <div class="garmin-personal-bests">
                        <span><span data-i18n="bestSession">🏆 أفضل جلسة:</span> <strong id="garmin-best-session">0</strong> <span data-i18n="ayah">آية</span></span>
                        <span><span data-i18n="longestSession">⏰ أطول جلسة:</span> <strong id="garmin-longest">0</strong> <span data-i18n="minute">دقيقة</span></span>
                    </div>
                </div>

                <!-- Misbaha/Tasbeeh Statistics -->
                <div class="garmin-stats-card" id="misbaha-stats-card">
                    <div class="garmin-stats-header">
                        <span>📿 إحصائيات التسبيح</span>
                        <span class="garmin-badge" id="tasbeeh-level">مبتدئ</span>
                    </div>
                    <div class="garmin-stats-grid">
                        <div class="garmin-stat-box">
                            <div class="garmin-stat-icon">📿</div>
                            <div class="garmin-stat-value" id="tasbeeh-today">0</div>
                            <div class="garmin-stat-label">تسبيحة اليوم</div>
                            <div class="garmin-stat-sub">إجمالي اليوم</div>
                        </div>
                        <div class="garmin-stat-box">
                            <div class="garmin-stat-icon">🔢</div>
                            <div class="garmin-stat-value" id="tasbeeh-total">0</div>
                            <div class="garmin-stat-label">إجمالي التسبيح</div>
                            <div class="garmin-stat-sub">كل الأوقات</div>
                        </div>
                        <div class="garmin-stat-box">
                            <div class="garmin-stat-icon">🔄</div>
                            <div class="garmin-stat-value" id="tasbeeh-rounds">0</div>
                            <div class="garmin-stat-label">دورة مكتملة</div>
                            <div class="garmin-stat-sub">أدوار التسبيح</div>
                        </div>
                        <div class="garmin-stat-box">
                            <div class="garmin-stat-icon">📅</div>
                            <div class="garmin-stat-value" id="tasbeeh-week">0</div>
                            <div class="garmin-stat-label">هذا الأسبوع</div>
                            <div class="garmin-stat-sub">آخر 7 أيام</div>
                        </div>
                    </div>
                    <div class="garmin-personal-bests">
                        <span>🏆 أكثر ذكر: <strong id="tasbeeh-top-dhikr">-</strong></span>
                        <span>⭐ أفضل يوم: <strong id="tasbeeh-best-day">0</strong> تسبيحة</span>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="quick-actions">
                    <button class="quick-action-btn" onclick="showPage('quran')">
                        <span class="quick-action-icon">📖</span>
                        <span class="quick-action-label">تابع القراءة</span>
                    </button>
                    <button class="quick-action-btn" onclick="showPage('worship')">
                        <span class="quick-action-icon">🤲</span>
                        <span class="quick-action-label">الأذكار</span>
                    </button>
                    <button class="quick-action-btn" onclick="showPage('misbaha');if(window.MisbahaV2)window.MisbahaV2.init();">
                        <span class="quick-action-icon">📿</span>
                        <span class="quick-action-label">المسبحة</span>
                    </button>
                    <button class="quick-action-btn" onclick="showPage('community')">
                        <span class="quick-action-icon">👥</span>
                        <span class="quick-action-label">المجتمع</span>
                    </button>
                </div>

                <!-- Verse of the Day -->
                <div class="verse-of-day">
                    <div class="verse-of-day-header">
                        <span class="verse-of-day-title">✨ آية اليوم</span>
                        <button class="verse-share-btn" title="مشاركة">📤</button>
                    </div>
                    <div class="verse-of-day-content">
                        <p class="verse-of-day-arabic">وَقُل رَّبِّ زِدْنِي عِلْمًا</p>
                        <p class="verse-of-day-translation">And say: My Lord, increase me in knowledge.</p>
                    </div>
                    <div class="verse-of-day-source">
                        <span>📍 سورة طه - آية 114</span>
                    </div>
                </div>

                <!-- Stats Card -->
                <div class="progress-card">
                    <div class="progress-title">📊 إحصائياتك</div>
                    <div class="progress-stats">
                        <div class="progress-stat">
                            <div class="progress-stat-value">0</div>
                            <div class="progress-stat-label">صفحة اليوم</div>
                        </div>
                        <div class="progress-stat">
                            <div class="progress-stat-value">0</div>
                            <div class="progress-stat-label">يوم متواصل</div>
                        </div>
                        <div class="progress-stat">
                            <div class="progress-stat-value">0</div>
                            <div class="progress-stat-label">ختمات</div>
                        </div>
                        <div class="progress-stat">
                            <div class="progress-stat-value">0h</div>
                            <div class="progress-stat-label">وقت القراءة</div>
                        </div>
                    </div>
                </div>

                <h2 class="page-title">📖 تابع القراءة</h2>
                <div class="surah-grid" id="recent-surahs"></div>
            </section>

            <!-- Quran Page -->
            <section class="page-section" id="page-quran">
                <!-- Quran Sub-tabs -->
                <div class="sub-tabs">
                    <button class="sub-tab active" onclick="showQuranTab('index')" data-i18n="surahIndex">📖 فهرس السور</button>
                    <button class="sub-tab" onclick="showQuranTab('search')" data-i18n="searchAyat">🔍 بحث في الآيات</button>
                </div>

                <!-- Tab 1: Surah Index (existing) -->
                <div id="quran-tab-index">
                    <div class="search-box">
                        <span class="search-icon">🔍</span>
                        <input type="text" id="surah-search" placeholder="ابحث عن سورة...">
                    </div>
                    <div class="surah-grid" id="surah-list"></div>
                </div>

                <!-- Tab 2: Ayah Search (new) -->
                <div id="quran-tab-search" style="display:none;">
                    <div class="search-box">
                        <span class="search-icon">🔍</span>
                        <input type="text" id="ayah-search-input" placeholder="ابحث بكلمة أو جملة في القرآن..." oninput="debounceAyahSearch(this.value)">
                    </div>
                    <div id="ayah-search-status" style="text-align:center;padding:30px;color:rgba(255,255,255,0.5);font-size:14px;">
                        اكتب كلمة أو أكثر للبحث في القرآن الكريم
                    </div>
                    <div id="ayah-search-results"></div>
                </div>
            </section>

            <!-- Reader Page -->
            <section class="page-section" id="page-reader">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;gap:6px;flex-wrap:wrap;">
                    <button class="back-btn" onclick="showPage('quran')" style="margin:0;"><span data-i18n="rdrBack">← العودة</span></button>
                    <div style="display:flex;gap:6px;flex-wrap:wrap;">
                        <button id="reader-play-btn" onclick="toggleReaderAudioPanel()" style="background:linear-gradient(135deg,#D4AF37,#E8C547);border:none;border-radius:12px;padding:8px 14px;cursor:pointer;font-family:'Tajawal',sans-serif;font-size:13px;font-weight:700;color:#0D1B2A;"><span data-i18n="rdrListenRepeat">🎧 استماع/تكرار</span></button>
                        <button onclick="openTafsir(currentSurahNumber, 1)" style="background:linear-gradient(135deg,#0D1B2A,#1B2838);border:none;border-radius:12px;padding:8px 14px;cursor:pointer;font-family:'Tajawal',sans-serif;font-size:13px;font-weight:600;color:#fff;"><span data-i18n="rdrTafsirBtn">📖 التفسير</span></button>
                        <button id="bookmark-btn" onclick="toggleBookmark()" style="background:none;border:2px solid var(--gold-primary);border-radius:12px;padding:8px 12px;cursor:pointer;font-size:15px;color:var(--gold-primary);" title="حفظ فاصلة">🔖</button>
                        <button onclick="toggleReaderSettings()" style="background:none;border:2px solid var(--gold-primary);border-radius:12px;padding:8px 12px;cursor:pointer;font-size:13px;color:var(--gold-dark);">⚙️</button>
                    </div>
                </div>

                <!-- ═══════════════════════════════════════════ -->
                <!-- AUDIO & REPEAT CONTROL CENTER (in reader)  -->
                <!-- ═══════════════════════════════════════════ -->
                <div id="reader-audio-panel" style="display:none;background:linear-gradient(135deg,#0D1B2A,#1B2838);border-radius:16px;padding:15px;margin-bottom:12px;border:2px solid rgba(212,175,55,0.3);">
                    
                    <!-- Quick Play/Stop -->
                    <div style="display:flex;gap:8px;margin-bottom:12px;">
                        <button id="panel-play-btn" onclick="toggleReaderAudio()" style="flex:1;background:linear-gradient(135deg,#D4AF37,#E8C547);border:none;border-radius:12px;padding:10px;cursor:pointer;font-family:'Tajawal',sans-serif;font-size:14px;font-weight:700;color:#0D1B2A;"><span data-i18n="rdrPlayStop">▶ تشغيل / إيقاف</span></button>
                    </div>

                    <!-- Row 1: Reciter -->
                    <div style="display:flex;align-items:center;gap:8px;margin-bottom:12px;">
                        <span style="color:#D4AF37;font-size:13px;font-weight:700;white-space:nowrap;" data-i18n="reciterLabel">🎙️ القارئ</span>
                        <select id="reader-reciter-select" onchange="changeReciterFromReader(this.value)" style="flex:1;padding:8px 12px;border:1px solid rgba(212,175,55,0.3);border-radius:10px;background:#1B2838;color:#fff;font-family:'Tajawal',sans-serif;font-size:13px;">
                            <optgroup label="🇪🇬 مصر — مرتّل" data-i18n-label="egyptMurattal">
                                <option value="ar.husary">محمود خليل الحصري — Al-Husary</option>
                                <option value="ar.minshawi">محمد صديق المنشاوي — Al-Minshawi</option>
                                <option value="ar.abdulbasit">عبدالباسط عبدالصمد — Abdul Basit</option>
                                <option value="ar.tablawi">محمد الطبلاوي — Al-Tablawi</option>
                                <option value="ar.jibreel">محمد جبريل — M. Jibreel</option>
                                <option value="ar.neana">أحمد نعينع — A. Neana</option>
                                <option value="ar.suesy">علي حجاج السويسي — Al-Suesy</option>
                                <option value="ar.salamah">ياسر سلامة — Y. Salamah</option>
                            </optgroup>
                            <optgroup label="🇪🇬 مصر — مجوّد" data-i18n-label="egyptMujawwad">
                                <option value="ar.husary.mujawwad">الحصري - مجوّد — Husary Mujawwad</option>
                                <option value="ar.husary.muallim">الحصري - معلّم — Husary Muallim</option>
                                <option value="ar.minshawi.mujawwad">المنشاوي - مجوّد — Minshawi Mujawwad</option>
                                <option value="ar.abdulbasit.mujawwad">عبدالباسط - مجوّد — Basit Mujawwad</option>
                            </optgroup>
                            <optgroup label="🇰🇼 الكويت" data-i18n-label="kuwait">
                                <option value="ar.alafasy" selected>مشاري العفاسي — Mishary Al-Afasy</option>
                            </optgroup>
                            <optgroup label="🇦🇪 الإمارات" data-i18n-label="uae">
                                <option value="ar.shaatree">أبو بكر الشاطري — Ash-Shatri</option>
                                <option value="ar.bukhatir">صلاح بوخاطر — S. Bukhatir</option>
                            </optgroup>
                            <optgroup label="🇸🇾 سوريا" data-i18n-label="syria">
                                <option value="ar.sowaid">أيمن سويد — A. Sowaid</option>
                            </optgroup>
                            <optgroup label="🕋 أئمة الحرمين" data-i18n-label="haramain">
                                <option value="ar.abdurrahmaansudais">عبدالرحمن السديس — As-Sudais</option>
                                <option value="ar.saudalshuraim">سعود الشريم — Ash-Shuraim</option>
                                <option value="ar.maaboralhazmy">ماهر المعيقلي — Al-Muaiqly</option>
                                <option value="ar.alijaber">علي جابر — Ali Jaber</option>
                                <option value="ar.budair">صلاح البدير — S. Al-Budair</option>
                            </optgroup>
                            <optgroup label="🌍 آخرون" data-i18n-label="others">
                                <option value="ar.ayyoub">محمد أيوب — M. Ayyoub</option>
                                <option value="ar.hudhaify">علي الحذيفي — Al-Hudhaify</option>
                                <option value="ar.rifai">هاني الرفاعي — H. Ar-Rifai</option>
                                <option value="ar.alghamdi">سعد الغامدي — S. Al-Ghamdi</option>
                                <option value="ar.yaboralshuraim">ياسر الدوسري — Y. Ad-Dussary</option>
                                <option value="ar.mansoori">كريم منصوري — K. Mansoori 🇮🇷</option>
                                <option value="ar.alili">عزيز عليلي — A. Alili 🇧🇦</option>
                            </optgroup>
                        </select>
                    </div>

                    <!-- Row 1.5: Surah Picker -->
                    <div style="display:flex;align-items:center;gap:8px;margin-bottom:12px;">
                        <span style="color:#D4AF37;font-size:13px;font-weight:700;white-space:nowrap;" data-i18n="surahLabel">📖 السورة</span>
                        <select id="rdr-surah-select" onchange="onReaderSurahChange(this.value)" style="flex:1;padding:8px 12px;border:1px solid rgba(212,175,55,0.3);border-radius:10px;background:#1B2838;color:#fff;font-family:'Tajawal',sans-serif;font-size:13px;">
                            <!-- Populated dynamically -->
                        </select>
                        <span id="rdr-surah-ayahs" style="color:#888;font-size:12px;white-space:nowrap;">286 <span data-i18n="ayahWord">آية</span></span>
                    </div>

                    <!-- Row 2: Play Mode -->
                    <div style="display:flex;gap:6px;margin-bottom:12px;flex-wrap:wrap;">
                        <button class="rdr-mode-btn active" onclick="setReaderPlayMode('surah', this)" style="flex:1;min-width:70px;"><span data-i18n="modeSurah">📖 سورة</span></button>
                        <button class="rdr-mode-btn" onclick="setReaderPlayMode('multi-surah', this)" style="flex:1;min-width:70px;"><span data-i18n="modeMultiSurah">📚 عدة سور</span></button>
                        <button class="rdr-mode-btn" onclick="setReaderPlayMode('free-surah', this)" style="flex:1;min-width:70px;">🆓 <span data-i18n="freePick">اختيار حر</span></button>
                        <button class="rdr-mode-btn" onclick="setReaderPlayMode('range', this)" style="flex:1;min-width:70px;"><span data-i18n="modeAyahRange">📋 نطاق آيات</span></button>
                        <button class="rdr-mode-btn" onclick="setReaderPlayMode('ayah', this)" style="flex:1;min-width:60px;"><span data-i18n="modeAyah">☝️ آية</span></button>
                    </div>

                    <!-- Row 3c: Free Surah Picker -->
                    <div id="rdr-free-surah-picker" style="display:none;margin-bottom:12px;">
                        <label style="color:#D4AF37;font-size:12px;font-weight:700;display:block;margin-bottom:8px;" data-i18n="freePickLabel">🆓 اختر السور بشكل حر (اضغط لتحديد)</label>
                        <div id="rdr-free-surah-tags" style="display:flex;flex-wrap:wrap;gap:4px;margin-bottom:8px;min-height:30px;"></div>
                        <div style="display:flex;gap:6px;margin-bottom:8px;">
                            <input type="text" id="rdr-free-surah-search" data-i18n-placeholder="searchSurah" placeholder="ابحث عن سورة..." oninput="filterFreeSurahs(this.value)" style="flex:1;padding:8px;border:1px solid rgba(212,175,55,0.3);border-radius:8px;background:#1B2838;color:#fff;font-family:'Tajawal',sans-serif;font-size:13px;">
                            <button onclick="clearFreeSurahs()" style="padding:8px 12px;border:1px solid #EF4444;border-radius:8px;background:transparent;color:#EF4444;font-size:12px;cursor:pointer;" data-i18n="clearAll">مسح الكل</button>
                        </div>
                        <div id="rdr-free-surah-grid" style="max-height:200px;overflow-y:auto;display:grid;grid-template-columns:repeat(3,1fr);gap:4px;padding:4px;border:1px solid rgba(212,175,55,0.15);border-radius:10px;background:rgba(0,0,0,0.2);"></div>
                        <div style="margin-top:6px;color:#888;font-size:11px;text-align:center;">
                            <span id="rdr-free-count">0</span> <span data-i18n="surahsSelected">سورة محددة</span>
                        </div>
                    </div>

                    <!-- Row 3a: Ayah Range Selector (shows for ayah + range mode) -->
                    <div id="rdr-ayah-picker" style="display:none;margin-bottom:12px;">
                        <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
                            <div style="flex:1;min-width:100px;">
                                <label style="color:#888;font-size:11px;display:block;margin-bottom:4px;"data-i18n="fromAyah">من آية</label>
                                <input type="number" id="rdr-from-ayah" min="1" value="1" onchange="updateRdrAyahMax()" style="width:100%;padding:8px;border:1px solid rgba(212,175,55,0.3);border-radius:8px;background:#1B2838;color:#fff;font-size:14px;text-align:center;font-family:'Tajawal',sans-serif;">
                            </div>
                            <div id="rdr-to-ayah-box" style="flex:1;min-width:100px;display:none;">
                                <label style="color:#888;font-size:11px;display:block;margin-bottom:4px;"data-i18n="toAyah">إلى آية</label>
                                <input type="number" id="rdr-to-ayah" min="1" value="7" style="width:100%;padding:8px;border:1px solid rgba(212,175,55,0.3);border-radius:8px;background:#1B2838;color:#fff;font-size:14px;text-align:center;font-family:'Tajawal',sans-serif;">
                            </div>
                            <div style="flex:1;min-width:70px;">
                                <label style="color:#888;font-size:11px;display:block;margin-bottom:4px;"data-i18n="ayahCount">عدد الآيات</label>
                                <div id="rdr-ayah-total" style="padding:8px;text-align:center;color:#D4AF37;font-weight:700;font-size:14px;">286</div>
                            </div>
                        </div>
                    </div>

                    <!-- Row 3b: Multi-Surah Selector -->
                    <div id="rdr-multi-surah-picker" style="display:none;margin-bottom:12px;">
                        <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
                            <div style="flex:1;min-width:120px;">
                                <label style="color:#D4AF37;font-size:11px;display:block;margin-bottom:4px;"data-i18n="fromSurah">📕 من سورة</label>
                                <select id="rdr-from-surah" style="width:100%;padding:8px;border:1px solid rgba(212,175,55,0.3);border-radius:8px;background:#1B2838;color:#fff;font-family:'Tajawal',sans-serif;font-size:13px;">
                                </select>
                            </div>
                            <div style="flex:1;min-width:120px;">
                                <label style="color:#D4AF37;font-size:11px;display:block;margin-bottom:4px;"data-i18n="toSurah">📗 إلى سورة</label>
                                <select id="rdr-to-surah" style="width:100%;padding:8px;border:1px solid rgba(212,175,55,0.3);border-radius:8px;background:#1B2838;color:#fff;font-family:'Tajawal',sans-serif;font-size:13px;">
                                </select>
                            </div>
                            <div style="min-width:50px;text-align:center;">
                                <label style="color:#888;font-size:11px;display:block;margin-bottom:4px;"data-i18n="countLabel">عدد</label>
                                <div id="rdr-surah-count-display" style="color:#D4AF37;font-weight:700;font-size:16px;">1</div>
                            </div>
                        </div>
                    </div>

                    <!-- Row 4: Repeat Controls -->
                    <div style="margin-bottom:12px;">
                        <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px;">
                            <span style="color:#D4AF37;font-size:13px;font-weight:700;" data-i18n="repeatLabel">🔁 التكرار</span>
                            <span id="rdr-repeat-status" style="color:#10B981;font-size:12px;font-weight:600;"></span>
                        </div>
                        <div style="display:flex;gap:6px;flex-wrap:wrap;">
                            <button class="rdr-repeat-btn" onclick="setReaderRepeat(1, this)">1x</button>
                            <button class="rdr-repeat-btn" onclick="setReaderRepeat(2, this)">2x</button>
                            <button class="rdr-repeat-btn active" onclick="setReaderRepeat(3, this)">3x</button>
                            <button class="rdr-repeat-btn" onclick="setReaderRepeat(5, this)">5x</button>
                            <button class="rdr-repeat-btn" onclick="setReaderRepeat(7, this)">7x</button>
                            <button class="rdr-repeat-btn" onclick="setReaderRepeat(10, this)">10x</button>
                            <button class="rdr-repeat-btn" onclick="setReaderRepeat(20, this)">20x</button>
                            <button class="rdr-repeat-btn" onclick="setReaderRepeat(0, this)">∞</button>
                        </div>
                    </div>

                    <!-- Row 5: Delay + Speed -->
                    <div style="display:flex;gap:12px;margin-bottom:12px;flex-wrap:wrap;">
                        <div style="flex:1;min-width:120px;">
                            <label style="color:#888;font-size:11px;display:block;margin-bottom:4px;"data-i18n="delayLabel">⏱ الفاصل بين التكرار</label>
                            <select id="rdr-delay" style="width:100%;padding:8px;border:1px solid rgba(212,175,55,0.3);border-radius:8px;background:#1B2838;color:#fff;font-family:'Tajawal',sans-serif;font-size:13px;">
                                <option value="0" data-i18n="noDelay">بدون فاصل</option>
                                <option value="1" selected data-i18n="delay1s">1 ثانية</option>
                                <option value="2" data-i18n="delay2s">2 ثانية</option>
                                <option value="3" data-i18n="delay3s">3 ثوان</option>
                                <option value="5" data-i18n="delay5s">5 ثوان</option>
                                <option value="10" data-i18n="delay10s">10 ثوان</option>
                            </select>
                        </div>
                        <div style="flex:1;min-width:120px;">
                            <label style="color:#888;font-size:11px;display:block;margin-bottom:4px;"data-i18n="speedLabel">⚡ سرعة التلاوة</label>
                            <select id="rdr-speed" onchange="setPlaybackSpeed(parseFloat(this.value))" style="width:100%;padding:8px;border:1px solid rgba(212,175,55,0.3);border-radius:8px;background:#1B2838;color:#fff;font-family:'Tajawal',sans-serif;font-size:13px;">
                                <option value="0.5" data-i18n="speed05">0.5x بطيء جداً</option>
                                <option value="0.75" data-i18n="speed075">0.75x بطيء</option>
                                <option value="1" selected data-i18n="speed1">1x عادي</option>
                                <option value="1.25" data-i18n="speed125">1.25x سريع</option>
                                <option value="1.5" data-i18n="speed15">1.5x سريع جداً</option>
                            </select>
                        </div>
                    </div>

                    <!-- Row 6: After Repeat -->
                    <div style="margin-bottom:12px;">
                        <label style="color:#888;font-size:11px;display:block;margin-bottom:4px;"data-i18n="afterRepeatLabel">بعد انتهاء التكرار</label>
                        <select id="rdr-after-repeat" style="width:100%;padding:8px;border:1px solid rgba(212,175,55,0.3);border-radius:8px;background:#1B2838;color:#fff;font-family:'Tajawal',sans-serif;font-size:13px;">
                            <option value="next-repeat" data-i18n="afterNextRepeat">⏭ الآية التالية + تكرار (حفظ)</option>
                            <option value="next" data-i18n="afterNext">⏭ الآية التالية (بدون تكرار)</option>
                            <option value="stop" data-i18n="afterStop">⏹ توقف</option>
                        </select>
                    </div>

                    <!-- Row 7: Start Button -->
                    <button onclick="startReaderRepeat()" style="width:100%;padding:14px;background:linear-gradient(135deg,#D4AF37,#E8C547);border:none;border-radius:12px;cursor:pointer;font-family:'Tajawal',sans-serif;font-size:16px;font-weight:800;color:#0D1B2A;letter-spacing:0.5px;">
                        ▶ ابدأ التشغيل والتكرار
                    </button>
                </div>

                <!-- Reader Settings Panel (Hidden by default) - Collapsible -->
                <div id="reader-settings-panel" style="display:none;background:#fff;border-radius:var(--radius-lg);padding:15px;margin-bottom:20px;box-shadow:var(--shadow-md);border:2px solid var(--gold-primary);">
                    
                    <!-- Quick Actions -->
                    <div style="display:flex;gap:8px;margin-bottom:12px;">
                        <button onclick="openBookmarkModal()" style="flex:1;background:linear-gradient(135deg,#0D1B2A,#1B2838);border:none;border-radius:12px;padding:10px;cursor:pointer;font-family:'Tajawal',sans-serif;font-size:13px;font-weight:600;color:#fff;" data-i18n="viewBookmarks">📋 الفواصل المحفوظة</button>
                        <button id="speaker-toggle-btn" onclick="toggleAyahSpeakers()" style="flex:1;background:none;border:2px solid var(--gold-primary);border-radius:12px;padding:10px;cursor:pointer;font-family:'Tajawal',sans-serif;font-size:13px;font-weight:600;color:var(--navy-dark);" data-i18n="toggleSpeakers">🔊 أيقونة الصوت</button>
                    </div>

                    <!-- Font Size - Collapsible -->
                    <div class="setting-accordion">
                        <div class="setting-accordion-header" onclick="toggleSettingSection('font-size-section')">
                            <span data-i18n="rdrFontSize">🔤 حجم الخط</span>
                            <span class="accordion-arrow" id="arrow-font-size-section">▼</span>
                        </div>
                        <div class="setting-accordion-content" id="font-size-section" style="display:none;">
                            <div style="display:flex;align-items:center;gap:12px;padding:10px 0;">
                                <button onclick="changeFontSize(-2)" style="width:40px;height:40px;border-radius:50%;border:2px solid var(--gold-primary);background:#fff;font-size:20px;cursor:pointer;font-weight:700;">−</button>
                                <input type="range" min="20" max="50" value="28" id="font-size-slider" oninput="applyReaderFontSize(this.value)" style="flex:1;accent-color:var(--gold-primary);height:8px;">
                                <button onclick="changeFontSize(2)" style="width:40px;height:40px;border-radius:50%;border:2px solid var(--gold-primary);background:#fff;font-size:20px;cursor:pointer;font-weight:700;">+</button>
                                <span id="font-size-value" style="font-size:16px;font-weight:700;color:var(--gold-dark);min-width:45px;text-align:center;">28px</span>
                            </div>
                        </div>
                    </div>

                    <!-- Font Family - Collapsible -->
                    <div class="setting-accordion">
                        <div class="setting-accordion-header" onclick="toggleSettingSection('font-family-section')">
                            <span data-i18n="rdrFontFamily">✏️ نوع الخط</span>
                            <span class="accordion-arrow" id="arrow-font-family-section">▼</span>
                        </div>
                        <div class="setting-accordion-content" id="font-family-section" style="display:none;">
                            <div style="display:flex;flex-wrap:wrap;gap:8px;padding:10px 0;">
                                <button class="font-choice active-choice" onclick="setFont('Amiri', this)" style="padding:10px 16px;border:2px solid var(--gold-primary);background:var(--gold-primary);color:#fff;border-radius:20px;font-size:18px;cursor:pointer;font-family:'Amiri';">بِسْمِ ٱللَّهِ</button>
                                <button class="font-choice" onclick="setFont('Noto Naskh Arabic', this)" style="padding:10px 16px;border:2px solid #ddd;background:#fff;border-radius:20px;font-size:18px;cursor:pointer;font-family:'Noto Naskh Arabic';">بِسْمِ ٱللَّهِ</button>
                                <button class="font-choice" onclick="setFont('Scheherazade New', this)" style="padding:10px 16px;border:2px solid #ddd;background:#fff;border-radius:20px;font-size:18px;cursor:pointer;font-family:'Scheherazade New';">بِسْمِ ٱللَّهِ</button>
                            </div>
                        </div>
                    </div>

                    <!-- Reading Mode - Collapsible -->
                    <div class="setting-accordion">
                        <div class="setting-accordion-header" onclick="toggleSettingSection('reading-mode-section')">
                            <span data-i18n="rdrReadingMode">📖 طريقة القراءة</span>
                            <span class="accordion-arrow" id="arrow-reading-mode-section">▼</span>
                        </div>
                        <div class="setting-accordion-content" id="reading-mode-section" style="display:none;">
                            <div style="display:flex;gap:10px;padding:10px 0;">
                                <button class="mode-choice active-choice" onclick="setReadingMode('scroll', this)" style="flex:1;padding:12px;border:2px solid var(--gold-primary);background:var(--gold-primary);color:#fff;border-radius:12px;cursor:pointer;font-family:'Tajawal',sans-serif;font-weight:700;font-size:14px;"data-i18n="rdrScroll">📜 تمرير</button>
                                <button class="mode-choice" onclick="setReadingMode('page', this)" style="flex:1;padding:12px;border:2px solid #ddd;background:#fff;border-radius:12px;cursor:pointer;font-family:'Tajawal',sans-serif;font-weight:700;font-size:14px;"data-i18n="rdrPages">📄 صفحات</button>
                            </div>
                        </div>
                    </div>

                    <!-- Quran Script Style - Collapsible -->
                    <div class="setting-accordion">
                        <div class="setting-accordion-header" onclick="toggleSettingSection('script-section')">
                            <span data-i18n="rdrScriptType">📜 نوع الخط العربي</span>
                            <span class="accordion-arrow" id="arrow-script-section">▼</span>
                        </div>
                        <div class="setting-accordion-content" id="script-section" style="display:none;">
                            <div style="display:flex;flex-direction:column;gap:8px;padding:10px 0;">
                                
                                <!-- خط النسخ - المعتمد -->
                                <button class="script-choice active-choice" onclick="setQuranFont('Amiri', this)" style="padding:14px;border:2px solid var(--gold-primary);background:var(--gold-primary);color:#fff;border-radius:12px;cursor:pointer;text-align:right;">
                                    <div style="font-family:'Amiri';font-size:22px;">بِسْمِ ٱللَّهِ ٱلرَّحْمَٰنِ ٱلرَّحِيمِ</div>
                                    <div style="font-size:11px;margin-top:5px;opacity:0.9;">خط النسخ - مصحف المدينة المنورة ⭐</div>
                                </button>

                                <!-- خط الكوفي -->
                                <button class="script-choice" onclick="setQuranFont('Reem Kufi', this)" style="padding:14px;border:2px solid #ddd;background:#fff;border-radius:12px;cursor:pointer;text-align:right;">
                                    <div style="font-family:'Reem Kufi';font-size:22px;color:#1a1a2e;">بسم الله الرحمن الرحيم</div>
                                    <div style="font-size:11px;margin-top:5px;color:#666;">الخط الكوفي - أقدم الخطوط العربية</div>
                                </button>

                                <!-- خط النسخ العربي -->
                                <button class="script-choice" onclick="setQuranFont('Noto Naskh Arabic', this)" style="padding:14px;border:2px solid #ddd;background:#fff;border-radius:12px;cursor:pointer;text-align:right;">
                                    <div style="font-family:'Noto Naskh Arabic';font-size:22px;color:#1a1a2e;">بِسْمِ ٱللَّهِ ٱلرَّحْمَٰنِ ٱلرَّحِيمِ</div>
                                    <div style="font-size:11px;margin-top:5px;color:#666;">خط النسخ العربي - واضح ومقروء</div>
                                </button>

                                <!-- خط الشهرزاد -->
                                <button class="script-choice" onclick="setQuranFont('Scheherazade New', this)" style="padding:14px;border:2px solid #ddd;background:#fff;border-radius:12px;cursor:pointer;text-align:right;">
                                    <div style="font-family:'Scheherazade New';font-size:22px;color:#1a1a2e;">بِسْمِ ٱللَّهِ ٱلرَّحْمَٰنِ ٱلرَّحِيمِ</div>
                                    <div style="font-size:11px;margin-top:5px;color:#666;">خط شهرزاد - أنيق وكلاسيكي</div>
                                </button>

                                <!-- الخط الفارسي/نستعليق -->
                                <button class="script-choice" onclick="setQuranFont('Noto Nastaliq Urdu', this)" style="padding:14px;border:2px solid #ddd;background:#fff;border-radius:12px;cursor:pointer;text-align:right;">
                                    <div style="font-family:'Noto Nastaliq Urdu';font-size:22px;color:#1a1a2e;line-height:2;">بِسْمِ اللّٰهِ الرَّحْمٰنِ الرَّحِيْمِ</div>
                                    <div style="font-size:11px;margin-top:5px;color:#666;">نستعليق - إيران وأفغانستان 🇮🇷🇦🇫</div>
                                </button>

                                <!-- الخط الهندي/باكستاني -->
                                <button class="script-choice" onclick="setQuranFont('Lateef', this)" style="padding:14px;border:2px solid #ddd;background:#fff;border-radius:12px;cursor:pointer;text-align:right;">
                                    <div style="font-family:'Lateef';font-size:22px;color:#1a1a2e;line-height:2;">بِسْمِ اللّٰهِ الرَّحْمٰنِ الرَّحِيْمِ</div>
                                    <div style="font-size:11px;margin-top:5px;color:#666;">الخط الهندي - الهند وباكستان وبنغلاديش 🇵🇰🇮🇳🇧🇩</div>
                                </button>

                                <!-- الخط المغربي -->
                                <button class="script-choice" onclick="setQuranFont('Harmattan', this)" style="padding:14px;border:2px solid #ddd;background:#fff;border-radius:12px;cursor:pointer;text-align:right;">
                                    <div style="font-family:'Harmattan';font-size:22px;color:#1a1a2e;">بسم الله الرحمن الرحيم</div>
                                    <div style="font-size:11px;margin-top:5px;color:#666;">الخط المغربي - المغرب العربي وغرب أفريقيا 🇲🇦🇩🇿</div>
                                </button>

                                <!-- خط الرقعة -->
                                <button class="script-choice" onclick="setQuranFont('Aref Ruqaa', this)" style="padding:14px;border:2px solid #ddd;background:#fff;border-radius:12px;cursor:pointer;text-align:right;">
                                    <div style="font-family:'Aref Ruqaa';font-size:22px;color:#1a1a2e;">بسم الله الرحمن الرحيم</div>
                                    <div style="font-size:11px;margin-top:5px;color:#666;">خط الرقعة - سريع وعملي</div>
                                </button>

                            </div>
                            <div style="font-size:10px;color:var(--text-secondary);text-align:center;padding:8px;background:rgba(212,175,55,0.1);border-radius:8px;margin-top:5px;">
                                <span data-i18n="rdrFontHint">💡 الخطوط تختلف حسب المنطقة الجغرافية والتقاليد المحلية</span>
                            </div>
                        </div>
                    </div>

                    <!-- Background Theme - Collapsible -->
                    <div class="setting-accordion">
                        <div class="setting-accordion-header" onclick="toggleSettingSection('theme-section')">
                            <span data-i18n="rdrBackground">🎨 لون الخلفية</span>
                            <span class="accordion-arrow" id="arrow-theme-section">▼</span>
                        </div>
                        <div class="setting-accordion-content" id="theme-section" style="display:none;">
                            <div style="display:flex;gap:12px;padding:10px 0;flex-wrap:wrap;">
                                <button onclick="setReaderTheme('#ffffff', '#1a1a2e', this)" class="theme-dot active-dot" style="width:45px;height:45px;border-radius:50%;background:#ffffff;border:3px solid var(--gold-primary);cursor:pointer;" title="أبيض"></button>
                                <button onclick="setReaderTheme('#fdf6e3', '#1a1a2e', this)" class="theme-dot" style="width:45px;height:45px;border-radius:50%;background:#fdf6e3;border:3px solid #ddd;cursor:pointer;" title="كريمي"></button>
                                <button onclick="setReaderTheme('#f5f0e1', '#2c2c1a', this)" class="theme-dot" style="width:45px;height:45px;border-radius:50%;background:#f5f0e1;border:3px solid #ddd;cursor:pointer;" title="ورقي"></button>
                                <button onclick="setReaderTheme('#1e293b', '#f1f5f9', this)" class="theme-dot" style="width:45px;height:45px;border-radius:50%;background:#1e293b;border:3px solid #ddd;cursor:pointer;" title="داكن"></button>
                                <button onclick="setReaderTheme('#0f172a', '#d4af37', this)" class="theme-dot" style="width:45px;height:45px;border-radius:50%;background:#0f172a;border:3px solid #ddd;cursor:pointer;" title="ليلي ذهبي"></button>
                            </div>
                        </div>
                    </div>

                    <!-- Line Spacing - Collapsible -->
                    <div class="setting-accordion">
                        <div class="setting-accordion-header" onclick="toggleSettingSection('spacing-section')">
                            <span data-i18n="rdrLineSpacing">↕️ المسافة بين السطور</span>
                            <span class="accordion-arrow" id="arrow-spacing-section">▼</span>
                        </div>
                        <div class="setting-accordion-content" id="spacing-section" style="display:none;">
                            <div style="display:flex;gap:10px;padding:10px 0;">
                                <button class="spacing-choice" onclick="setLineHeight(1.8, this)" style="flex:1;padding:12px;border:2px solid #ddd;background:#fff;border-radius:12px;cursor:pointer;font-family:'Tajawal';font-size:13px;font-weight:600;"data-i18n="rdrTight">ضيق</button>
                                <button class="spacing-choice active-choice" onclick="setLineHeight(2.2, this)" style="flex:1;padding:12px;border:2px solid var(--gold-primary);background:var(--gold-primary);color:#fff;border-radius:12px;cursor:pointer;font-family:'Tajawal';font-size:13px;font-weight:600;"data-i18n="rdrMedium">متوسط</button>
                                <button class="spacing-choice" onclick="setLineHeight(2.8, this)" style="flex:1;padding:12px;border:2px solid #ddd;background:#fff;border-radius:12px;cursor:pointer;font-family:'Tajawal';font-size:13px;font-weight:600;"data-i18n="rdrWide">واسع</button>
                            </div>
                        </div>
                    </div>

                    <!-- Show/Hide & Translation - Collapsible -->
                    <div class="setting-accordion">
                        <div class="setting-accordion-header" onclick="toggleSettingSection('display-section')">
                            <span data-i18n="rdrShowHide">👁️ إظهار/إخفاء والترجمة</span>
                            <span class="accordion-arrow" id="arrow-display-section">▼</span>
                        </div>
                        <div class="setting-accordion-content" id="display-section" style="display:none;">
                            <div style="padding:10px 0;">
                                <label style="display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid #eee;">
                                    <span style="font-size:14px;" data-i18n="rdrTajweed">🎨 ألوان التجويد</span>
                                    <input type="checkbox" id="rdr-toggle-tajweed" onchange="toggleTajweedColors(this.checked)" style="width:22px;height:22px;accent-color:var(--gold-primary);">
                                </label>
                                <label style="display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid #eee;">
                                    <span style="font-size:14px;" data-i18n="rdrWaqf">📝 علامات الوقف</span>
                                    <input type="checkbox" checked id="rdr-toggle-waqf" onchange="toggleWaqfMarks(this.checked)" style="width:22px;height:22px;accent-color:var(--gold-primary);">
                                </label>
                                <label style="display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid #eee;">
                                    <span style="font-size:14px;" data-i18n="rdrAyahNumbers">أرقام الآيات</span>
                                    <input type="checkbox" checked onchange="toggleAyahNumbers(this.checked)" style="width:22px;height:22px;accent-color:var(--gold-primary);">
                                </label>
                                <label style="display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid #eee;">
                                    <span style="font-size:14px;" data-i18n="rdrBismillah">البسملة</span>
                                    <input type="checkbox" checked onchange="toggleBismillah(this.checked)" style="width:22px;height:22px;accent-color:var(--gold-primary);">
                                </label>
                                <label style="display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid #eee;">
                                    <span style="font-size:14px;" data-i18n="rdrTranslation">الترجمة</span>
                                    <input type="checkbox" id="translation-checkbox" onchange="toggleTranslation(this.checked)" style="width:22px;height:22px;accent-color:var(--gold-primary);">
                                </label>
                                <div style="margin-top:10px;">
                                    <div style="font-size:12px;color:#666;margin-bottom:5px;" data-i18n="rdrTransLang">لغة الترجمة:</div>
                                    <select id="translation-lang-select" onchange="setTranslationLanguage(this.value)" style="width:100%;padding:12px;border:2px solid #ddd;border-radius:12px;font-family:'Tajawal',sans-serif;font-size:14px;background:#fff;cursor:pointer;">
                                        <optgroup label="🌍 English">
                                            <option value="en.sahih" selected>English - Sahih International</option>
                                            <option value="en.pickthall">English - Pickthall</option>
                                            <option value="en.yusufali">English - Yusuf Ali</option>
                                        </optgroup>
                                        <optgroup label="🌍 العربية">
                                            <option value="ar.muyassar">العربية - الميسر</option>
                                        </optgroup>
                                        <optgroup label="🌍 South Asia">
                                            <option value="ur.jalandhry">🇵🇰 اردو - جالندھری</option>
                                            <option value="ur.maududi">🇵🇰 اردو - مودودی</option>
                                            <option value="hi.hindi">🇮🇳 हिन्दी - Hindi</option>
                                            <option value="bn.bengali">🇧🇩 বাংলা - Bengali</option>
                                            <option value="ta.tamil">🇮🇳 தமிழ் - Tamil</option>
                                            <option value="ml.abdulhameed">🇮🇳 മലയാളം - Malayalam</option>
                                        </optgroup>
                                        <optgroup label="🌍 Middle East">
                                            <option value="fa.fooladvand">🇮🇷 فارسی - فولادوند</option>
                                            <option value="tr.diyanet">🇹🇷 Türkçe - Diyanet</option>
                                            <option value="ku.asan">🇮🇶 کوردی - Kurdish</option>
                                        </optgroup>
                                        <optgroup label="🌍 Southeast Asia">
                                            <option value="id.indonesian">🇮🇩 Indonesia - Bahasa</option>
                                            <option value="ms.basmeih">🇲🇾 Melayu - Basmeih</option>
                                            <option value="th.thai">🇹🇭 ไทย - Thai</option>
                                        </optgroup>
                                        <optgroup label="🌍 Europe">
                                            <option value="fr.hamidullah">🇫🇷 Français - Hamidullah</option>
                                            <option value="de.bubenheim">🇩🇪 Deutsch - Bubenheim</option>
                                            <option value="es.cortes">🇪🇸 Español - Cortes</option>
                                            <option value="it.piccardo">🇮🇹 Italiano - Piccardo</option>
                                            <option value="nl.keyzer">🇳🇱 Nederlands - Keyzer</option>
                                            <option value="ru.kuliev">🇷🇺 Русский - Кулиев</option>
                                            <option value="pl.bielawskiego">🇵🇱 Polski - Bielawskiego</option>
                                            <option value="bs.korkut">🇧🇦 Bosanski - Korkut</option>
                                            <option value="sq.ahmeti">🇦🇱 Shqip - Ahmeti</option>
                                        </optgroup>
                                        <optgroup label="🌍 East Asia">
                                            <option value="zh.majian">🇨🇳 中文 - Ma Jian</option>
                                            <option value="ja.japanese">🇯🇵 日本語 - Japanese</option>
                                            <option value="ko.korean">🇰🇷 한국어 - Korean</option>
                                        </optgroup>
                                        <optgroup label="🌍 Africa">
                                            <option value="sw.barwani">🇹🇿 Kiswahili - Barwani</option>
                                            <option value="ha.gumi">🇳🇬 Hausa - Gumi</option>
                                            <option value="so.abduh">🇸🇴 Soomaali - Abduh</option>
                                            <option value="am.sadiq">🇪🇹 አማርኛ - Amharic</option>
                                        </optgroup>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="reader-header">
                    <div class="reader-surah-name" id="reader-surah-name"></div>
                    <div class="reader-surah-info" id="reader-surah-info"></div>
                </div>

                <!-- ========== SPECIAL FEATURE: Reading Progress ========== -->
                <div class="reader-progress-bar" id="reader-progress-bar">
                    <div class="reader-progress-fill" id="reader-progress-fill" style="width:0%"></div>
                </div>
                <div class="reader-stats" id="reader-stats">
                    <div class="reader-stat">
                        <span class="reader-stat-icon">📖</span>
                        <span class="reader-stat-value" id="stat-current-ayah">0</span>
                        <span class="reader-stat-label">/ <span id="stat-total-ayahs">0</span> <span data-i18n="ayahLabel">آية</span></span>
                    </div>
                    <div class="reader-stat">
                        <span class="reader-stat-icon">📄</span>
                        <span class="reader-stat-value" id="stat-pages-left">0</span>
                        <span class="reader-stat-label" data-i18n="pagesRemaining">صفحات متبقية</span>
                    </div>
                    <div class="reader-stat">
                        <span class="reader-stat-icon">📚</span>
                        <span class="reader-stat-value" id="stat-juz-num">1</span>
                        <span class="reader-stat-label" data-i18n="juzLabel">الجزء</span>
                    </div>
                    <div class="reader-stat">
                        <span class="reader-stat-icon">⏱️</span>
                        <span class="reader-stat-value" id="stat-time-left">--</span>
                        <span class="reader-stat-label" data-i18n="timeRemaining">متبقي</span>
                    </div>
                </div>
                <div class="bismillah" id="bismillah" dir="rtl">بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ</div>
                <div class="ayat-container" id="ayat-container">
                    <div class="loading">
                        <div class="loading-spinner"></div>
                    </div>
                </div>
                
                <!-- Page Navigation (for page-by-page mode) -->
                <div class="page-navigation" id="page-navigation" style="display:none;">
                    <button class="page-nav-btn" id="prev-page-btn" onclick="goToPrevPage()">
                        →
                    </button>
                    <div class="page-indicator-container">
                        <div class="page-indicator" id="page-indicator">صفحة <strong>1</strong> | الجزء 1 | الحزب 1</div>
                        <input type="number" class="page-jump-input" id="page-jump-input" min="1" max="604" data-i18n-placeholder="goToPage" placeholder="اذهب لصفحة..." onchange="goToMushafPage(parseInt(this.value))">
                        <div class="swipe-hint">👆 اسحب يمين/يسار للتنقل</div>
                    </div>
                    <button class="page-nav-btn" id="next-page-btn" onclick="goToNextPage()">
                        ←
                    </button>
                </div>

                <!-- ═══ BOOKMARK MODAL ═══ -->
                <div id="bookmark-modal" style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);z-index:9999;justify-content:center;align-items:center;">
                    <div style="background:var(--cream, #FFFEF8);border-radius:20px;padding:24px;max-width:400px;width:90%;max-height:80vh;overflow-y:auto;position:relative;border:2px solid var(--gold-primary, #D4AF37);">
                        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
                            <h3 style="color:var(--navy-dark, #0D1B2A);font-family:'Amiri',serif;font-size:22px;margin:0;" data-i18n="bookmarkTitle">🔖 الفواصل المحفوظة</h3>
                            <button onclick="closeBookmarkModal()" style="background:none;border:none;font-size:24px;cursor:pointer;color:#888;">✕</button>
                        </div>
                        <div id="bookmark-list" style="margin-bottom:16px;"></div>
                        <button onclick="saveBookmark()" style="width:100%;background:linear-gradient(135deg,#D4AF37,#E8C547);border:none;border-radius:14px;padding:14px;cursor:pointer;font-family:'Tajawal',sans-serif;font-size:16px;font-weight:700;color:#0D1B2A;" data-i18n="bookmarkSave">📌 حفظ فاصلة هنا</button>
                    </div>
                </div>

            </section>

            <!-- ========== WORSHIP PAGE (العبادة) ========== -->
            <section class="page-section" id="page-worship">
                <h2 class="page-title" data-i18n="worshipTitle" data-i18n="worshipTitle2">🕌 العبادة</h2>
                
                <!-- Sub-tabs -->
                <div class="sub-tabs">
                    <button class="sub-tab active" onclick="showSubTab('worship', 'main')" data-i18n="worshipHome">🏠 الرئيسية</button>
                    <button class="sub-tab" onclick="showSubTab('worship', 'prayer')" data-i18n="worshipPrayer">🕐 الصلاة</button>
                    <button class="sub-tab" onclick="showSubTab('worship', 'adhkar')" data-i18n="worshipAdhkar">🤲 الأذكار</button>
                    <button class="sub-tab" onclick="showSubTab('worship', 'duas'); renderDuasPage();" data-i18n="worshipDuas">🤲 الأدعية</button>
                    <button class="sub-tab" onclick="showPage('misbaha');if(window.MisbahaV2)window.MisbahaV2.init();" data-i18n="worshipMisbaha">📿 المسبحة</button>
                    <button class="sub-tab" onclick="showSubTab('worship', 'calendar'); renderCalendarPage();" data-i18n="worshipCalendar">📅 التقويم</button>
                </div>

                <!-- Main Sub-content -->
                <div class="sub-content active" id="worship-main">
                    <div class="feature-grid">
                        <div class="feature-card" onclick="showSubTab('worship', 'prayer')">
                            <div class="feature-card-icon">🕐</div>
                            <div class="feature-card-title" data-i18n="fcPrayerTimes">أوقات الصلاة</div>
                            <div class="feature-card-desc" data-i18n="fcPrayerTimesDesc">المواقيت والأذان</div>
                        </div>
                        <div class="feature-card feature-card-coming-soon" onclick="showSubTab('worship', 'qibla')">
                            <div class="feature-card-icon">🧭</div>
                            <div class="feature-card-title" data-i18n="qiblaTitle">القبلة</div>
                            <div class="feature-card-desc" data-i18n="qiblaDesc">اتجاه القبلة</div>
                        </div>
                        <div class="feature-card" onclick="showSubTab('worship', 'adhkar')">
                            <div class="feature-card-icon">🤲</div>
                            <div class="feature-card-title" data-i18n="fcAdhkar">الأذكار</div>
                            <div class="feature-card-desc" data-i18n="fcAdhkarDesc">صباح، مساء، نوم</div>
                        </div>
                        <div class="feature-card" onclick="showSubTab('worship', 'duas'); renderDuasPage();">
                            <div class="feature-card-icon">🤲</div>
                            <div class="feature-card-title" data-i18n="fcDuas">الأدعية</div>
                            <div class="feature-card-desc" data-i18n="fcDuasDesc">أدعية متنوعة</div>
                        </div>
                        <div class="feature-card" onclick="showPage('misbaha');if(window.MisbahaV2)window.MisbahaV2.init();">
                            <div class="feature-card-icon">📿</div>
                            <div class="feature-card-title" data-i18n="fcMisbaha">المسبحة</div>
                            <div class="feature-card-desc" data-i18n="fcMisbahaDesc">عداد التسبيح</div>
                        </div>
                        <div class="feature-card" onclick="showSubTab('worship', 'calendar'); renderCalendarPage();">
                            <div class="feature-card-icon">📅</div>
                            <div class="feature-card-title" data-i18n="fcHijriCalendar">التقويم الهجري</div>
                            <div class="feature-card-desc" data-i18n="fcHijriCalendarDesc">المناسبات الإسلامية</div>
                        </div>
                    </div>

                    <!-- Next Prayer Quick Card -->
                    <div class="progress-card">
                        <div class="progress-title" data-i18n="nextPrayerLabel">🕐 الصلاة القادمة: <span id="home-next-prayer">--</span></div>
                        <div class="progress-stats">
                            <div class="progress-stat">
                                <div class="progress-stat-value" data-i18n="fajr">الفجر</div>
                                <div class="progress-stat-label">--:-- </div>
                            </div>
                            <div class="progress-stat">
                                <div class="progress-stat-value" data-i18n="dhuhr">الظهر</div>
                                <div class="progress-stat-label">--:-- </div>
                            </div>
                            <div class="progress-stat">
                                <div class="progress-stat-value" style="color: var(--gold-primary);" data-i18n="asr">العصر</div>
                                <div class="progress-stat-label">--:-- </div>
                            </div>
                            <div class="progress-stat">
                                <div class="progress-stat-value" data-i18n="maghrib">المغرب</div>
                                <div class="progress-stat-label">--:--</div>
                            </div>
                            <div class="progress-stat">
                                <div class="progress-stat-value" data-i18n="isha">العشاء</div>
                                <div class="progress-stat-label">--:--</div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Adhkar -->
                    <div class="section-header">
                        <h3 data-i18n="quickAdhkar">📿 أذكار سريعة</h3>
                        <button class="section-link" onclick="showSubTab('worship', 'adhkar')" data-i18n="viewAll">عرض الكل</button>
                    </div>
                    <div class="adhkar-categories">
                        <div class="adhkar-card" onclick="showSubTab('worship', 'adhkar')">
                            <div class="adhkar-icon">🌅</div>
                            <div class="adhkar-title" data-i18n="adhkarMorning">أذكار الصباح</div>
                            <div class="adhkar-count">32 ذكر</div>
                        </div>
                        <div class="adhkar-card" onclick="showSubTab('worship', 'adhkar')">
                            <div class="adhkar-icon">🌙</div>
                            <div class="adhkar-title" data-i18n="adhkarEvening">أذكار المساء</div>
                            <div class="adhkar-count">32 ذكر</div>
                        </div>
                    </div>
                </div>

                <!-- Prayer Sub-content -->
                <div class="sub-content" id="worship-prayer">
                    <!-- Location Banner -->
                    <div class="prayer-location-bar" id="prayer-location-bar">
                        <span id="prayer-location-text">📍 جارٍ تحديد الموقع...</span>
                        <button onclick="requestPrayerLocation()" class="prayer-refresh-btn" id="prayer-refresh-btn">تحديث</button>
                    </div>

                    <!-- Next Prayer Highlight -->
                    <div class="prayer-next-card" id="prayer-next-card">
                        <div class="prayer-next-label" data-i18n="nextPrayer">الصلاة القادمة</div>
                        <div class="prayer-next-name" id="prayer-next-name">--</div>
                        <div class="prayer-next-time" id="prayer-next-time">--:--</div>
                        <div class="prayer-next-countdown" id="prayer-next-countdown">جارٍ الحساب...</div>
                    </div>

                    <!-- Time Format Toggle -->
                    <div style="display:flex;justify-content:center;gap:8px;margin-bottom:16px;">
                        <button class="time-format-btn active" id="btn-24h" onclick="setTimeFormat('24h')" style="padding:8px 20px;border-radius:20px;border:2px solid var(--gold-primary);background:var(--gold-primary);color:var(--navy-dark);font-family:'Tajawal',sans-serif;font-size:13px;font-weight:700;cursor:pointer;">24h</button>
                        <button class="time-format-btn" id="btn-12h" onclick="setTimeFormat('12h')" style="padding:8px 20px;border-radius:20px;border:2px solid rgba(212,175,55,0.3);background:transparent;color:var(--text-primary);font-family:'Tajawal',sans-serif;font-size:13px;font-weight:600;cursor:pointer;">12h AM/PM</button>
                    </div>

                    <!-- Prayer Times Grid -->
                    <div class="prayer-times-grid" id="prayer-times-grid">
                        <div class="prayer-time-row" data-prayer="Fajr">
                            <div class="prayer-time-icon">🌙</div>
                            <div class="prayer-time-name">الفجر</div>
                            <div class="prayer-time-value" id="prayer-fajr">--:--</div>
                        </div>
                        <div class="prayer-time-row" data-prayer="Sunrise">
                            <div class="prayer-time-icon">🌅</div>
                            <div class="prayer-time-name">الشروق</div>
                            <div class="prayer-time-value" id="prayer-sunrise">--:--</div>
                        </div>
                        <div class="prayer-time-row" data-prayer="Dhuhr">
                            <div class="prayer-time-icon">☀️</div>
                            <div class="prayer-time-name">الظهر</div>
                            <div class="prayer-time-value" id="prayer-dhuhr">--:--</div>
                        </div>
                        <div class="prayer-time-row" data-prayer="Asr">
                            <div class="prayer-time-icon">🌤️</div>
                            <div class="prayer-time-name">العصر</div>
                            <div class="prayer-time-value" id="prayer-asr">--:--</div>
                        </div>
                        <div class="prayer-time-row" data-prayer="Maghrib">
                            <div class="prayer-time-icon">🌇</div>
                            <div class="prayer-time-name">المغرب</div>
                            <div class="prayer-time-value" id="prayer-maghrib">--:--</div>
                        </div>
                        <div class="prayer-time-row" data-prayer="Isha">
                            <div class="prayer-time-icon">🌃</div>
                            <div class="prayer-time-name">العشاء</div>
                            <div class="prayer-time-value" id="prayer-isha">--:--</div>
                        </div>
                    </div>

                    <!-- Hijri Date -->
                    <div class="prayer-hijri-bar" id="prayer-hijri-date">
                        📅 التاريخ الهجري
                    </div>

                    <!-- Calculation Method Selector -->
                    <div class="prayer-method-section">
                        <div class="prayer-method-label">⚙️ طريقة الحساب</div>
                        <select id="prayer-method-select" onchange="changeCalcMethod(this.value)" class="prayer-method-dropdown">
                            <option value="4">أم القرى - مكة المكرمة</option>
                            <option value="5">الهيئة المصرية العامة للمساحة</option>
                            <option value="3">رابطة العالم الإسلامي</option>
                            <option value="2">ISNA - أمريكا الشمالية</option>
                            <option value="1">جامعة كراتشي</option>
                            <option value="7">معهد الجيوفيزياء - طهران</option>
                            <option value="8">خليج - الكويت</option>
                            <option value="9">الكويت</option>
                            <option value="10">قطر</option>
                            <option value="11">سنغافورة</option>
                            <option value="12">فرنسا (UOIF)</option>
                            <option value="13">تركيا (Diyanet)</option>
                            <option value="14">روسيا</option>
                            <option value="15">الإمارات (GAIAE)</option>
                        </select>
                    </div>

                    <div style="text-align:center;padding:10px;font-size:11px;color:rgba(255,255,255,0.4);">
                        <span id="prayer-method-name">طريقة الحساب: أم القرى • جامعة أم القرى</span>
                    </div>
                </div>

                <!-- Adhkar Sub-content -->
                <div class="sub-content" id="worship-adhkar">
                    <div class="adhkar-categories">
                        <div class="adhkar-card" onclick="openAdhkarCategory('morning')"><div class="adhkar-icon">🌅</div><div class="adhkar-title">أذكار الصباح</div><div class="adhkar-count">27 ذكر</div></div>
                        <div class="adhkar-card" onclick="openAdhkarCategory('evening')"><div class="adhkar-icon">🌙</div><div class="adhkar-title">أذكار المساء</div><div class="adhkar-count">27 ذكر</div></div>
                        <div class="adhkar-card" onclick="openAdhkarCategory('sleep')"><div class="adhkar-icon">😴</div><div class="adhkar-title" data-i18n="adhkarSleep">أذكار النوم</div><div class="adhkar-count">12 ذكر</div></div>
                        <div class="adhkar-card" onclick="openAdhkarCategory('wakeup')"><div class="adhkar-icon">☀️</div><div class="adhkar-title" data-i18n="adhkarWakeup">أذكار الاستيقاظ</div><div class="adhkar-count">5 ذكر</div></div>
                        <div class="adhkar-card" onclick="openAdhkarCategory('prayer')"><div class="adhkar-icon">🕌</div><div class="adhkar-title" data-i18n="adhkarAfterPrayer">أذكار بعد الصلاة</div><div class="adhkar-count">10 ذكر</div></div>
                        <div class="adhkar-card" onclick="openAdhkarCategory('travel')"><div class="adhkar-icon">🚗</div><div class="adhkar-title" data-i18n="adhkarTravel">أذكار السفر</div><div class="adhkar-count">8 ذكر</div></div>
                        <div class="adhkar-card" onclick="openAdhkarCategory('food')"><div class="adhkar-icon">🍽️</div><div class="adhkar-title" data-i18n="adhkarFood">أذكار الطعام</div><div class="adhkar-count">6 ذكر</div></div>
                        <div class="adhkar-card" onclick="openAdhkarCategory('home')"><div class="adhkar-icon">🏠</div><div class="adhkar-title" data-i18n="adhkarHome">أذكار المنزل</div><div class="adhkar-count">5 ذكر</div></div>
                    </div>
                </div>

                <!-- Duas Sub-content -->
                <div class="sub-content" id="worship-duas">
                    <!-- Populated by worship.js -->
                </div>

                <!-- Tasbeeh Sub-content -->
                <div class="sub-content" id="worship-tasbeeh">
                    <!-- Populated by worship.js -->
                </div>

                <!-- Calendar Sub-content -->
                <div class="sub-content" id="worship-calendar">
                    <!-- Populated by worship.js -->
                </div>

                <div class="sub-content" id="worship-qibla">
                    <!-- Populated by qibla.js -->
                </div>
            </section>

            <!-- ========== MISBAHA V2 — REALISTIC ========== -->
            <section class="page-section" id="page-misbaha">
                <button class="misbaha-back" onclick="showPage('home')">← العودة</button>

                <div class="top-bar">
                    <div class="dhikr-name" id="dName">سُبْحَانَ ٱللَّهِ</div>
                    <div class="dhikr-sub" id="dSub">SubhanAllah</div>
                </div>

                <div class="counter-box">
                    <div class="c-num" id="cNum">0</div>
                    <div class="c-of">من <b id="cTgt">33</b> · الجولة <b id="cRound">1</b></div>
                    <div class="c-total" id="cTotal"></div>
                </div>

                <div class="canvas-wrap">
                    <canvas id="mCanvas"></canvas>
                </div>

                <div class="swipe-hint">👆 انقر في أي مكان للعدّ</div>

                <div class="picker-title">✦ اختر المسبحة ✦</div>
                <div class="picker-row" id="pkRow"></div>

                <div class="dhikr-row" id="dRow"></div>

                <div class="ctrl-row">
                    <button class="cb" id="bReset">↺</button>
                    <button class="cb on" id="bSound">🔊</button>
                    <button class="cb" id="bMinus">−</button>
                </div>
            </section>

            <!-- ========== AUDIO PAGE (الصوتيات) ========== -->
            <section class="page-section" id="page-audio">
                <h2 class="page-title" data-i18n="audioTitle">🔊 الصوتيات</h2>

                <!-- Now Playing Card -->
                <div class="audio-now-playing" id="audio-now-playing" style="display:none;">
                    <div class="audio-np-header">🎵 يعمل الآن</div>
                    <div class="audio-np-body">
                        <div class="audio-np-info">
                            <div class="audio-np-surah" id="audio-np-surah">—</div>
                            <div class="audio-np-reciter" id="audio-np-reciter">—</div>
                        </div>
                        <div class="audio-np-controls">
                            <button class="audio-ctrl-btn" onclick="prevAyah()">⏮</button>
                            <button class="audio-ctrl-btn audio-ctrl-play" id="audio-page-play-btn" onclick="toggleAudio()">▶</button>
                            <button class="audio-ctrl-btn" onclick="nextAyah()">⏭</button>
                            <button class="audio-ctrl-btn audio-ctrl-sm" onclick="stopAudio()">⏹</button>
                        </div>
                    </div>
                </div>

                <!-- Quick Play: Continue where you left off -->
                <div class="audio-card" onclick="playFromCurrentPosition()">
                    <div class="audio-card-icon">▶️</div>
                    <div class="audio-card-text">
                        <div class="audio-card-title" data-i18n="audioContinue">متابعة الاستماع</div>
                        <div class="audio-card-desc" data-i18n="audioContinueDesc">استمع من حيث توقفت</div>
                    </div>
                    <span class="audio-card-arrow">←</span>
                </div>

                <!-- Reciter Selection -->
                <div class="audio-section-title">🎙️ اختر القارئ</div>
                <div class="audio-reciters-grid" id="audio-reciters-grid">
                    <!-- 🇪🇬 مصر -->
                    <div class="audio-reciter-card" data-reciter="ar.husary" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🇪🇬</div>
                        <div class="reciter-name">الحصري - مرتّل<div class="reciter-name-en">Al-Husary - Murattal</div></div>
                    </div>
                    <div class="audio-reciter-card" data-reciter="ar.husary.mujawwad" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🇪🇬</div>
                        <div class="reciter-name">الحصري - مجوّد<div class="reciter-name-en">Al-Husary - Mujawwad</div></div>
                    </div>
                    <div class="audio-reciter-card" data-reciter="ar.husary.muallim" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🇪🇬</div>
                        <div class="reciter-name">الحصري - معلّم<div class="reciter-name-en">Al-Husary - Muallim</div></div>
                    </div>
                    <div class="audio-reciter-card" data-reciter="ar.minshawi" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🇪🇬</div>
                        <div class="reciter-name">المنشاوي - مرتّل<div class="reciter-name-en">Al-Minshawi - Murattal</div></div>
                    </div>
                    <div class="audio-reciter-card" data-reciter="ar.minshawi.mujawwad" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🇪🇬</div>
                        <div class="reciter-name">المنشاوي - مجوّد<div class="reciter-name-en">Al-Minshawi - Mujawwad</div></div>
                    </div>
                    <div class="audio-reciter-card" data-reciter="ar.abdulbasit" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🇪🇬</div>
                        <div class="reciter-name">عبدالباسط - مرتّل<div class="reciter-name-en">Abdul Basit - Murattal</div></div>
                    </div>
                    <div class="audio-reciter-card" data-reciter="ar.abdulbasit.mujawwad" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🇪🇬</div>
                        <div class="reciter-name">عبدالباسط - مجوّد<div class="reciter-name-en">Abdul Basit - Mujawwad</div></div>
                    </div>
                    <div class="audio-reciter-card" data-reciter="ar.tablawi" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🇪🇬</div>
                        <div class="reciter-name">الطبلاوي<div class="reciter-name-en">Al-Tablawi</div></div>
                    </div>
                    <div class="audio-reciter-card" data-reciter="ar.jibreel" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🇪🇬</div>
                        <div class="reciter-name">محمد جبريل<div class="reciter-name-en">Muhammad Jibreel</div></div>
                    </div>
                    <div class="audio-reciter-card" data-reciter="ar.neana" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🇪🇬</div>
                        <div class="reciter-name">أحمد نعينع<div class="reciter-name-en">Ahmed Neana</div></div>
                    </div>
                    <div class="audio-reciter-card" data-reciter="ar.suesy" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🇪🇬</div>
                        <div class="reciter-name">السويسي<div class="reciter-name-en">Al-Suesy</div></div>
                    </div>
                    <div class="audio-reciter-card" data-reciter="ar.salamah" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🇪🇬</div>
                        <div class="reciter-name">ياسر سلامة<div class="reciter-name-en">Yaser Salamah</div></div>
                    </div>
                    <!-- 🇰🇼 الكويت -->
                    <div class="audio-reciter-card" data-reciter="ar.alafasy" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🇰🇼</div>
                        <div class="reciter-name">مشاري العفاسي<div class="reciter-name-en">Mishary Al-Afasy</div></div>
                    </div>
                    <!-- 🇦🇪 الإمارات -->
                    <div class="audio-reciter-card" data-reciter="ar.shaatree" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🇦🇪</div>
                        <div class="reciter-name">الشاطري<div class="reciter-name-en">Abu Bakr Ash-Shatri</div></div>
                    </div>
                    <div class="audio-reciter-card" data-reciter="ar.bukhatir" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🇦🇪</div>
                        <div class="reciter-name">صلاح بوخاطر<div class="reciter-name-en">Salah Bukhatir</div></div>
                    </div>
                    <!-- 🇸🇾 سوريا -->
                    <div class="audio-reciter-card" data-reciter="ar.sowaid" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🇸🇾</div>
                        <div class="reciter-name">أيمن سويد<div class="reciter-name-en">Ayman Sowaid</div></div>
                    </div>
                    <!-- 🕋 الحرمين -->
                    <div class="audio-reciter-card" data-reciter="ar.abdurrahmaansudais" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🕋</div>
                        <div class="reciter-name">السديس<div class="reciter-name-en">Abdurrahman As-Sudais</div></div>
                    </div>
                    <div class="audio-reciter-card" data-reciter="ar.saudalshuraim" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🕋</div>
                        <div class="reciter-name">الشريم<div class="reciter-name-en">Saud Ash-Shuraim</div></div>
                    </div>
                    <div class="audio-reciter-card" data-reciter="ar.maaboralhazmy" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🕋</div>
                        <div class="reciter-name">المعيقلي<div class="reciter-name-en">Maher Al-Muaiqly</div></div>
                    </div>
                    <div class="audio-reciter-card" data-reciter="ar.budair" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🕋</div>
                        <div class="reciter-name">صلاح البدير<div class="reciter-name-en">Salah Al-Budair</div></div>
                    </div>
                    <!-- 🌍 آخرون -->
                    <div class="audio-reciter-card" data-reciter="ar.ayyoub" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🕌</div>
                        <div class="reciter-name">محمد أيوب<div class="reciter-name-en">Muhammad Ayyoub</div></div>
                    </div>
                    <div class="audio-reciter-card" data-reciter="ar.hudhaify" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🕌</div>
                        <div class="reciter-name">الحذيفي<div class="reciter-name-en">Ali Al-Hudhaify</div></div>
                    </div>
                    <div class="audio-reciter-card" data-reciter="ar.rifai" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🕌</div>
                        <div class="reciter-name">هاني الرفاعي<div class="reciter-name-en">Hani Ar-Rifai</div></div>
                    </div>
                    <div class="audio-reciter-card" data-reciter="ar.alghamdi" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🕌</div>
                        <div class="reciter-name">سعد الغامدي<div class="reciter-name-en">Saad Al-Ghamdi</div></div>
                    </div>
                    <!-- 🇮🇷 إيران -->
                    <div class="audio-reciter-card" data-reciter="ar.mansoori" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🇮🇷</div>
                        <div class="reciter-name">كريم منصوري<div class="reciter-name-en">Karim Mansoori</div></div>
                    </div>
                    <!-- 🇧🇦 البوسنة -->
                    <div class="audio-reciter-card" data-reciter="ar.alili" onclick="selectReciterCard(this)">
                        <div class="reciter-avatar">🇧🇦</div>
                        <div class="reciter-name">عزيز عليلي<div class="reciter-name-en">Aziz Alili</div></div>
                    </div>
                </div>
                <!-- Play Surah Section -->
                <div class="audio-section-title">📖 استمع لسورة</div>
                <div class="audio-surah-picker">
                    <select class="setting-select" id="audio-surah-select" onchange="updateAudioSurahInfo()">
                        <!-- Populated by JS -->
                    </select>
                    <button class="audio-play-surah-btn" onclick="playSelectedSurah()">
                        ▶ تشغيل السورة
                    </button>
                </div>
                <div class="audio-surah-info" id="audio-surah-info">
                    <span id="audio-surah-ayah-count">7 آيات</span>
                    <span id="audio-surah-cache-status">—</span>
                    <button class="audio-download-btn" onclick="downloadSelectedSurah()" id="audio-download-surah-btn">
                        📥 تحميل للاستماع بدون انترنت
                    </button>
                </div>

                <!-- Speed Control -->
                <div class="audio-section-title">⏩ سرعة التشغيل</div>
                <div class="audio-speed-row">
                    <button class="audio-speed-pill" onclick="setAudioSpeed(0.5)">0.5x</button>
                    <button class="audio-speed-pill" onclick="setAudioSpeed(0.75)">0.75x</button>
                    <button class="audio-speed-pill active" onclick="setAudioSpeed(1)">1x</button>
                    <button class="audio-speed-pill" onclick="setAudioSpeed(1.25)">1.25x</button>
                    <button class="audio-speed-pill" onclick="setAudioSpeed(1.5)">1.5x</button>
                    <button class="audio-speed-pill" onclick="setAudioSpeed(2)">2x</button>
                </div>

                <!-- Repeat / Memorization Controls -->
                <div class="audio-section-title">🔁 التكرار والحفظ</div>
                
                <!-- Repeat Mode Selector -->
                <div class="audio-repeat-mode-row">
                    <select class="setting-select" id="audio-repeat-mode" onchange="updateRepeatMode(this.value); document.getElementById('select-repeat-mode').value=this.value;">
                        <option value="none">بدون تكرار</option>
                        <option value="ayah">تكرار آية واحدة</option>
                        <option value="range">تكرار مجموعة آيات</option>
                        <option value="surah">تكرار سورة كاملة</option>
                        <option value="multi-surah">تكرار عدة سور متتالية</option>
                        <option value="juz">تكرار جزء كامل</option>
                    </select>
                </div>

                <!-- Ayah Repeat Options -->
                <div id="audio-repeat-ayah" class="audio-repeat-options" style="display:none;">
                    <div class="audio-repeat-grid">
                        <div class="audio-repeat-field">
                            <label>📕 السورة</label>
                            <select class="setting-select" id="audio-ayah-surah" onchange="document.getElementById('ayah-surah').value=this.value">
                            </select>
                        </div>
                        <div class="audio-repeat-field">
                            <label>🔖 رقم الآية</label>
                            <input type="number" class="setting-input" id="audio-ayah-number" min="1" value="1" onchange="document.getElementById('ayah-number').value=this.value">
                        </div>
                        <div class="audio-repeat-field">
                            <label>🔢 عدد التكرار</label>
                            <select class="setting-select" id="audio-ayah-count" onchange="document.getElementById('ayah-repeat-count').value=this.value">
                                <option value="2">مرتين</option>
                                <option value="3" selected>3 مرات</option>
                                <option value="5">5 مرات</option>
                                <option value="7">7 مرات</option>
                                <option value="10">10 مرات</option>
                                <option value="20">20 مرة</option>
                                <option value="0">∞ بلا توقف</option>
                            </select>
                        </div>
                        <div class="audio-repeat-field">
                            <label>⏱️ الفاصل</label>
                            <select class="setting-select" id="audio-ayah-delay" onchange="document.getElementById('ayah-delay').value=this.value">
                                <option value="0">بدون</option>
                                <option value="1" selected data-i18n="delay1s">1 ثانية</option>
                                <option value="2" data-i18n="delay2s">2 ثانية</option>
                                <option value="3">3 ثواني</option>
                                <option value="5">5 ثواني</option>
                            </select>
                        </div>
                        <div class="audio-repeat-field">
                            <label>⏭️ بعد التكرار</label>
                            <select class="setting-select" id="audio-ayah-after" onchange="document.getElementById('ayah-after').value=this.value">
                                <option value="stop">توقف</option>
                                <option value="next">الآية التالية</option>
                                <option value="next-repeat">التالية وكرر</option>
                            </select>
                        </div>
                    </div>
                    <button class="audio-repeat-start-btn" onclick="startAyahRepeatFromAudioPage()">
                        ▶ ابدأ تكرار الآية
                    </button>
                </div>

                <!-- Range Repeat Options -->
                <div id="audio-repeat-range" class="audio-repeat-options" style="display:none;">
                    <div class="audio-repeat-grid">
                        <div class="audio-repeat-field">
                            <label>📕 السورة</label>
                            <select class="setting-select" id="audio-range-surah" onchange="document.getElementById('range-surah').value=this.value">
                            </select>
                        </div>
                        <div class="audio-repeat-field">
                            <label>📖 من آية</label>
                            <input type="number" class="setting-input" id="audio-range-from" min="1" value="1" onchange="document.getElementById('range-from').value=this.value">
                        </div>
                        <div class="audio-repeat-field">
                            <label>📖 إلى آية</label>
                            <input type="number" class="setting-input" id="audio-range-to" min="1" value="7" onchange="document.getElementById('range-to').value=this.value">
                        </div>
                        <div class="audio-repeat-field">
                            <label>🔢 عدد التكرار</label>
                            <select class="setting-select" id="audio-range-count" onchange="document.getElementById('range-repeat-count').value=this.value">
                                <option value="2">مرتين</option>
                                <option value="3" selected>3 مرات</option>
                                <option value="5">5 مرات</option>
                                <option value="7">7 مرات</option>
                                <option value="10">10 مرات</option>
                                <option value="0">∞ بلا توقف</option>
                            </select>
                        </div>
                        <div class="audio-repeat-field">
                            <label>⏱️ الفاصل</label>
                            <select class="setting-select" id="audio-range-delay" onchange="document.getElementById('range-delay').value=this.value">
                                <option value="0">بدون</option>
                                <option value="2" selected>2 ثانية</option>
                                <option value="5">5 ثواني</option>
                                <option value="10">10 ثواني</option>
                            </select>
                        </div>
                        <div class="audio-repeat-field">
                            <label>⏭️ بعد التكرار</label>
                            <select class="setting-select" id="audio-range-after" onchange="document.getElementById('range-after').value=this.value">
                                <option value="stop">توقف</option>
                                <option value="next-range">المجموعة التالية</option>
                                <option value="restart">أعد من البداية</option>
                            </select>
                        </div>
                    </div>
                    <button class="audio-repeat-start-btn" onclick="startRangeRepeatFromAudioPage()">
                        ▶ ابدأ تكرار المجموعة
                    </button>
                </div>

                <!-- Surah Repeat Options -->
                <div id="audio-repeat-surah" class="audio-repeat-options" style="display:none;">
                    <div class="audio-repeat-grid">
                        <div class="audio-repeat-field full-width">
                            <label>📕 اختر السورة</label>
                            <select class="setting-select" id="audio-surah-repeat-pick">
                            </select>
                        </div>
                        <div class="audio-repeat-field">
                            <label>🔢 عدد التكرار</label>
                            <select class="setting-select" id="audio-surah-count" onchange="document.getElementById('surah-repeat-count').value=this.value">
                                <option value="1">مرة واحدة</option>
                                <option value="2">مرتين</option>
                                <option value="3" selected>3 مرات</option>
                                <option value="5">5 مرات</option>
                                <option value="7">7 مرات</option>
                                <option value="10">10 مرات</option>
                                <option value="0">∞ بلا توقف</option>
                            </select>
                        </div>
                        <div class="audio-repeat-field">
                            <label>⏱️ الفاصل بين التكرار</label>
                            <select class="setting-select" id="audio-surah-delay" onchange="document.getElementById('surah-delay').value=this.value">
                                <option value="0">بدون</option>
                                <option value="2" data-i18n="delay2s">2 ثانية</option>
                                <option value="5" selected>5 ثواني</option>
                                <option value="10">10 ثواني</option>
                            </select>
                        </div>
                    </div>
                    <button class="audio-repeat-start-btn" onclick="startSurahRepeatFromAudioPage()">
                        ▶ ابدأ تكرار السورة
                    </button>
                </div>

                <!-- Multi-Surah Repeat Options -->
                <div id="audio-repeat-multi-surah" class="audio-repeat-options" style="display:none;">
                    <div class="audio-repeat-grid">
                        <div class="audio-repeat-field">
                            <labeldata-i18n="fromSurah">📕 من سورة</label>
                            <select class="setting-select" id="audio-multi-from">
                            </select>
                        </div>
                        <div class="audio-repeat-field">
                            <labeldata-i18n="toSurah">📗 إلى سورة</label>
                            <select class="setting-select" id="audio-multi-to">
                            </select>
                        </div>
                        <div class="audio-repeat-field">
                            <label>🔢 عدد التكرار</label>
                            <select class="setting-select" id="audio-multi-count">
                                <option value="1" selected>مرة واحدة</option>
                                <option value="2">مرتين</option>
                                <option value="3">3 مرات</option>
                                <option value="5">5 مرات</option>
                                <option value="0">∞ بلا توقف</option>
                            </select>
                        </div>
                        <div class="audio-repeat-field">
                            <label>⏱️ الفاصل</label>
                            <select class="setting-select" id="audio-multi-delay">
                                <option value="0">بدون</option>
                                <option value="2" data-i18n="delay2s">2 ثانية</option>
                                <option value="5" selected>5 ثواني</option>
                                <option value="10">10 ثواني</option>
                            </select>
                        </div>
                    </div>
                    <button class="audio-repeat-start-btn" onclick="startMultiSurahRepeat()">
                        ▶ ابدأ تكرار السور المتتالية
                    </button>
                </div>

                <!-- Juz Repeat Options -->
                <div id="audio-repeat-juz" class="audio-repeat-options" style="display:none;">
                    <div class="audio-repeat-grid">
                        <div class="audio-repeat-field">
                            <label>📚 اختر الجزء</label>
                            <select class="setting-select" id="audio-juz-pick">
                            </select>
                        </div>
                        <div class="audio-repeat-field">
                            <label>🔢 عدد التكرار</label>
                            <select class="setting-select" id="audio-juz-count" onchange="document.getElementById('juz-repeat-count').value=this.value">
                                <option value="1">مرة واحدة</option>
                                <option value="2" selected>مرتين</option>
                                <option value="3">3 مرات</option>
                                <option value="5">5 مرات</option>
                                <option value="0">∞ بلا توقف</option>
                            </select>
                        </div>
                        <div class="audio-repeat-field">
                            <label>⏱️ الفاصل</label>
                            <select class="setting-select" id="audio-juz-delay" onchange="document.getElementById('juz-delay').value=this.value">
                                <option value="0">بدون</option>
                                <option value="5" selected>5 ثواني</option>
                                <option value="10">10 ثواني</option>
                            </select>
                        </div>
                    </div>
                    <button class="audio-repeat-start-btn" onclick="startJuzRepeatFromAudioPage()">
                        ▶ ابدأ تكرار الجزء
                    </button>
                </div>

            </section>

            <!-- ========== COMMUNITY PAGE (المجتمع) ========== -->
            <section class="page-section" id="page-community">
                <h2 class="page-title">👥 المجتمع</h2>
                
                <!-- Sub-tabs -->
                <div class="sub-tabs">
                    <button class="sub-tab active" onclick="showSubTab('community', 'feed')">🏠 الرئيسية</button>
                    <button class="sub-tab" onclick="showSubTab('community', 'discover')">🔍 اكتشف</button>
                    <button class="sub-tab" onclick="showSubTab('community', 'khatma')">📿 ختمات</button>
                    <button class="sub-tab" onclick="showSubTab('community', 'compete')">🏆 منافسات</button>
                    <button class="sub-tab" onclick="showSubTab('community', 'messages')">💬 رسائل</button>
                    <button class="sub-tab" onclick="showSubTab('community', 'profile')">👤 ملفي</button>
                </div>

                <!-- Feed Sub-content -->
                <div class="sub-content active" id="community-feed">
                    <!-- Record Button -->
                    <div style="text-align:center;margin-bottom:20px;">
                        <button style="background:linear-gradient(135deg,var(--gold-primary),var(--gold-dark));border:none;padding:12px 30px;border-radius:25px;color:#fff;font-size:15px;font-weight:700;cursor:pointer;font-family:'Tajawal',sans-serif;box-shadow:0 4px 15px rgba(212,175,55,0.4);">🎙️ سجّل تلاوتك وشاركها</button>
                    </div>

                    <!-- Feed Posts -->
                    <div class="feed-post">
                        <div class="feed-post-header">
                            <div class="feed-avatar">أ</div>
                            <div>
                                <div class="feed-user-name">أبو عبدالله</div>
                                <div class="feed-time">منذ ساعة • سورة الملك</div>
                            </div>
                        </div>
                        <div class="feed-content">
                            <div class="feed-verse">تَبَارَكَ الَّذِي بِيَدِهِ الْمُلْكُ وَهُوَ عَلَىٰ كُلِّ شَيْءٍ قَدِيرٌ</div>
                            <div class="feed-surah">📍 سورة الملك - آية 1</div>
                        </div>
                        <div class="feed-actions">
                            <button class="feed-action">❤️ 24</button>
                            <button class="feed-action">💬 8</button>
                            <button class="feed-action">📤 مشاركة</button>
                            <button class="feed-action">🔊 استمع</button>
                        </div>
                    </div>

                    <div class="feed-post">
                        <div class="feed-post-header">
                            <div class="feed-avatar">م</div>
                            <div>
                                <div class="feed-user-name">مريم الأحمد</div>
                                <div class="feed-time">منذ 3 ساعات • سورة يس</div>
                            </div>
                        </div>
                        <div class="feed-content">
                            <div class="feed-verse">إِنَّا نَحْنُ نُحْيِي الْمَوْتَىٰ وَنَكْتُبُ مَا قَدَّمُوا وَآثَارَهُمْ</div>
                            <div class="feed-surah">📍 سورة يس - آية 12</div>
                        </div>
                        <div class="feed-actions">
                            <button class="feed-action">❤️ 56</button>
                            <button class="feed-action">💬 15</button>
                            <button class="feed-action">📤 مشاركة</button>
                            <button class="feed-action">🔊 استمع</button>
                        </div>
                    </div>

                    <div class="feed-post">
                        <div class="feed-post-header">
                            <div class="feed-avatar">ع</div>
                            <div>
                                <div class="feed-user-name">عمر المحمود</div>
                                <div class="feed-time">منذ 5 ساعات • ختمة كاملة! 🎉</div>
                            </div>
                        </div>
                        <div class="feed-content">
                            <div class="feed-verse">🎉 أتممت ختمة القرآن الكريم - الختمة الخامسة!</div>
                            <div class="feed-surah">🏆 ما شاء الله! 5 ختمات</div>
                        </div>
                        <div class="feed-actions">
                            <button class="feed-action">❤️ 142</button>
                            <button class="feed-action">💬 38</button>
                            <button class="feed-action">📤 مشاركة</button>
                        </div>
                    </div>
                </div>

                <!-- Discover Sub-content -->
                <div class="sub-content" id="community-discover">
                    <div class="search-box">
                        <span class="search-icon">🔍</span>
                        <input type="text" placeholder="ابحث عن أشخاص، تلاوات، مجموعات...">
                    </div>
                    <div class="section-header"><h3>🔥 تلاوات رائجة</h3></div>
                    <div class="list-item"><div class="list-item-icon">🎙️</div><div class="list-item-content"><div class="list-item-title">سورة الرحمن - أحمد محمد</div><div class="list-item-desc">❤️ 1.2K • 🔊 3.5K استماع</div></div><div class="list-item-arrow">←</div></div>
                    <div class="list-item"><div class="list-item-icon">🎙️</div><div class="list-item-content"><div class="list-item-title">سورة الكهف - فاطمة علي</div><div class="list-item-desc">❤️ 890 • 🔊 2.1K استماع</div></div><div class="list-item-arrow">←</div></div>
                    <div class="list-item"><div class="list-item-icon">🎙️</div><div class="list-item-content"><div class="list-item-title">سورة مريم - خالد العمري</div><div class="list-item-desc">❤️ 756 • 🔊 1.8K استماع</div></div><div class="list-item-arrow">←</div></div>
                    <div class="section-header" style="margin-top:20px;"><h3>⭐ قرّاء مميزون</h3></div>
                    <div class="list-item"><div class="list-item-icon">👤</div><div class="list-item-content"><div class="list-item-title">الشيخ أحمد الكويتي</div><div class="list-item-desc">👥 12.5K متابع • 📿 45 ختمة</div></div><div class="list-item-arrow">←</div></div>
                    <div class="list-item"><div class="list-item-icon">👤</div><div class="list-item-content"><div class="list-item-title">أم سارة</div><div class="list-item-desc">👥 8.2K متابع • 📿 23 ختمة</div></div><div class="list-item-arrow">←</div></div>
                </div>

                <!-- Khatma Sub-content -->
                <div class="sub-content" id="community-khatma">
                    <div style="text-align:center;margin-bottom:20px;">
                        <button style="background:var(--gold-primary);border:none;padding:12px 30px;border-radius:25px;color:#fff;font-size:14px;font-weight:700;cursor:pointer;font-family:'Tajawal',sans-serif;">➕ إنشاء ختمة جديدة</button>
                    </div>
                    <div class="section-header"><h3>📿 ختماتي النشطة</h3></div>
                    <div class="list-item"><div class="list-item-icon">📿</div><div class="list-item-content"><div class="list-item-title">ختمة العائلة</div><div class="list-item-desc">👥 8 مشاركين • 📊 65% مكتملة</div></div><div class="list-item-arrow">←</div></div>
                    <div class="list-item"><div class="list-item-icon">📿</div><div class="list-item-content"><div class="list-item-title">ختمة مسجد الفروانية</div><div class="list-item-desc">👥 45 مشاركين • 📊 30% مكتملة</div></div><div class="list-item-arrow">←</div></div>
                    <div class="section-header" style="margin-top:20px;"><h3>🌍 ختمات عامة</h3></div>
                    <div class="list-item"><div class="list-item-icon">🌍</div><div class="list-item-content"><div class="list-item-title">ختمة رمضان العالمية</div><div class="list-item-desc">👥 10K+ مشارك • 📊 12% مكتملة</div></div><div class="list-item-arrow">←</div></div>
                </div>

                <!-- Competitions Sub-content -->
                <div class="sub-content" id="community-compete">
                    <div class="section-header"><h3>🏆 منافساتي</h3></div>
                    <div class="list-item"><div class="list-item-icon">🥇</div><div class="list-item-content"><div class="list-item-title">تحدي 30 يوم قراءة</div><div class="list-item-desc">ترتيبك: #5 من 120 • 🔥 12 يوم متواصل</div></div><div class="list-item-arrow">←</div></div>
                    <div class="list-item"><div class="list-item-icon">🥈</div><div class="list-item-content"><div class="list-item-title">مسابقة الحفظ الأسبوعية</div><div class="list-item-desc">ترتيبك: #12 من 85 • 📖 3 صفحات</div></div><div class="list-item-arrow">←</div></div>
                    <div class="section-header" style="margin-top:20px;"><h3>🌍 المتصدرون هذا الأسبوع</h3></div>
                    <div class="list-item"><div class="list-item-icon">🥇</div><div class="list-item-content"><div class="list-item-title">أحمد الراشد</div><div class="list-item-desc">📖 45 صفحة • 🔥 30 يوم</div></div></div>
                    <div class="list-item"><div class="list-item-icon">🥈</div><div class="list-item-content"><div class="list-item-title">فاطمة الزهراء</div><div class="list-item-desc">📖 42 صفحة • 🔥 28 يوم</div></div></div>
                    <div class="list-item"><div class="list-item-icon">🥉</div><div class="list-item-content"><div class="list-item-title">عبدالله الخالد</div><div class="list-item-desc">📖 38 صفحة • 🔥 25 يوم</div></div></div>
                </div>

                <!-- Messages Sub-content -->
                <div class="sub-content" id="community-messages">
                    <div class="list-item"><div class="list-item-icon">💬</div><div class="list-item-content"><div class="list-item-title">أبو عبدالله</div><div class="list-item-desc">ما شاء الله تلاوة رائعة! • منذ 10 د</div></div><div class="list-item-arrow">←</div></div>
                    <div class="list-item"><div class="list-item-icon">💬</div><div class="list-item-content"><div class="list-item-title">مجموعة العائلة</div><div class="list-item-desc">أم سارة: من يقرأ جزء عمّ اليوم؟ • منذ ساعة</div></div><div class="list-item-arrow">←</div></div>
                    <div class="list-item"><div class="list-item-icon">💬</div><div class="list-item-content"><div class="list-item-title">الشيخ محمد</div><div class="list-item-desc">أحسنت! تقدمك ممتاز • أمس</div></div><div class="list-item-arrow">←</div></div>
                </div>

                <!-- Profile Sub-content (Instagram Style) -->
                <div class="sub-content" id="community-profile">
                    <!-- Profile Header -->
                    <div class="profile-header">
                        <div class="profile-avatar-wrap">
                            <div class="profile-avatar" id="profile-avatar-letter">م</div>
                            <div class="profile-avatar-edit" onclick="openEditProfile()">📷</div>
                        </div>
                        <div class="profile-name" id="profile-display-name">مستخدم</div>
                        <div class="profile-username" id="profile-display-username">@user</div>
                        <div class="profile-bio" id="profile-display-bio">بِسْمِ ٱللَّهِ ٱلرَّحْمَٰنِ ٱلرَّحِيمِ</div>
                    </div>
                    
                    <!-- Stats Bar -->
                    <div class="profile-stats-bar">
                        <div class="profile-stat">
                            <div class="profile-stat-num" id="profile-posts-count">0</div>
                            <div class="profile-stat-label">منشور</div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-num" id="profile-followers-count">0</div>
                            <div class="profile-stat-label">متابع</div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-num" id="profile-following-count">0</div>
                            <div class="profile-stat-label">متابَع</div>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="profile-actions">
                        <button class="profile-btn-edit" onclick="openEditProfile()">✏️ تعديل الملف</button>
                        <button class="profile-btn-share" onclick="shareCurrentVerse()">📤</button>
                    </div>
                    
                    <!-- Grid Tabs (Instagram style) -->
                    <div class="profile-grid-tabs">
                        <button class="profile-grid-tab active" onclick="switchProfileTab('all', this)">📱</button>
                        <button class="profile-grid-tab" onclick="switchProfileTab('verse', this)">📖</button>
                        <button class="profile-grid-tab" onclick="switchProfileTab('achievement', this)">🏆</button>
                        <button class="profile-grid-tab" onclick="switchProfileTab('recitation', this)">🎙️</button>
                    </div>
                    
                    <!-- Instagram 3-Column Grid -->
                    <div class="profile-grid" id="profile-posts-grid">
                        <!-- Populated by auth.js renderProfileGrid() -->
                    </div>
                    
                    <!-- Logout -->
                    <div style="text-align:center;padding:30px 0;">
                        <button onclick="signOut()" style="background:none;border:2px solid #EF4444;color:#EF4444;padding:12px 30px;border-radius:12px;font-family:'Tajawal',sans-serif;font-size:14px;font-weight:700;cursor:pointer;">🚪 تسجيل الخروج</button>
                    </div>
                </div>
            </section>

            <!-- ========== MORE PAGE (المزيد) ========== -->
            <section class="page-section" id="page-more">
                <h2 class="page-title" data-i18n="moreTitle">☰ المزيد</h2>
                
                <!-- Main Features List -->
                <div class="section-header"><h3 data-i18n="servicesHeader">🌟 الخدمات</h3></div>
                
                <div class="list-item" onclick="showPage('halal')">
                    <div class="list-item-icon">🌍</div>
                    <div class="list-item-content">
                        <div class="list-item-title" data-i18n="moreHalalGuide">دليل المسلم والحلال <span class="coming-soon-tag" data-i18n="comingSoon">قريباً</span></div>
                        <div class="list-item-desc" data-i18n="moreHalalDesc">مساجد، متاجر إسلامية، مطاعم حلال بحسب بلدك</div>
                    </div>
                    <div class="list-item-arrow">←</div>
                </div>

                <div class="list-item" onclick="showPage('marketplace')">
                    <div class="list-item-icon">🛒</div>
                    <div class="list-item-content">
                        <div class="list-item-title" data-i18n="moreMarket">السوق الإسلامي <span class="coming-soon-tag">قريباً</span></div>
                        <div class="list-item-desc" data-i18n="moreMarketDesc">مصاحف، كتب، ملابس، هدايا</div>
                    </div>
                    <div class="list-item-arrow">←</div>
                </div>

                <div class="list-item" onclick="showPage('teachers')">
                    <div class="list-item-icon">👨‍🏫</div>
                    <div class="list-item-content">
                        <div class="list-item-title" data-i18n="moreTeachers">المعلمون <span class="coming-soon-tag">قريباً</span></div>
                        <div class="list-item-desc" data-i18n="moreTeachersDesc">احجز دروس تجويد وحفظ مع معلم</div>
                    </div>
                    <div class="list-item-arrow">←</div>
                </div>

                <div class="list-item" onclick="showPage('kids')">
                    <div class="list-item-icon">👶</div>
                    <div class="list-item-content">
                        <div class="list-item-title" data-i18n="moreKids">وضع الأطفال <span class="coming-soon-tag">قريباً</span></div>
                        <div class="list-item-desc" data-i18n="moreKidsDesc">تعليم القرآن للأطفال بطريقة ممتعة</div>
                    </div>
                    <div class="list-item-arrow">←</div>
                </div>

                <div class="list-item" onclick="showPage('progress')">
                    <div class="list-item-icon">📊</div>
                    <div class="list-item-content">
                        <div class="list-item-title" data-i18n="moreStats">تقدمي وإحصائياتي</div>
                        <div class="list-item-desc" data-i18n="moreStatsDesc">تقارير شاملة عن نشاطك</div>
                    </div>
                    <div class="list-item-arrow">←</div>
                </div>

                <div style="height:15px;"></div>
                <div class="section-header"><h3 data-i18n="settingsHeader">⚙️ الإعدادات</h3></div>
                
                <div class="list-item" onclick="showPage('settings')">
                    <div class="list-item-icon">⚙️</div>
                    <div class="list-item-content">
                        <div class="list-item-title" data-i18n="moreGeneralSettings">الإعدادات العامة</div>
                        <div class="list-item-desc" data-i18n="moreGeneralSettingsDesc">المظهر، الإشعارات، المنهج، المزامنة</div>
                    </div>
                    <div class="list-item-arrow">←</div>
                </div>

                <div class="list-item" onclick="window.location.href='mailto:hamasatquran6@gmail.com'">
                    <div class="list-item-icon">📧</div>
                    <div class="list-item-content">
                        <div class="list-item-title" data-i18n="moreContact">تواصل معنا</div>
                        <div class="list-item-desc">hamasatquran6@gmail.com</div>
                    </div>
                    <div class="list-item-arrow">←</div>
                </div>

                <div class="list-item">
                    <div class="list-item-icon">⭐</div>
                    <div class="list-item-content">
                        <div class="list-item-title" data-i18n="moreRate">قيّم التطبيق</div>
                        <div class="list-item-desc" data-i18n="moreRateDesc">ساعدنا بتقييمك على المتجر</div>
                    </div>
                    <div class="list-item-arrow">←</div>
                </div>

                <div class="list-item" onclick="showLegalPage('privacy')">
                    <div class="list-item-icon">🔒</div>
                    <div class="list-item-content">
                        <div class="list-item-title" data-i18n="morePrivacy">سياسة الخصوصية</div>
                        <div class="list-item-desc" data-i18n="morePrivacyDesc">كيف نحمي بياناتك الشخصية</div>
                    </div>
                    <div class="list-item-arrow">←</div>
                </div>

                <div class="list-item" onclick="showLegalPage('terms')">
                    <div class="list-item-icon">📋</div>
                    <div class="list-item-content">
                        <div class="list-item-title">الشروط والأحكام</div>
                        <div class="list-item-desc">شروط استخدام التطبيق</div>
                    </div>
                    <div class="list-item-arrow">←</div>
                </div>

                <div class="list-item" onclick="showLegalPage('sources')">
                    <div class="list-item-icon">📜</div>
                    <div class="list-item-content">
                        <div class="list-item-title">المصادر المعتمدة</div>
                        <div class="list-item-desc">12 تفسير • 26 قارئ • 8 كتب حديث</div>
                    </div>
                    <div class="list-item-arrow">←</div>
                </div>

                <div class="list-item">
                    <div class="list-item-icon">ℹ️</div>
                    <div class="list-item-content">
                        <div class="list-item-title">حول همسات القرآن</div>
                        <div class="list-item-desc">الإصدار 1.0 • © 2025-2026</div>
                    </div>
                    <div class="list-item-arrow">←</div>
                </div>
            </section>

            <!-- ========== HALAL GUIDE PAGE ========== -->
            <section class="page-section" id="page-halal">
                <button class="back-btn" onclick="showPage('more')">← العودة</button>
                <h2 class="page-title" id="halal-page-title">🌍 دليل المسلم</h2>
                <div class="coming-soon-overlay">
                    <div class="cs-icon">🌍</div>
                    <div class="cs-title">دليل المسلم والحلال</div>
                    <div class="cs-subtitle">نعمل على توفير دليل شامل للمساجد والمطاعم الحلال<br>والمتاجر الإسلامية في أكثر من 70 دولة</div>
                    <div class="cs-badge">قريباً إن شاء الله 🔜</div>
                </div>
                <div style="display:none;">
                
                <!-- Search -->
                <div class="search-box">
                    <span class="search-icon">🔍</span>
                    <input type="text" placeholder="ابحث عن بلد أو مدينة..." id="country-search" oninput="filterCountries(this.value)">
                </div>

                <!-- Location Banner -->
                <div class="info-banner" id="halal-location-banner">
                    <div class="info-banner-icon">📍</div>
                    <div class="info-banner-text">
                        <h3 id="halal-country-name">🇰🇼 الكويت</h3>
                        <p id="halal-country-type">بلد إسلامي • دليل المسلم</p>
                    </div>
                </div>

                <!-- Muslim Country View (Default for Kuwait) -->
                <div id="muslim-country-view">
                    <div class="feature-grid">
                        <div class="feature-card">
                            <div class="feature-card-icon">🕌</div>
                            <div class="feature-card-title">المساجد القريبة</div>
                            <div class="feature-card-desc">اعثر على أقرب مسجد</div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-card-icon">📚</div>
                            <div class="feature-card-title">المكتبات الإسلامية</div>
                            <div class="feature-card-desc">كتب ومصاحف</div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-card-icon">📿</div>
                            <div class="feature-card-title">المتاجر الإسلامية</div>
                            <div class="feature-card-desc">سبح، عطور، سجادات</div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-card-icon">🎓</div>
                            <div class="feature-card-title">حلقات التحفيظ</div>
                            <div class="feature-card-desc">حلقات قرآن قريبة</div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-card-icon">🏫</div>
                            <div class="feature-card-title">المدارس الإسلامية</div>
                            <div class="feature-card-desc">مدارس ومعاهد</div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-card-icon">🧕</div>
                            <div class="feature-card-title">دور التحفيظ النسائية</div>
                            <div class="feature-card-desc">حلقات نسائية</div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-card-icon">💰</div>
                            <div class="feature-card-title">الجمعيات الخيرية</div>
                            <div class="feature-card-desc">صدقات وتبرعات</div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-card-icon">🗺️</div>
                            <div class="feature-card-title">الخريطة</div>
                            <div class="feature-card-desc">عرض على الخريطة</div>
                        </div>
                    </div>
                </div>

                <!-- Non-Muslim Country View (Hidden by default) -->
                <div id="nonmuslim-country-view" style="display:none;">
                    <div class="feature-grid">
                        <div class="feature-card">
                            <div class="feature-card-icon">🍽️</div>
                            <div class="feature-card-title">مطاعم حلال</div>
                            <div class="feature-card-desc">مطاعم موثقة</div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-card-icon">🥩</div>
                            <div class="feature-card-title">جزارين حلال</div>
                            <div class="feature-card-desc">لحوم حلال</div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-card-icon">🛒</div>
                            <div class="feature-card-title">متاجر حلال</div>
                            <div class="feature-card-desc">منتجات حلال</div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-card-icon">🕌</div>
                            <div class="feature-card-title">المساجد</div>
                            <div class="feature-card-desc">أقرب مسجد إليك</div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-card-icon">🏨</div>
                            <div class="feature-card-title">فنادق صديقة</div>
                            <div class="feature-card-desc">صديقة للمسلمين</div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-card-icon">✅</div>
                            <div class="feature-card-title">شهادات الحلال</div>
                            <div class="feature-card-desc">الجهات المعتمدة</div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-card-icon">📿</div>
                            <div class="feature-card-title">المتاجر الإسلامية</div>
                            <div class="feature-card-desc">منتجات إسلامية</div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-card-icon">🧭</div>
                            <div class="feature-card-title">مصلّيات</div>
                            <div class="feature-card-desc">أماكن الصلاة</div>
                        </div>
                        <div class="feature-card">
                            <div class="feature-card-icon">🗺️</div>
                            <div class="feature-card-title">الخريطة</div>
                            <div class="feature-card-desc">عرض على الخريطة</div>
                        </div>
                    </div>

                    <!-- Warnings & Tips -->
                    <div style="margin-top:15px;padding:16px;background:linear-gradient(135deg,#fef3c7,#fde68a);border-radius:var(--radius-lg);border:2px solid #f59e0b;">
                        <div style="font-weight:700;font-size:15px;color:#92400e;margin-bottom:10px;">⚠️ تنبيهات مهمة</div>
                        <div style="font-size:12px;color:#78350f;line-height:1.8;" id="country-warnings">
                            • تأكد دائماً من شهادة الحلال قبل الأكل<br>
                            • بعض المطاعم تستخدم كحول في الطبخ<br>
                            • الجيلاتين في الحلويات غالباً غير حلال<br>
                            • ابحث عن علامة ✅ الحلال على المنتجات
                        </div>
                    </div>

                    <!-- Useful Phrases -->
                    <div style="margin-top:15px;padding:16px;background:var(--bg-tertiary);border-radius:var(--radius-lg);">
                        <div style="font-weight:700;font-size:15px;color:var(--navy-dark);margin-bottom:10px;">🗣️ عبارات مفيدة</div>
                        <div style="font-size:13px;color:var(--text-secondary);line-height:2;" id="useful-phrases">
                            🇬🇧 "Is this halal?" - هل هذا حلال؟<br>
                            🇬🇧 "No pork please" - بدون لحم خنزير<br>
                            🇬🇧 "No alcohol" - بدون كحول<br>
                            🇬🇧 "Where is the nearest mosque?" - أين أقرب مسجد؟
                        </div>
                    </div>
                </div>

                <!-- Travel Mode -->
                <div style="margin:20px 0;padding:16px;background:linear-gradient(135deg,#1e3a5f,#2d5a8e);border-radius:var(--radius-lg);text-align:center;">
                    <div style="font-size:24px;margin-bottom:8px;">✈️</div>
                    <div style="color:#fff;font-weight:700;font-size:15px;margin-bottom:4px;">وضع المسافر</div>
                    <div style="color:rgba(255,255,255,0.8);font-size:12px;">مسافر؟ اختر بلد وجهتك وحمّل البيانات للاستخدام بدون إنترنت</div>
                </div>

                <!-- Region Selector -->
                <div class="section-header"><h3>🌍 اختر المنطقة</h3></div>
                
                <!-- Regions as sub-tabs -->
                <div class="sub-tabs" style="margin-bottom:15px;">
                    <button class="sub-tab active" onclick="showRegion('mideast', this)">🌍 الشرق الأوسط</button>
                    <button class="sub-tab" onclick="showRegion('nafrica', this)">🌍 شمال أفريقيا</button>
                    <button class="sub-tab" onclick="showRegion('asia', this)">🌏 آسيا</button>
                    <button class="sub-tab" onclick="showRegion('europe', this)">🌍 أوروبا</button>
                    <button class="sub-tab" onclick="showRegion('namerica', this)">🌎 أمريكا الشمالية</button>
                    <button class="sub-tab" onclick="showRegion('samerica', this)">🌎 أمريكا الجنوبية</button>
                    <button class="sub-tab" onclick="showRegion('africa', this)">🌍 أفريقيا</button>
                    <button class="sub-tab" onclick="showRegion('oceania', this)">🌏 أوقيانوسيا</button>
                </div>

                <!-- Middle East -->
                <div class="region-list active" id="region-mideast">
                    <div style="display:flex;flex-wrap:wrap;gap:8px;">
                        <button class="country-btn muslim-country active-country" onclick="selectCountry(this, true, '🇰🇼 الكويت')">🇰🇼 الكويت</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇸🇦 السعودية')">🇸🇦 السعودية</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇦🇪 الإمارات')">🇦🇪 الإمارات</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇶🇦 قطر')">🇶🇦 قطر</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇧🇭 البحرين')">🇧🇭 البحرين</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇴🇲 عمان')">🇴🇲 عمان</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇮🇶 العراق')">🇮🇶 العراق</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇯🇴 الأردن')">🇯🇴 الأردن</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇱🇧 لبنان')">🇱🇧 لبنان</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇸🇾 سوريا')">🇸🇾 سوريا</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇵🇸 فلسطين')">🇵🇸 فلسطين</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇾🇪 اليمن')">🇾🇪 اليمن</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇹🇷 تركيا')">🇹🇷 تركيا</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇮🇷 إيران')">🇮🇷 إيران</button>
                    </div>
                </div>

                <!-- North Africa -->
                <div class="region-list" id="region-nafrica" style="display:none;">
                    <div style="display:flex;flex-wrap:wrap;gap:8px;">
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇪🇬 مصر')">🇪🇬 مصر</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇱🇾 ليبيا')">🇱🇾 ليبيا</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇹🇳 تونس')">🇹🇳 تونس</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇩🇿 الجزائر')">🇩🇿 الجزائر</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇲🇦 المغرب')">🇲🇦 المغرب</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇸🇩 السودان')">🇸🇩 السودان</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇲🇷 موريتانيا')">🇲🇷 موريتانيا</button>
                    </div>
                </div>

                <!-- Asia -->
                <div class="region-list" id="region-asia" style="display:none;">
                    <div style="display:flex;flex-wrap:wrap;gap:8px;">
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇲🇾 ماليزيا')">🇲🇾 ماليزيا</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇮🇩 إندونيسيا')">🇮🇩 إندونيسيا</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇧🇳 بروناي')">🇧🇳 بروناي</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇵🇰 باكستان')">🇵🇰 باكستان</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇧🇩 بنغلاديش')">🇧🇩 بنغلاديش</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇲🇻 المالديف')">🇲🇻 المالديف</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇦🇫 أفغانستان')">🇦🇫 أفغانستان</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇰🇿 كازاخستان')">🇰🇿 كازاخستان</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇺🇿 أوزبكستان')">🇺🇿 أوزبكستان</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇦🇿 أذربيجان')">🇦🇿 أذربيجان</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇮🇳 الهند')">🇮🇳 الهند</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇸🇬 سنغافورة')">🇸🇬 سنغافورة</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇹🇭 تايلاند')">🇹🇭 تايلاند</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇵🇭 الفلبين')">🇵🇭 الفلبين</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇱🇰 سريلانكا')">🇱🇰 سريلانكا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇯🇵 اليابان')">🇯🇵 اليابان</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇰🇷 كوريا')">🇰🇷 كوريا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇨🇳 الصين')">🇨🇳 الصين</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇭🇰 هونغ كونغ')">🇭🇰 هونغ كونغ</button>
                    </div>
                </div>

                <!-- Europe -->
                <div class="region-list" id="region-europe" style="display:none;">
                    <div style="display:flex;flex-wrap:wrap;gap:8px;">
                        <button class="country-btn" onclick="selectCountry(this, false, '🇬🇧 بريطانيا')">🇬🇧 بريطانيا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇫🇷 فرنسا')">🇫🇷 فرنسا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇩🇪 ألمانيا')">🇩🇪 ألمانيا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇳🇱 هولندا')">🇳🇱 هولندا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇧🇪 بلجيكا')">🇧🇪 بلجيكا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇸🇪 السويد')">🇸🇪 السويد</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇳🇴 النرويج')">🇳🇴 النرويج</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇩🇰 الدنمارك')">🇩🇰 الدنمارك</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇫🇮 فنلندا')">🇫🇮 فنلندا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇪🇸 إسبانيا')">🇪🇸 إسبانيا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇮🇹 إيطاليا')">🇮🇹 إيطاليا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇦🇹 النمسا')">🇦🇹 النمسا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇨🇭 سويسرا')">🇨🇭 سويسرا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇬🇷 اليونان')">🇬🇷 اليونان</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇵🇱 بولندا')">🇵🇱 بولندا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇷🇴 رومانيا')">🇷🇴 رومانيا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇵🇹 البرتغال')">🇵🇹 البرتغال</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇮🇪 أيرلندا')">🇮🇪 أيرلندا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇷🇺 روسيا')">🇷🇺 روسيا</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇧🇦 البوسنة')">🇧🇦 البوسنة</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇽🇰 كوسوفو')">🇽🇰 كوسوفو</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇦🇱 ألبانيا')">🇦🇱 ألبانيا</button>
                    </div>
                </div>

                <!-- North America -->
                <div class="region-list" id="region-namerica" style="display:none;">
                    <div style="display:flex;flex-wrap:wrap;gap:8px;">
                        <button class="country-btn" onclick="selectCountry(this, false, '🇺🇸 أمريكا')">🇺🇸 أمريكا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇨🇦 كندا')">🇨🇦 كندا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇲🇽 المكسيك')">🇲🇽 المكسيك</button>
                    </div>
                </div>

                <!-- South America -->
                <div class="region-list" id="region-samerica" style="display:none;">
                    <div style="display:flex;flex-wrap:wrap;gap:8px;">
                        <button class="country-btn" onclick="selectCountry(this, false, '🇧🇷 البرازيل')">🇧🇷 البرازيل</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇦🇷 الأرجنتين')">🇦🇷 الأرجنتين</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇨🇱 تشيلي')">🇨🇱 تشيلي</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇨🇴 كولومبيا')">🇨🇴 كولومبيا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇵🇪 بيرو')">🇵🇪 بيرو</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇻🇪 فنزويلا')">🇻🇪 فنزويلا</button>
                    </div>
                </div>

                <!-- Africa -->
                <div class="region-list" id="region-africa" style="display:none;">
                    <div style="display:flex;flex-wrap:wrap;gap:8px;">
                        <button class="country-btn" onclick="selectCountry(this, false, '🇳🇬 نيجيريا')">🇳🇬 نيجيريا</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇸🇳 السنغال')">🇸🇳 السنغال</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇲🇱 مالي')">🇲🇱 مالي</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇳🇪 النيجر')">🇳🇪 النيجر</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇸🇴 الصومال')">🇸🇴 الصومال</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇩🇯 جيبوتي')">🇩🇯 جيبوتي</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇬🇲 غامبيا')">🇬🇲 غامبيا</button>
                        <button class="country-btn muslim-country" onclick="selectCountry(this, true, '🇹🇩 تشاد')">🇹🇩 تشاد</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇿🇦 جنوب أفريقيا')">🇿🇦 جنوب أفريقيا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇰🇪 كينيا')">🇰🇪 كينيا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇹🇿 تنزانيا')">🇹🇿 تنزانيا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇪🇹 إثيوبيا')">🇪🇹 إثيوبيا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇬🇭 غانا')">🇬🇭 غانا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇺🇬 أوغندا')">🇺🇬 أوغندا</button>
                    </div>
                </div>

                <!-- Oceania -->
                <div class="region-list" id="region-oceania" style="display:none;">
                    <div style="display:flex;flex-wrap:wrap;gap:8px;">
                        <button class="country-btn" onclick="selectCountry(this, false, '🇦🇺 أستراليا')">🇦🇺 أستراليا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇳🇿 نيوزيلندا')">🇳🇿 نيوزيلندا</button>
                        <button class="country-btn" onclick="selectCountry(this, false, '🇫🇯 فيجي')">🇫🇯 فيجي</button>
                    </div>
                </div>
                            </div>
            </section>

            <!-- ========== MARKETPLACE PAGE ========== -->
            <section class="page-section" id="page-marketplace">
                <button class="back-btn" onclick="showPage('more')">← العودة</button>
                <h2 class="page-title">🛒 السوق الإسلامي</h2>
                <div class="coming-soon-overlay">
                    <div class="cs-icon">🛒</div>
                    <div class="cs-title">السوق الإسلامي</div>
                    <div class="cs-subtitle">سوق إلكتروني للمنتجات الإسلامية<br>مصاحف، كتب، ملابس، هدايا، وأكثر</div>
                    <div class="cs-badge">قريباً إن شاء الله 🔜</div>
                </div>
                <div style="display:none;">
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-card-icon">📚</div>
                        <div class="feature-card-title">مصاحف وكتب</div>
                        <div class="feature-card-desc">مطبوعة ورقمية</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-card-icon">📿</div>
                        <div class="feature-card-title">منتجات إسلامية</div>
                        <div class="feature-card-desc">سبح، سجادات، مسك</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-card-icon">👗</div>
                        <div class="feature-card-title">ملابس محتشمة</div>
                        <div class="feature-card-desc">حجاب، عبايات، ثياب</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-card-icon">🎁</div>
                        <div class="feature-card-title">هدايا إسلامية</div>
                        <div class="feature-card-desc">للعيد ورمضان</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-card-icon">🧴</div>
                        <div class="feature-card-title">منتجات حلال</div>
                        <div class="feature-card-desc">عناية وتجميل</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-card-icon">👶</div>
                        <div class="feature-card-title">منتجات الأطفال</div>
                        <div class="feature-card-desc">ألعاب تعليمية</div>
                    </div>
                </div>
                            </div>
            </section>

            <!-- ========== TEACHERS PAGE ========== -->
            <section class="page-section" id="page-teachers">
                <button class="back-btn" onclick="showPage('more')">← العودة</button>
                <h2 class="page-title">👨‍🏫 المعلمون</h2>
                <div class="coming-soon-overlay">
                    <div class="cs-icon">👨‍🏫</div>
                    <div class="cs-title">المعلمون</div>
                    <div class="cs-subtitle">منصة لحجز دروس التجويد والحفظ<br>مع معلمين معتمدين من حول العالم</div>
                    <div class="cs-badge">قريباً إن شاء الله 🔜</div>
                </div>
                <div style="display:none;">
                
                <div class="search-box">
                    <span class="search-icon">🔍</span>
                    <input type="text" placeholder="ابحث عن معلم...">
                </div>

                <div class="sub-tabs">
                    <button class="sub-tab active">الكل</button>
                    <button class="sub-tab">تجويد</button>
                    <button class="sub-tab">حفظ</button>
                    <button class="sub-tab">تفسير</button>
                    <button class="sub-tab">أطفال</button>
                </div>

                <div class="list-item"><div class="list-item-icon">👨‍🏫</div><div class="list-item-content"><div class="list-item-title">الشيخ أحمد المصري</div><div class="list-item-desc">⭐ 4.9 • تجويد وحفظ • 15$/ساعة</div></div><div class="list-item-arrow">←</div></div>
                <div class="list-item"><div class="list-item-icon">👩‍🏫</div><div class="list-item-content"><div class="list-item-title">الأستاذة نور الهدى</div><div class="list-item-desc">⭐ 4.8 • تعليم الأطفال • 10$/ساعة</div></div><div class="list-item-arrow">←</div></div>
                <div class="list-item"><div class="list-item-icon">👨‍🏫</div><div class="list-item-content"><div class="list-item-title">الشيخ عبدالرحمن</div><div class="list-item-desc">⭐ 5.0 • تفسير وتجويد • 20$/ساعة</div></div><div class="list-item-arrow">←</div></div>
                            </div>
            </section>

            <!-- ========== KIDS PAGE ========== -->
            <section class="page-section" id="page-kids">
                <button class="back-btn" onclick="showPage('more')">← العودة</button>
                <h2 class="page-title">👶 وضع الأطفال</h2>
                <div class="coming-soon-overlay">
                    <div class="cs-icon">👶</div>
                    <div class="cs-title">وضع الأطفال</div>
                    <div class="cs-subtitle">تعليم القرآن الكريم للأطفال<br>بطريقة ممتعة وتفاعلية مع ألعاب ومكافآت</div>
                    <div class="cs-badge">قريباً إن شاء الله 🔜</div>
                </div>
                <div style="display:none;">
                
                <div class="info-banner" style="background: linear-gradient(135deg, #FF6B9D, #C084FC);">
                    <div class="info-banner-icon">🌟</div>
                    <div class="info-banner-text">
                        <h3 style="color:#fff;">مرحباً يا بطل!</h3>
                        <p style="color:rgba(255,255,255,0.9);">هيا نتعلم القرآن الكريم معاً!</p>
                    </div>
                </div>

                <div class="feature-grid">
                    <div class="feature-card" style="border-color:#FF6B9D;">
                        <div class="feature-card-icon">🎮</div>
                        <div class="feature-card-title">ألعاب القرآن</div>
                        <div class="feature-card-desc">تعلم بالمرح</div>
                    </div>
                    <div class="feature-card" style="border-color:#C084FC;">
                        <div class="feature-card-icon">🎵</div>
                        <div class="feature-card-title">أناشيد</div>
                        <div class="feature-card-desc">أناشيد إسلامية</div>
                    </div>
                    <div class="feature-card" style="border-color:#34D399;">
                        <div class="feature-card-icon">📖</div>
                        <div class="feature-card-title">قصص الأنبياء</div>
                        <div class="feature-card-desc">قصص مصورة</div>
                    </div>
                    <div class="feature-card" style="border-color:#FBBF24;">
                        <div class="feature-card-icon">✏️</div>
                        <div class="feature-card-title">حروف عربية</div>
                        <div class="feature-card-desc">تعلم الحروف</div>
                    </div>
                    <div class="feature-card" style="border-color:#60A5FA;">
                        <div class="feature-card-icon">🧠</div>
                        <div class="feature-card-title">حفظ قصار السور</div>
                        <div class="feature-card-desc">بطريقة سهلة</div>
                    </div>
                    <div class="feature-card" style="border-color:#F87171;">
                        <div class="feature-card-icon">🏆</div>
                        <div class="feature-card-title">إنجازاتي</div>
                        <div class="feature-card-desc">⭐ نجمة ✨</div>
                    </div>
                </div>
                            </div>
            </section>

            <!-- ========== PROGRESS PAGE ========== -->
            <section class="page-section" id="page-progress">
                <button class="back-btn" onclick="showPage('more')">← العودة</button>
                <h2 class="page-title">📊 تقدمي</h2>
                <div class="progress-card">
                    <div class="progress-title">🔥 السلسلة الحالية</div>
                    <div class="progress-stats">
                        <div class="progress-stat"><div class="progress-stat-value">0</div><div class="progress-stat-label">يوم متواصل</div></div>
                        <div class="progress-stat"><div class="progress-stat-value">0</div><div class="progress-stat-label">أفضل سلسلة</div></div>
                    </div>
                </div>
                <div class="progress-card" style="background: linear-gradient(135deg, #166534, #22c55e);">
                    <div class="progress-title">📖 إحصائيات القراءة</div>
                    <div class="progress-stats">
                        <div class="progress-stat"><div class="progress-stat-value">0</div><div class="progress-stat-label">صفحة هذا الأسبوع</div></div>
                        <div class="progress-stat"><div class="progress-stat-value">0</div><div class="progress-stat-label">صفحة هذا الشهر</div></div>
                        <div class="progress-stat"><div class="progress-stat-value">0h</div><div class="progress-stat-label">إجمالي الوقت</div></div>
                        <div class="progress-stat"><div class="progress-stat-value">0</div><div class="progress-stat-label">ختمات مكتملة</div></div>
                    </div>
                </div>
                <div class="progress-card" id="dhikr-stats-card" style="background: linear-gradient(135deg, #78350f, #D4AF37);">
                    <div class="progress-title">📿 إحصائيات الذكر والتسبيح</div>
                    <div class="progress-stats">
                        <div class="progress-stat"><div class="progress-stat-value" id="dhikr-stat-today">0</div><div class="progress-stat-label">تسبيحة اليوم</div></div>
                        <div class="progress-stat"><div class="progress-stat-value" id="dhikr-stat-week">0</div><div class="progress-stat-label">هذا الأسبوع</div></div>
                        <div class="progress-stat"><div class="progress-stat-value" id="dhikr-stat-rounds">0</div><div class="progress-stat-label">جولة مكتملة</div></div>
                        <div class="progress-stat"><div class="progress-stat-value" id="dhikr-stat-total">0</div><div class="progress-stat-label">إجمالي التسبيحات</div></div>
                    </div>
                </div>
            </section>

            <!-- Settings Page -->
            <section class="page-section" id="page-settings">
                <h2 class="page-title" data-i18n="settingsTitle">⚙️ الإعدادات</h2>

                <!-- Appearance Section -->
                <div class="settings-section">
                    <div class="settings-title">🎨 المظهر</div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🌐</span>
                            <div>
                                <div class="setting-label" data-i18n="appLanguage">لغة التطبيق</div>
                                <div class="setting-desc" data-i18n="appLanguageDesc">لغة واجهة التطبيق</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-app-language" onchange="setAppLanguage(this.value)">
                            <option value="ar" selected>العربية</option>
                            <option value="en">English</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🌓</span>
                            <div>
                                <div class="setting-label" data-i18n="theme">السمة</div>
                                <div class="setting-desc" data-i18n="themeDesc">اختر مظهر التطبيق</div>
                            </div>
                        </div>
                        <div class="theme-selector">
                            <button class="theme-btn light active" onclick="setTheme('light')" title="فاتح"></button>
                            <button class="theme-btn dark" onclick="setTheme('dark')" title="داكن"></button>
                            <button class="theme-btn sepia" onclick="setTheme('sepia')" title="سيبيا"></button>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🔤</span>
                            <div>
                                <div class="setting-label" data-i18n="fontSize">حجم خط الآيات</div>
                                <div class="setting-desc" data-i18n="fontSizeDesc">تكبير أو تصغير حجم الخط</div>
                            </div>
                        </div>
                        <div class="font-size-selector">
                            <button class="font-size-btn" onclick="setFontSize(22)" data-size="22">ص</button>
                            <button class="font-size-btn active" onclick="setFontSize(26)" data-size="26">م</button>
                            <button class="font-size-btn" onclick="setFontSize(32)" data-size="32">ك</button>
                        </div>
                    </div>
                </div>

                <!-- Reading Section -->
                <div class="settings-section">
                    <div class="settings-title">📖 القراءة</div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📄</span>
                            <div>
                                <div class="setting-label" data-i18n="viewMode">نوع العرض</div>
                                <div class="setting-desc" data-i18n="viewModeDesc">طريقة عرض صفحات المصحف</div>
                            </div>
                        </div>
                        <div class="view-mode-selector">
                            <button class="view-mode-btn active" onclick="setViewMode('scroll')" data-mode="scroll" data-i18n="scroll"data-i18n="rdrScroll">📜 تمرير</button>
                            <button class="view-mode-btn" onclick="setViewMode('page')" data-mode="page" data-i18n="pages">📖 صفحات</button>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">✍️</span>
                            <div>
                                <div class="setting-label" data-i18n="scriptType">نوع الخط</div>
                                <div class="setting-desc" data-i18n="scriptTypeDesc">رسم المصحف (عثماني، هندي...)</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-script" onchange="setQuranScript(this.value)">
                            <option value="uthmani">عثماني (المدينة)</option>
                            <option value="imlaei">إملائي (حديث)</option>
                            <option value="indopak">هندي / باكستاني</option>
                            <option value="nastaliq">فارسي (نستعليق)</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🎨</span>
                            <div>
                                <div class="setting-label" data-i18n="tajweedColors">ألوان التجويد</div>
                                <div class="setting-desc" data-i18n="tajweedColorsDesc">تلوين أحكام التجويد في النص</div>
                            </div>
                        </div>
                        <div class="toggle" id="toggle-tajweed" onclick="toggleSetting('tajweed')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📝</span>
                            <div>
                                <div class="setting-label" data-i18n="waqfMarks">علامات الوقف</div>
                                <div class="setting-desc" data-i18n="waqfMarksDesc">إظهار علامات الوقف والابتداء</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-waqf" onclick="toggleSetting('waqf')"></div>
                    </div>
                </div>

                <!-- Audio Section -->
                <div class="settings-section">
                    <div class="settings-title">🔊 الصوت</div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🎙️</span>
                            <div>
                                <div class="setting-label" data-i18n="reciter">القارئ</div>
                                <div class="setting-desc" data-i18n="reciterDesc">اختر القارئ المفضل</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-reciter" onchange="setReciter(this.value)">
                            <optgroup label="🇪🇬 مصر — مرتّل" data-i18n-label="egyptMurattal">
                                <option value="ar.husary">محمود خليل الحصري — Al-Husary</option>
                                <option value="ar.minshawi">محمد صديق المنشاوي — Al-Minshawi</option>
                                <option value="ar.abdulbasit">عبدالباسط عبدالصمد — Abdul Basit</option>
                                <option value="ar.tablawi">محمد الطبلاوي — Al-Tablawi</option>
                                <option value="ar.jibreel">محمد جبريل — M. Jibreel</option>
                                <option value="ar.neana">أحمد نعينع — A. Neana</option>
                                <option value="ar.suesy">علي حجاج السويسي — Al-Suesy</option>
                                <option value="ar.salamah">ياسر سلامة — Y. Salamah</option>
                            </optgroup>
                            <optgroup label="🇪🇬 مصر — مجوّد" data-i18n-label="egyptMujawwad">
                                <option value="ar.husary.mujawwad">الحصري - مجوّد — Husary Mujawwad</option>
                                <option value="ar.husary.muallim">الحصري - معلّم — Husary Muallim</option>
                                <option value="ar.minshawi.mujawwad">المنشاوي - مجوّد — Minshawi Mujawwad</option>
                                <option value="ar.abdulbasit.mujawwad">عبدالباسط - مجوّد — Basit Mujawwad</option>
                            </optgroup>
                            <optgroup label="🇰🇼 الكويت" data-i18n-label="kuwait">
                                <option value="ar.alafasy" selected>مشاري العفاسي — Mishary Al-Afasy</option>
                            </optgroup>
                            <optgroup label="🇦🇪 الإمارات" data-i18n-label="uae">
                                <option value="ar.shaatree">أبو بكر الشاطري — Ash-Shatri</option>
                                <option value="ar.bukhatir">صلاح بوخاطر — S. Bukhatir</option>
                            </optgroup>
                            <optgroup label="🇸🇾 سوريا" data-i18n-label="syria">
                                <option value="ar.sowaid">أيمن سويد — A. Sowaid</option>
                            </optgroup>
                            <optgroup label="🕋 أئمة الحرمين" data-i18n-label="haramain">
                                <option value="ar.abdurrahmaansudais">عبدالرحمن السديس — As-Sudais</option>
                                <option value="ar.saudalshuraim">سعود الشريم — Ash-Shuraim</option>
                                <option value="ar.maaboralhazmy">ماهر المعيقلي — Al-Muaiqly</option>
                                <option value="ar.alijaber">علي جابر — Ali Jaber</option>
                                <option value="ar.budair">صلاح البدير — S. Al-Budair</option>
                            </optgroup>
                            <optgroup label="🌍 آخرون" data-i18n-label="others">
                                <option value="ar.ayyoub">محمد أيوب — M. Ayyoub</option>
                                <option value="ar.hudhaify">علي الحذيفي — Al-Hudhaify</option>
                                <option value="ar.rifai">هاني الرفاعي — H. Ar-Rifai</option>
                                <option value="ar.alghamdi">سعد الغامدي — S. Al-Ghamdi</option>
                                <option value="ar.yaboralshuraim">ياسر الدوسري — Y. Ad-Dussary</option>
                                <option value="ar.mansoori">كريم منصوري — K. Mansoori 🇮🇷</option>
                                <option value="ar.alili">عزيز عليلي — A. Alili 🇧🇦</option>
                            </optgroup>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">⏩</span>
                            <div>
                                <div class="setting-label" data-i18n="playbackSpeed">سرعة الصوت</div>
                                <div class="setting-desc" data-i18n="playbackSpeedDesc">التحكم في سرعة التلاوة</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-speed" onchange="setPlaybackSpeed(this.value)">
                            <option value="0.5">0.5x</option>
                            <option value="0.75">0.75x</option>
                            <option value="1" selected>1x</option>
                            <option value="1.25">1.25x</option>
                            <option value="1.5">1.5x</option>
                        </select>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">▶️</span>
                            <div>
                                <div class="setting-label" data-i18n="autoPlay">التشغيل التلقائي</div>
                                <div class="setting-desc" data-i18n="autoPlayDesc">تشغيل الآية التالية تلقائياً</div>
                            </div>
                        </div>
                        <div class="toggle" id="toggle-autoplay" onclick="toggleSetting('autoplay')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📥</span>
                            <div>
                                <div class="setting-label" data-i18n="autoDownload">التحميل التلقائي</div>
                                <div class="setting-desc" data-i18n="autoDownloadDesc">تحميل الصوت للاستماع بدون إنترنت</div>
                            </div>
                        </div>
                        <div class="toggle" id="toggle-download" onclick="toggleSetting('download')"></div>
                    </div>
                </div>

                <!-- Repeat/Memorization Section -->
                <div class="settings-section">
                    <div class="settings-title">🔁 التكرار والحفظ</div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📝</span>
                            <div>
                                <div class="setting-label" data-i18n="repeatMode">وضع التكرار</div>
                                <div class="setting-desc" data-i18n="repeatModeDesc">اختر طريقة التكرار</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-repeat-mode" onchange="updateRepeatMode(this.value)">
                            <option value="none">بدون تكرار</option>
                            <option value="ayah">تكرار الآية</option>
                            <option value="range">تكرار مجموعة آيات</option>
                            <option value="surah">تكرار السورة</option>
                            <option value="multi-surah">تكرار عدة سور</option>
                            <option value="juz">تكرار الجزء</option>
                        </select>
                    </div>

                    <!-- Settings for: تكرار الآية -->
                    <div id="repeat-ayah-settings" class="repeat-subsettings" style="display: none;">
                        <div class="subsettings-header">⚙️ إعدادات تكرار الآية</div>
                        
                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">📕</span>
                                <div>
                                    <div class="setting-label">اختر السورة</div>
                                    <div class="setting-desc">السورة التي تريد التكرار منها</div>
                                </div>
                            </div>
                            <select class="setting-select" id="ayah-surah">
                                <!-- Populated by JS with all 114 surahs -->
                            </select>
                        </div>

                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">🔖</span>
                                <div>
                                    <div class="setting-label">اختر الآية</div>
                                    <div class="setting-desc">رقم الآية للتكرار</div>
                                </div>
                            </div>
                            <input type="number" class="setting-input" id="ayah-number" min="1" value="1">
                        </div>

                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">🔢</span>
                                <div>
                                    <div class="setting-label">عدد التكرار</div>
                                    <div class="setting-desc">كم مرة تكرر الآية؟</div>
                                </div>
                            </div>
                            <select class="setting-select" id="ayah-repeat-count">
                                <option value="2">مرتين</option>
                                <option value="3">3 مرات</option>
                                <option value="5">5 مرات</option>
                                <option value="7">7 مرات</option>
                                <option value="10">10 مرات</option>
                                <option value="20">20 مرة</option>
                                <option value="infinite">∞ بلا توقف</option>
                            </select>
                        </div>

                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">⏱️</span>
                                <div>
                                    <div class="setting-label">الفاصل</div>
                                    <div class="setting-desc">وقت الانتظار بين كل تكرار</div>
                                </div>
                            </div>
                            <select class="setting-select" id="ayah-delay">
                                <option value="0" data-i18n="noDelay">بدون فاصل</option>
                                <option value="1">1 ثانية</option>
                                <option value="2" data-i18n="delay2s">2 ثانية</option>
                                <option value="3">3 ثواني</option>
                                <option value="5">5 ثواني</option>
                            </select>
                        </div>

                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">⏭️</span>
                                <div>
                                    <div class="setting-label">بعد التكرار</div>
                                    <div class="setting-desc">ماذا يحدث بعد اكتمال التكرار؟</div>
                                </div>
                            </div>
                            <select class="setting-select" id="ayah-after">
                                <option value="stop">توقف</option>
                                <option value="next">انتقل للآية التالية</option>
                                <option value="next-repeat">انتقل وكرر التالية</option>
                            </select>
                        </div>
                    </div>

                    <!-- Settings for: تكرار مجموعة آيات -->
                    <div id="repeat-range-settings" class="repeat-subsettings" style="display: none;">
                        <div class="subsettings-header">⚙️ إعدادات تكرار مجموعة آيات</div>
                        
                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">📕</span>
                                <div>
                                    <div class="setting-label">اختر السورة</div>
                                    <div class="setting-desc">السورة التي تريد التكرار منها</div>
                                </div>
                            </div>
                            <select class="setting-select" id="range-surah">
                                <!-- Populated by JS with all 114 surahs -->
                            </select>
                        </div>

                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">📖</span>
                                <div>
                                    <div class="setting-label">من آية</div>
                                    <div class="setting-desc">بداية النطاق</div>
                                </div>
                            </div>
                            <input type="number" class="setting-input" id="range-from" min="1" value="1">
                        </div>

                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">📖</span>
                                <div>
                                    <div class="setting-label">إلى آية</div>
                                    <div class="setting-desc">نهاية النطاق</div>
                                </div>
                            </div>
                            <input type="number" class="setting-input" id="range-to" min="1" value="7">
                        </div>

                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">🔢</span>
                                <div>
                                    <div class="setting-label">عدد التكرار</div>
                                    <div class="setting-desc">كم مرة تكرر المجموعة؟</div>
                                </div>
                            </div>
                            <select class="setting-select" id="range-repeat-count">
                                <option value="2">مرتين</option>
                                <option value="3">3 مرات</option>
                                <option value="5">5 مرات</option>
                                <option value="7">7 مرات</option>
                                <option value="10">10 مرات</option>
                                <option value="infinite">∞ بلا توقف</option>
                            </select>
                        </div>

                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">⏱️</span>
                                <div>
                                    <div class="setting-label">الفاصل</div>
                                    <div class="setting-desc">وقت الانتظار بين كل تكرار</div>
                                </div>
                            </div>
                            <select class="setting-select" id="range-delay">
                                <option value="0" data-i18n="noDelay">بدون فاصل</option>
                                <option value="2" data-i18n="delay2s">2 ثانية</option>
                                <option value="5">5 ثواني</option>
                                <option value="10">10 ثواني</option>
                            </select>
                        </div>

                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">⏭️</span>
                                <div>
                                    <div class="setting-label">بعد التكرار</div>
                                    <div class="setting-desc">ماذا يحدث بعد اكتمال التكرار؟</div>
                                </div>
                            </div>
                            <select class="setting-select" id="range-after">
                                <option value="stop">توقف</option>
                                <option value="next-range">انتقل للمجموعة التالية</option>
                                <option value="restart">أعد من البداية</option>
                            </select>
                        </div>
                    </div>

                    <!-- Settings for: تكرار السورة -->
                    <div id="repeat-surah-settings" class="repeat-subsettings" style="display: none;">
                        <div class="subsettings-header">⚙️ إعدادات تكرار السورة</div>
                        
                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">📚</span>
                                <div>
                                    <div class="setting-label">اختيار السور</div>
                                    <div class="setting-desc">اختر السور للتكرار</div>
                                </div>
                            </div>
                            <button class="select-btn" onclick="openSurahSelector()">اختر السور ➕</button>
                        </div>

                        <div class="selected-items" id="selected-surahs">
                            <span class="selected-tag">الفاتحة <span class="remove-tag">×</span></span>
                            <span class="selected-tag">يس <span class="remove-tag">×</span></span>
                            <span class="selected-tag">الملك <span class="remove-tag">×</span></span>
                        </div>

                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">🔀</span>
                                <div>
                                    <div class="setting-label">الترتيب</div>
                                    <div class="setting-desc">ترتيب تشغيل السور</div>
                                </div>
                            </div>
                            <select class="setting-select" id="surah-order">
                                <option value="sequential">بالترتيب 📖</option>
                                <option value="random">عشوائي 🎲</option>
                                <option value="custom">ترتيب مخصص ✏️</option>
                                <option value="reverse">عكسي ↩️</option>
                            </select>
                        </div>

                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">🔢</span>
                                <div>
                                    <div class="setting-label">عدد التكرار</div>
                                    <div class="setting-desc">كم مرة تكرر كل سورة؟</div>
                                </div>
                            </div>
                            <select class="setting-select" id="surah-repeat-count">
                                <option value="1">مرة واحدة</option>
                                <option value="2">مرتين</option>
                                <option value="3">3 مرات</option>
                                <option value="5">5 مرات</option>
                                <option value="7">7 مرات</option>
                                <option value="10">10 مرات</option>
                                <option value="infinite">∞ بلا توقف</option>
                            </select>
                        </div>

                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">⏱️</span>
                                <div>
                                    <div class="setting-label">الفاصل</div>
                                    <div class="setting-desc">وقت الانتظار بين كل سورة</div>
                                </div>
                            </div>
                            <select class="setting-select" id="surah-delay">
                                <option value="0" data-i18n="noDelay">بدون فاصل</option>
                                <option value="3">3 ثواني</option>
                                <option value="5">5 ثواني</option>
                                <option value="10">10 ثواني</option>
                            </select>
                        </div>

                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">🔁</span>
                                <div>
                                    <div class="setting-label">إعادة القائمة</div>
                                    <div class="setting-desc">بعد انتهاء كل السور</div>
                                </div>
                            </div>
                            <select class="setting-select" id="surah-after">
                                <option value="stop">توقف</option>
                                <option value="restart">أعد من البداية</option>
                                <option value="shuffle">أعد بترتيب عشوائي</option>
                            </select>
                        </div>
                    </div>

                    <!-- Settings for: تكرار الجزء -->
                    <div id="repeat-juz-settings" class="repeat-subsettings" style="display: none;">
                        <div class="subsettings-header">⚙️ إعدادات تكرار الجزء</div>
                        
                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">📚</span>
                                <div>
                                    <div class="setting-label">اختيار الأجزاء</div>
                                    <div class="setting-desc">اختر الأجزاء للتكرار</div>
                                </div>
                            </div>
                            <button class="select-btn" onclick="openJuzSelector()">اختر الأجزاء ➕</button>
                        </div>

                        <div class="selected-items" id="selected-juz">
                            <span class="selected-tag">جزء عمّ <span class="remove-tag">×</span></span>
                            <span class="selected-tag">جزء تبارك <span class="remove-tag">×</span></span>
                        </div>

                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">🔀</span>
                                <div>
                                    <div class="setting-label">الترتيب</div>
                                    <div class="setting-desc">ترتيب تشغيل الأجزاء</div>
                                </div>
                            </div>
                            <select class="setting-select" id="juz-order">
                                <option value="sequential">بالترتيب 📖</option>
                                <option value="random">عشوائي 🎲</option>
                                <option value="custom">ترتيب مخصص ✏️</option>
                                <option value="reverse">عكسي ↩️</option>
                            </select>
                        </div>

                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">🔢</span>
                                <div>
                                    <div class="setting-label">عدد التكرار</div>
                                    <div class="setting-desc">كم مرة تكرر كل جزء؟</div>
                                </div>
                            </div>
                            <select class="setting-select" id="juz-repeat-count">
                                <option value="1">مرة واحدة</option>
                                <option value="2">مرتين</option>
                                <option value="3">3 مرات</option>
                                <option value="5">5 مرات</option>
                                <option value="infinite">∞ بلا توقف</option>
                            </select>
                        </div>

                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">⏱️</span>
                                <div>
                                    <div class="setting-label">الفاصل</div>
                                    <div class="setting-desc">وقت الانتظار بين كل جزء</div>
                                </div>
                            </div>
                            <select class="setting-select" id="juz-delay">
                                <option value="0" data-i18n="noDelay">بدون فاصل</option>
                                <option value="5">5 ثواني</option>
                                <option value="10">10 ثواني</option>
                                <option value="30">30 ثانية</option>
                            </select>
                        </div>

                        <div class="setting-item sub-item">
                            <div class="setting-info">
                                <span class="setting-icon">🔁</span>
                                <div>
                                    <div class="setting-label">إعادة القائمة</div>
                                    <div class="setting-desc">بعد انتهاء كل الأجزاء</div>
                                </div>
                            </div>
                            <select class="setting-select" id="juz-after">
                                <option value="stop">توقف</option>
                                <option value="restart">أعد من البداية</option>
                                <option value="shuffle">أعد بترتيب عشوائي</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Translation Section -->
                <div class="settings-section">
                    <div class="settings-title">🌍 الترجمة</div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🌐</span>
                            <div>
                                <div class="setting-label" data-i18n="showTranslation">إظهار الترجمة</div>
                                <div class="setting-desc" data-i18n="showTranslationDesc">عرض الترجمة أسفل الآيات</div>
                            </div>
                        </div>
                        <div class="toggle" id="toggle-translation" onclick="toggleSetting('translation')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🗣️</span>
                            <div>
                                <div class="setting-label" data-i18n="translationLang">لغة الترجمة</div>
                                <div class="setting-desc" data-i18n="translationLangDesc">اختر لغة الترجمة المفضلة</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-language" onchange="setTranslationLanguage(this.value)">
                            <option value="ar">العربية (تفسير)</option>
                            <option value="en">English</option>
                            <option value="fa">فارسی (Persian)</option>
                            <option value="ur">اردو (Urdu)</option>
                            <option value="tr">Türkçe (Turkish)</option>
                            <option value="id">Bahasa Indonesia</option>
                            <option value="bn">বাংলা (Bengali)</option>
                            <option value="fr">Français (French)</option>
                            <option value="de">Deutsch (German)</option>
                            <option value="es">Español (Spanish)</option>
                            <option value="ru">Русский (Russian)</option>
                            <option value="zh">中文 (Chinese)</option>
                            <option value="ms">Bahasa Melayu</option>
                            <option value="hi">हिन्दी (Hindi)</option>
                        </select>
                    </div>
                </div>

                <!-- Notifications Section -->
                <div class="settings-section">
                    <div class="settings-title">🔔 الإشعارات <span class="badge-new">قريباً</span></div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🕌</span>
                            <div>
                                <div class="setting-label" data-i18n="prayerAlerts">تنبيهات الصلاة</div>
                                <div class="setting-desc" data-i18n="prayerAlertsDesc">تنبيه قبل كل صلاة</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-prayer" onclick="toggleSetting('prayer')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📿</span>
                            <div>
                                <div class="setting-label" data-i18n="adhkarReminder">تذكير الأذكار</div>
                                <div class="setting-desc" data-i18n="adhkarReminderDesc">تذكير بأذكار الصباح والمساء</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-adhkar" onclick="toggleSetting('adhkar')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📖</span>
                            <div>
                                <div class="setting-label">تذكير الورد اليومي</div>
                                <div class="setting-desc">تذكير بقراءة الورد اليومي</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-daily" onclick="toggleSetting('daily')"></div>
                    </div>
                </div>

                <!-- Prayer & Location Section - NEW! -->
                <div class="settings-section">
                    <div class="settings-title">🕌 الصلاة والموقع <span class="badge-new">قريباً</span></div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📍</span>
                            <div>
                                <div class="setting-label">تحديد الموقع</div>
                                <div class="setting-desc">لحساب أوقات الصلاة والقبلة</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-location-mode">
                            <option value="auto" selected>تلقائي (GPS)</option>
                            <option value="manual">يدوي</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🏙️</span>
                            <div>
                                <div class="setting-label">المدينة</div>
                                <div class="setting-desc">موقعك الحالي</div>
                            </div>
                        </div>
                        <span class="setting-value">الكويت 🇰🇼</span>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🧮</span>
                            <div>
                                <div class="setting-label">طريقة حساب الصلاة</div>
                                <div class="setting-desc">اختر طريقة الحساب المناسبة لمنطقتك</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-calculation">
                            <option value="mwl">رابطة العالم الإسلامي</option>
                            <option value="umm_alqura" selected>أم القرى (السعودية)</option>
                            <option value="egypt">الهيئة المصرية</option>
                            <option value="isna">ISNA (أمريكا الشمالية)</option>
                            <option value="karachi">جامعة كراتشي</option>
                            <option value="kuwait">الكويت</option>
                            <option value="qatar">قطر</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🌅</span>
                            <div>
                                <div class="setting-label">حساب العصر</div>
                                <div class="setting-desc">طريقة حساب وقت العصر</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-asr">
                            <option value="shafii" selected>الشافعي/المالكي/الحنبلي</option>
                            <option value="hanafi">الحنفي (مثلي الظل)</option>
                        </select>
                    </div>
                </div>

                <!-- Islamic Methodology Section - NEW! -->
                <div class="settings-section">
                    <div class="settings-title">🕋 المنهج الإسلامي <span class="badge-new">قريباً</span></div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📚</span>
                            <div>
                                <div class="setting-label">المذهب الفقهي</div>
                                <div class="setting-desc">اختر مذهبك لعرض الأحكام المناسبة</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-madhab">
                            <option value="all">عرض الكل</option>
                            <option value="hanafi">الحنفي</option>
                            <option value="maliki">المالكي</option>
                            <option value="shafii">الشافعي</option>
                            <option value="hanbali">الحنبلي</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🌙</span>
                            <div>
                                <div class="setting-label">العقيدة</div>
                                <div class="setting-desc">المدرسة العقدية</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-aqeedah">
                            <option value="both">عرض الكل</option>
                            <option value="ashari">الأشعرية</option>
                            <option value="maturidi">الماتريدية</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">💫</span>
                            <div>
                                <div class="setting-label">الطريقة الصوفية</div>
                                <div class="setting-desc">اختياري - لعرض الأوراد</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-tariqa">
                            <option value="none">بدون</option>
                            <option value="shadhili">الشاذلية</option>
                            <option value="qadiri">القادرية</option>
                            <option value="rifai">الرفاعية</option>
                            <option value="naqshbandi">النقشبندية</option>
                            <option value="tijani">التيجانية</option>
                        </select>
                    </div>

                    <div class="setting-item info-box">
                        <div class="setting-info">
                            <span class="setting-icon">✅</span>
                            <div>
                                <div class="setting-label">المصادر المعتمدة</div>
                                <div class="setting-desc">جميع المحتوى من مصادر الأزهر الشريف فقط</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Goals Section - NEW! -->
                <div class="settings-section">
                    <div class="settings-title">🎯 الأهداف والتقدم <span class="badge-new">قريباً</span></div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📖</span>
                            <div>
                                <div class="setting-label">الهدف اليومي (صفحات)</div>
                                <div class="setting-desc">عدد الصفحات المراد قراءتها يومياً</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-daily-pages">
                            <option value="1">صفحة واحدة</option>
                            <option value="2">صفحتان</option>
                            <option value="3">3 صفحات</option>
                            <option value="5" selected>5 صفحات</option>
                            <option value="10">10 صفحات</option>
                            <option value="20">20 صفحة (جزء)</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">⏱️</span>
                            <div>
                                <div class="setting-label">الهدف اليومي (دقائق)</div>
                                <div class="setting-desc">وقت القراءة المراد يومياً</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-daily-minutes">
                            <option value="10">10 دقائق</option>
                            <option value="15">15 دقيقة</option>
                            <option value="30" selected>30 دقيقة</option>
                            <option value="45">45 دقيقة</option>
                            <option value="60">ساعة كاملة</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📅</span>
                            <div>
                                <div class="setting-label">هدف الختمة</div>
                                <div class="setting-desc">متى تريد إكمال القرآن؟</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-khatma-goal">
                            <option value="ramadan">قبل رمضان 🌙</option>
                            <option value="month">خلال شهر</option>
                            <option value="3months" selected>خلال 3 أشهر</option>
                            <option value="6months">خلال 6 أشهر</option>
                            <option value="year">خلال سنة</option>
                            <option value="none">بدون هدف محدد</option>
                        </select>
                    </div>
                </div>

                <!-- Smart Alerts Section - NEW! UNIQUE FEATURE -->
                <div class="settings-section">
                    <div class="settings-title">⚡ التنبيهات الذكية <span class="badge-new">قريباً</span></div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📄</span>
                            <div>
                                <div class="setting-label">تنبيه قرب إكمال السورة</div>
                                <div class="setting-desc">"باقي صفحتان لإكمال البقرة!"</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-surah-alert" onclick="toggleSetting('surah-alert')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📚</span>
                            <div>
                                <div class="setting-label">تنبيه قرب إكمال الجزء</div>
                                <div class="setting-desc">"باقي 5 صفحات لإكمال الجزء!"</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-juz-alert" onclick="toggleSetting('juz-alert')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">⏱️</span>
                            <div>
                                <div class="setting-label">عرض الوقت المتبقي</div>
                                <div class="setting-desc">تقدير الوقت بناءً على سرعتك الشخصية</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-time-estimate" onclick="toggleSetting('time-estimate')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🔥</span>
                            <div>
                                <div class="setting-label">تنبيه حماية السلسلة</div>
                                <div class="setting-desc">"لا تفقد سلسلتك! اقرأ اليوم"</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-streak-alert" onclick="toggleSetting('streak-alert')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🎯</span>
                            <div>
                                <div class="setting-label">تنبيه تحقيق الهدف</div>
                                <div class="setting-desc">"الحمد لله! أكملت هدفك اليومي"</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-goal-alert" onclick="toggleSetting('goal-alert')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🏆</span>
                            <div>
                                <div class="setting-label">تنبيه الإنجازات</div>
                                <div class="setting-desc">إشعار عند الحصول على شارة جديدة</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-achievement-alert" onclick="toggleSetting('achievement-alert')"></div>
                    </div>
                </div>

                <!-- Social Sharing Section - EXPANDED! -->
                <div class="settings-section">
                    <div class="settings-title">📤 المشاركة الاجتماعية <span class="badge-new">قريباً</span></div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🎙️</span>
                            <div>
                                <div class="setting-label">مشاركة التلاوة الصوتية</div>
                                <div class="setting-desc">السماح بتسجيل ومشاركة صوتك</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-voice-share" onclick="toggleSetting('voice-share')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📊</span>
                            <div>
                                <div class="setting-label">مشاركة التقدم</div>
                                <div class="setting-desc">مشاركة إحصائياتك وإنجازاتك</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-progress-share" onclick="toggleSetting('progress-share')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🌐</span>
                            <div>
                                <div class="setting-label">المشاركة الخارجية</div>
                                <div class="setting-desc">مشاركة على انستغرام، واتساب، تويتر</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-external-share" onclick="toggleSetting('external-share')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">👤</span>
                            <div>
                                <div class="setting-label">من يرى ملفي الشخصي</div>
                                <div class="setting-desc">التحكم في رؤية معلوماتك</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-profile-visibility">
                            <option value="everyone" selected>الجميع 🌍</option>
                            <option value="followers">المتابعين فقط 👥</option>
                            <option value="none">لا أحد 🔒</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">👥</span>
                            <div>
                                <div class="setting-label">من يمكنه متابعتي</div>
                                <div class="setting-desc">التحكم في طلبات المتابعة</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-follow-permission">
                            <option value="everyone" selected>الجميع 🌍</option>
                            <option value="approval">بموافقتي ✅</option>
                            <option value="none">لا أحد 🚫</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">💬</span>
                            <div>
                                <div class="setting-label">من يمكنه التعليق</div>
                                <div class="setting-desc">التحكم في التعليقات على تلاواتك</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-comment-permission">
                            <option value="everyone" selected>الجميع 🌍</option>
                            <option value="followers">المتابعين فقط 👥</option>
                            <option value="none">لا أحد 🔇</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📩</span>
                            <div>
                                <div class="setting-label">من يمكنه مراسلتي</div>
                                <div class="setting-desc">التحكم في الرسائل الخاصة</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-message-permission">
                            <option value="everyone">الجميع 🌍</option>
                            <option value="followers" selected>المتابعين فقط 👥</option>
                            <option value="none">لا أحد 🔇</option>
                        </select>
                    </div>

                    <div class="setting-item clickable" onclick="openBlockedAccounts()">
                        <div class="setting-info">
                            <span class="setting-icon">🚫</span>
                            <div>
                                <div class="setting-label">الحسابات المحظورة</div>
                                <div class="setting-desc">إدارة قائمة الحظر</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>

                    <div class="setting-item clickable" onclick="openMutedAccounts()">
                        <div class="setting-info">
                            <span class="setting-icon">🔕</span>
                            <div>
                                <div class="setting-label">الحسابات المكتومة</div>
                                <div class="setting-desc">إدارة قائمة الكتم</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>
                </div>

                <!-- Recording Section - NEW! -->
                <div class="settings-section">
                    <div class="settings-title">🎙️ التسجيل الصوتي <span class="badge-new">قريباً</span></div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🎚️</span>
                            <div>
                                <div class="setting-label">جودة التسجيل</div>
                                <div class="setting-desc">جودة الصوت المسجل</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-recording-quality">
                            <option value="low">منخفضة (أقل حجم)</option>
                            <option value="medium" selected>متوسطة (موازنة)</option>
                            <option value="high">عالية (أفضل جودة)</option>
                            <option value="studio">استوديو HD 🎤</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">💾</span>
                            <div>
                                <div class="setting-label">حفظ تلقائي</div>
                                <div class="setting-desc">حفظ التسجيلات تلقائياً</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-auto-save-recording" onclick="toggleSetting('auto-save-recording')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🎨</span>
                            <div>
                                <div class="setting-label">الفلاتر الصوتية</div>
                                <div class="setting-desc">تحسين الصوت تلقائياً</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-audio-filter">
                            <option value="none">بدون فلتر</option>
                            <option value="clean" selected>تنظيف الصوت 🧹</option>
                            <option value="echo">صدى المسجد 🕌</option>
                            <option value="warm">دافئ 🔥</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📤</span>
                            <div>
                                <div class="setting-label">بعد التسجيل</div>
                                <div class="setting-desc">ماذا يحدث بعد إنهاء التسجيل</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-after-recording">
                            <option value="preview" selected>معاينة أولاً 👀</option>
                            <option value="draft">حفظ كمسودة 📝</option>
                            <option value="post">نشر مباشرة 📤</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🔔</span>
                            <div>
                                <div class="setting-label">صوت العد التنازلي</div>
                                <div class="setting-desc">3... 2... 1... قبل التسجيل</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-countdown-sound" onclick="toggleSetting('countdown-sound')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📱</span>
                            <div>
                                <div class="setting-label">عرض الآيات أثناء التسجيل</div>
                                <div class="setting-desc">إظهار النص للقراءة منه</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-show-text-recording" onclick="toggleSetting('show-text-recording')"></div>
                    </div>
                </div>

                <!-- Social Notifications Section - NEW! -->
                <div class="settings-section">
                    <div class="settings-title">🔔 إشعارات المجتمع <span class="badge-new">قريباً</span></div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">❤️</span>
                            <div>
                                <div class="setting-label">إعجاب جديد</div>
                                <div class="setting-desc">عندما يعجب شخص بتلاوتك</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-notif-like" onclick="toggleSetting('notif-like')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">💬</span>
                            <div>
                                <div class="setting-label">تعليق جديد</div>
                                <div class="setting-desc">عندما يعلق شخص على تلاوتك</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-notif-comment" onclick="toggleSetting('notif-comment')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">👤</span>
                            <div>
                                <div class="setting-label">متابع جديد</div>
                                <div class="setting-desc">عندما يتابعك شخص جديد</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-notif-follower" onclick="toggleSetting('notif-follower')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📣</span>
                            <div>
                                <div class="setting-label">الإشارات</div>
                                <div class="setting-desc">عندما يذكرك شخص</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-notif-mention" onclick="toggleSetting('notif-mention')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📿</span>
                            <div>
                                <div class="setting-label">دعوات الختمة</div>
                                <div class="setting-desc">عند دعوتك لختمة جماعية</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-notif-khatma" onclick="toggleSetting('notif-khatma')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🏆</span>
                            <div>
                                <div class="setting-label">تحديثات المنافسات</div>
                                <div class="setting-desc">عند تغيير ترتيبك</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-notif-competition" onclick="toggleSetting('notif-competition')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📩</span>
                            <div>
                                <div class="setting-label">رسائل خاصة</div>
                                <div class="setting-desc">عند استلام رسالة</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-notif-message" onclick="toggleSetting('notif-message')"></div>
                    </div>
                </div>

                <!-- Marketplace Section - NEW! -->
                <div class="settings-section">
                    <div class="settings-title">🛒 السوق الإسلامي <span class="badge-new">قريباً</span></div>
                    
                    <div class="setting-item clickable">
                        <div class="setting-info">
                            <span class="setting-icon">📍</span>
                            <div>
                                <div class="setting-label">عنوان التوصيل</div>
                                <div class="setting-desc">إضافة أو تعديل العناوين</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>

                    <div class="setting-item clickable">
                        <div class="setting-info">
                            <span class="setting-icon">💳</span>
                            <div>
                                <div class="setting-label">طرق الدفع</div>
                                <div class="setting-desc">إدارة البطاقات والمحافظ</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🧾</span>
                            <div>
                                <div class="setting-label">الفواتير الإلكترونية</div>
                                <div class="setting-desc">استلام الفواتير بالإيميل</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-e-invoice" onclick="toggleSetting('e-invoice')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">💰</span>
                            <div>
                                <div class="setting-label">العملة</div>
                                <div class="setting-desc">عملة العرض المفضلة</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-currency">
                            <option value="KWD" selected>🇰🇼 دينار كويتي</option>
                            <option value="SAR">🇸🇦 ريال سعودي</option>
                            <option value="AED">🇦🇪 درهم إماراتي</option>
                            <option value="USD">🇺🇸 دولار أمريكي</option>
                            <option value="EUR">🇪🇺 يورو</option>
                            <option value="EGP">🇪🇬 جنيه مصري</option>
                        </select>
                    </div>

                    <div class="setting-item clickable">
                        <div class="setting-info">
                            <span class="setting-icon">📦</span>
                            <div>
                                <div class="setting-label">طلباتي</div>
                                <div class="setting-desc">تتبع الطلبات السابقة والحالية</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🔔</span>
                            <div>
                                <div class="setting-label">إشعارات العروض</div>
                                <div class="setting-desc">تنبيهات الخصومات والعروض</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-offer-notif" onclick="toggleSetting('offer-notif')"></div>
                    </div>
                </div>

                <!-- Halal Finder Section - NEW! -->
                <div class="settings-section">
                    <div class="settings-title">🍽️ مطاعم حلال <span class="badge-new">قريباً</span></div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📍</span>
                            <div>
                                <div class="setting-label">نطاق البحث</div>
                                <div class="setting-desc">أقصى مسافة للمطاعم</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-halal-range">
                            <option value="5">5 كم</option>
                            <option value="10" selected>10 كم</option>
                            <option value="25">25 كم</option>
                            <option value="50">50 كم</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🥗</span>
                            <div>
                                <div class="setting-label">التفضيلات الغذائية</div>
                                <div class="setting-desc">نوع الطعام المفضل</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-food-preference">
                            <option value="all" selected>جميع الأنواع</option>
                            <option value="vegetarian">نباتي 🥬</option>
                            <option value="vegan">فيغان 🌱</option>
                            <option value="seafood">مأكولات بحرية 🐟</option>
                            <option value="grilled">مشويات 🍖</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">⚠️</span>
                            <div>
                                <div class="setting-label">الحساسية</div>
                                <div class="setting-desc">تنبيه من مسببات الحساسية</div>
                            </div>
                        </div>
                        <button class="select-btn" onclick="openAllergySettings()">تحديد ⚙️</button>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">✅</span>
                            <div>
                                <div class="setting-label">نوع شهادة الحلال</div>
                                <div class="setting-desc">الجهات المعتمدة</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-halal-cert">
                            <option value="all" selected>جميع الشهادات</option>
                            <option value="strict">معتمدة دولياً فقط</option>
                            <option value="local">محلية ودولية</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🚗</span>
                            <div>
                                <div class="setting-label">التوصيل</div>
                                <div class="setting-desc">إظهار مطاعم التوصيل فقط</div>
                            </div>
                        </div>
                        <div class="toggle" id="toggle-delivery-only" onclick="toggleSetting('delivery-only')"></div>
                    </div>

                    <div class="setting-item clickable">
                        <div class="setting-info">
                            <span class="setting-icon">⭐</span>
                            <div>
                                <div class="setting-label">المطاعم المفضلة</div>
                                <div class="setting-desc">قائمة مطاعمك المحفوظة</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>
                </div>

                <!-- Teachers Section - NEW! -->
                <div class="settings-section">
                    <div class="settings-title">👨‍🏫 المعلمون <span class="badge-new">قريباً</span></div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🎓</span>
                            <div>
                                <div class="setting-label">نوع التعليم</div>
                                <div class="setting-desc">ماذا تريد أن تتعلم؟</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-learning-type">
                            <option value="all" selected>الكل</option>
                            <option value="tajweed">التجويد 📖</option>
                            <option value="memorization">الحفظ 🧠</option>
                            <option value="tafsir">التفسير 📚</option>
                            <option value="arabic">اللغة العربية ✍️</option>
                            <option value="kids">تعليم الأطفال 👶</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">👤</span>
                            <div>
                                <div class="setting-label">جنس المعلم</div>
                                <div class="setting-desc">تفضيل جنس المعلم</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-teacher-gender">
                            <option value="any" selected>لا يهم</option>
                            <option value="male">معلم (ذكر) 👨</option>
                            <option value="female">معلمة (أنثى) 👩</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🌍</span>
                            <div>
                                <div class="setting-label">لغة التدريس</div>
                                <div class="setting-desc">اللغة المفضلة للشرح</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-teaching-lang">
                            <option value="ar" selected>العربية</option>
                            <option value="en">English</option>
                            <option value="ur">اردو</option>
                            <option value="id">Bahasa Indonesia</option>
                            <option value="fr">Français</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">💰</span>
                            <div>
                                <div class="setting-label">نطاق السعر</div>
                                <div class="setting-desc">الحد الأقصى للسعر بالساعة</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-price-range">
                            <option value="any" selected>أي سعر</option>
                            <option value="free">مجاني فقط 🆓</option>
                            <option value="low">منخفض (أقل من 10$)</option>
                            <option value="medium">متوسط (10-25$)</option>
                            <option value="high">مرتفع (25$+)</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📅</span>
                            <div>
                                <div class="setting-label">الأوقات المفضلة</div>
                                <div class="setting-desc">متى تفضل الدروس؟</div>
                            </div>
                        </div>
                        <button class="select-btn" onclick="openTimePreferences()">تحديد ⚙️</button>
                    </div>

                    <div class="setting-item clickable">
                        <div class="setting-info">
                            <span class="setting-icon">📚</span>
                            <div>
                                <div class="setting-label">دروسي</div>
                                <div class="setting-desc">الدروس المحجوزة والسابقة</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>

                    <div class="setting-item clickable">
                        <div class="setting-info">
                            <span class="setting-icon">⭐</span>
                            <div>
                                <div class="setting-label">معلموني المفضلون</div>
                                <div class="setting-desc">قائمة المعلمين المحفوظين</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>
                </div>

                <!-- Competitions Section - NEW! -->
                <div class="settings-section">
                    <div class="settings-title">🏆 المنافسات والمجموعات <span class="badge-new">قريباً</span></div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🌍</span>
                            <div>
                                <div class="setting-label">المشاركة في لوحة المتصدرين</div>
                                <div class="setting-desc">الظهور في الترتيب العالمي</div>
                            </div>
                        </div>
                        <div class="toggle" id="toggle-leaderboard" onclick="toggleSetting('leaderboard')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">👥</span>
                            <div>
                                <div class="setting-label">السماح بدعوات المجموعات</div>
                                <div class="setting-desc">استقبال دعوات الختمة الجماعية</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-group-invites" onclick="toggleSetting('group-invites')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">👨‍👩‍👧‍👦</span>
                            <div>
                                <div class="setting-label">منافسات العائلة</div>
                                <div class="setting-desc">المنافسة مع أفراد العائلة</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-family-compete" onclick="toggleSetting('family-compete')"></div>
                    </div>

                    <div class="setting-item clickable">
                        <div class="setting-info">
                            <span class="setting-icon">📋</span>
                            <div>
                                <div class="setting-label">مجموعاتي</div>
                                <div class="setting-desc">عرض وإدارة مجموعات الختمة</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>
                </div>

                <!-- Kids Mode Section - NEW! -->
                <div class="settings-section">
                    <div class="settings-title">👶 وضع الأطفال <span class="badge-new">قريباً</span></div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🔐</span>
                            <div>
                                <div class="setting-label">رمز PIN للوالدين</div>
                                <div class="setting-desc">حماية إعدادات الأطفال</div>
                            </div>
                        </div>
                        <button class="select-btn" onclick="setParentPIN()">تعيين ****</button>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">⏱️</span>
                            <div>
                                <div class="setting-label">حد وقت الشاشة</div>
                                <div class="setting-desc">الحد الأقصى للاستخدام اليومي</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-screen-time">
                            <option value="15">15 دقيقة</option>
                            <option value="30" selected>30 دقيقة</option>
                            <option value="45">45 دقيقة</option>
                            <option value="60">ساعة</option>
                            <option value="unlimited">بلا حدود</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🎯</span>
                            <div>
                                <div class="setting-label">الهدف اليومي للطفل</div>
                                <div class="setting-desc">وقت التعلم المطلوب</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-kid-goal">
                            <option value="5">5 دقائق</option>
                            <option value="10" selected>10 دقائق</option>
                            <option value="15">15 دقيقة</option>
                            <option value="20">20 دقيقة</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🎁</span>
                            <div>
                                <div class="setting-label">نظام المكافآت</div>
                                <div class="setting-desc">تفعيل النجوم والأقمار والتيجان</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-rewards" onclick="toggleSetting('rewards')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📧</span>
                            <div>
                                <div class="setting-label">تقارير للوالدين</div>
                                <div class="setting-desc">استلام تقارير تقدم الطفل</div>
                            </div>
                        </div>
                        <select class="setting-select" id="select-parent-reports">
                            <option value="daily">يومياً</option>
                            <option value="weekly" selected>أسبوعياً</option>
                            <option value="monthly">شهرياً</option>
                            <option value="none">بدون</option>
                        </select>
                    </div>

                    <div class="setting-item clickable">
                        <div class="setting-info">
                            <span class="setting-icon">👧</span>
                            <div>
                                <div class="setting-label">إدارة ملفات الأطفال</div>
                                <div class="setting-desc">إضافة وتعديل حسابات الأطفال</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>
                </div>

                <!-- Cloud & Account Section - NEW! -->
                <div class="settings-section">
                    <div class="settings-title">☁️ المزامنة والحساب <span class="badge-new">قريباً</span></div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">🔄</span>
                            <div>
                                <div class="setting-label">المزامنة السحابية</div>
                                <div class="setting-desc">مزامنة التقدم عبر الأجهزة</div>
                            </div>
                        </div>
                        <div class="toggle active" id="toggle-sync" onclick="toggleSetting('sync')"></div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">📱</span>
                            <div>
                                <div class="setting-label">الأجهزة المتصلة</div>
                                <div class="setting-desc">iPhone, iPad, Web</div>
                            </div>
                        </div>
                        <span class="setting-value">3 أجهزة</span>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">⏰</span>
                            <div>
                                <div class="setting-label">آخر مزامنة</div>
                                <div class="setting-desc" id="last-sync-time">لم تتم المزامنة بعد</div>
                            </div>
                        </div>
                        <button class="select-btn" onclick="syncNow()">مزامنة الآن</button>
                    </div>

                    <div class="setting-item clickable">
                        <div class="setting-info">
                            <span class="setting-icon">👤</span>
                            <div>
                                <div class="setting-label">الملف الشخصي</div>
                                <div class="setting-desc">تعديل الاسم والصورة</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>

                    <div class="setting-item clickable">
                        <div class="setting-info">
                            <span class="setting-icon">💎</span>
                            <div>
                                <div class="setting-label">الاشتراك</div>
                                <div class="setting-desc">مجاني - الترقية للمميز</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>

                    <div class="setting-item clickable">
                        <div class="setting-info">
                            <span class="setting-icon">📤</span>
                            <div>
                                <div class="setting-label">تصدير البيانات</div>
                                <div class="setting-desc">تحميل نسخة احتياطية</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>
                </div>

                <!-- About Section - NEW! -->
                <div class="settings-section">
                    <div class="settings-title">ℹ️ حول التطبيق</div>
                    
                    <!-- Sultan Abdul Hamid II Inspiration Card -->
                    <div class="setting-item" style="background:linear-gradient(135deg,rgba(212,175,55,0.12),rgba(212,175,55,0.04));border:2px solid rgba(212,175,55,0.3);border-radius:20px;padding:20px;flex-direction:column;align-items:stretch;">
                        <div style="text-align:center;margin-bottom:12px;">
                            <div style="font-size:36px;margin-bottom:8px;">🏛️</div>
                            <div style="font-family:Amiri,serif;font-size:18px;font-weight:700;color:var(--gold-dark,#b8960c);">بإلهام من السلطان عبدالحميد الثاني</div>
                            <div style="font-size:12px;color:var(--text-muted,#999);margin-top:4px;">رحمه الله (1842-1918م)</div>
                        </div>
                        <div style="font-family:Amiri,serif;font-size:15px;line-height:2;color:var(--text-primary,#333);text-align:center;padding:12px;background:rgba(212,175,55,0.06);border-radius:12px;border-right:3px solid var(--gold-primary,#D4AF37);margin-bottom:10px;">
                            «إنني لم أخُن دولة الخلافة الإسلامية وملّتها، وإنما خُنت من قبل بعض من حولي»
                        </div>
                        <div style="font-size:13px;color:var(--text-secondary,#666);text-align:center;line-height:1.8;">
                            نسأل الله أن يكون هذا التطبيق سبباً في جمع المسلمين على كتاب الله، كما سعى السلطان عبدالحميد لوحدة الأمة.
                        </div>
                    </div>

                    <div class="setting-item clickable" onclick="window.location.href='mailto:hamasatquran6@gmail.com'">
                        <div class="setting-info">
                            <span class="setting-icon">📧</span>
                            <div>
                                <div class="setting-label">تواصل معنا</div>
                                <div class="setting-desc">hamasatquran6@gmail.com</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>

                    <div class="setting-item clickable" onclick="rateApp()">
                        <div class="setting-info">
                            <span class="setting-icon">⭐</span>
                            <div>
                                <div class="setting-label">قيّم التطبيق</div>
                                <div class="setting-desc">ساعدنا بتقييمك على المتجر</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>

                    <div class="setting-item clickable" onclick="shareApp()">
                        <div class="setting-info">
                            <span class="setting-icon">📤</span>
                            <div>
                                <div class="setting-label">شارك التطبيق</div>
                                <div class="setting-desc">ادعُ أصدقاءك للتطبيق</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>

                    <div class="setting-item clickable" onclick="showApprovedSources()">
                        <div class="setting-info">
                            <span class="setting-icon">📜</span>
                            <div>
                                <div class="setting-label">المصادر المعتمدة</div>
                                <div class="setting-desc">11 تفسير + 8 كتب حديث من الأزهر</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>

                    <div class="setting-item clickable" onclick="showPrivacyPolicy()">
                        <div class="setting-info">
                            <span class="setting-icon">🔒</span>
                            <div>
                                <div class="setting-label">سياسة الخصوصية</div>
                                <div class="setting-desc">كيف نحمي بياناتك</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>

                    <div class="setting-item clickable" onclick="showTerms()">
                        <div class="setting-info">
                            <span class="setting-icon">📋</span>
                            <div>
                                <div class="setting-label">الشروط والأحكام</div>
                                <div class="setting-desc">شروط استخدام التطبيق</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>
                </div>

                <!-- App Section -->
                <div class="settings-section">
                    <div class="settings-title">📱 التطبيق</div>
                    
                    <!-- Offline Tafsir Download -->
                    <div class="setting-item" id="tafsir-offline-card" style="flex-direction:column;align-items:stretch;gap:12px;">
                        <div style="display:flex;align-items:center;gap:12px;">
                            <span class="setting-icon">📖</span>
                            <div style="flex:1;">
                                <div class="setting-label">تحميل التفسير للقراءة بدون إنترنت</div>
                                <div class="setting-desc" id="tafsir-cache-status">يحمّل تفسير الجلالين (عربي + إنجليزي)</div>
                            </div>
                        </div>
                        <div id="tafsir-download-area">
                            <button onclick="startTafsirDownload()" id="tafsir-download-btn" style="width:100%;padding:12px;background:linear-gradient(135deg,var(--gold-primary,#D4AF37),#e8c547);color:var(--navy-dark,#0d1b2a);border:none;border-radius:14px;font-family:Tajawal,sans-serif;font-size:14px;font-weight:700;cursor:pointer;">
                                ⬇️ تحميل التفسير (بدون إنترنت)
                            </button>
                        </div>
                        <div id="tafsir-download-progress" style="display:none;">
                            <div style="background:rgba(212,175,55,0.15);border-radius:10px;height:8px;overflow:hidden;margin-bottom:8px;">
                                <div id="tafsir-progress-bar" style="height:100%;background:var(--gold-primary,#D4AF37);border-radius:10px;width:0%;transition:width 0.3s;"></div>
                            </div>
                            <div id="tafsir-progress-text" style="font-size:12px;color:var(--text-muted,#999);text-align:center;"></div>
                            <button onclick="cancelTafsirDownload()" id="tafsir-cancel-btn" style="margin-top:8px;width:100%;padding:8px;background:rgba(239,68,68,0.1);color:#ef4444;border:1px solid rgba(239,68,68,0.3);border-radius:10px;font-family:Tajawal,sans-serif;font-size:12px;cursor:pointer;">
                                ❌ إلغاء التحميل
                            </button>
                        </div>
                    </div>

                    <div class="setting-item clickable" onclick="clearAllData()">
                        <div class="setting-info">
                            <span class="setting-icon">🗑️</span>
                            <div>
                                <div class="setting-label" style="color: var(--danger);">مسح جميع البيانات</div>
                                <div class="setting-desc">حذف الإعدادات والتقدم المحفوظ</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>

                    <div class="setting-item clickable" onclick="showLegalPage('privacy')">
                        <div class="setting-info">
                            <span class="setting-icon">🔒</span>
                            <div>
                                <div class="setting-label">سياسة الخصوصية</div>
                                <div class="setting-desc">كيف نحمي بياناتك</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>

                    <div class="setting-item clickable" onclick="showLegalPage('terms')">
                        <div class="setting-info">
                            <span class="setting-icon">📋</span>
                            <div>
                                <div class="setting-label">الشروط والأحكام</div>
                                <div class="setting-desc">شروط استخدام التطبيق</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>

                    <div class="setting-item clickable" onclick="showLegalPage('ip')">
                        <div class="setting-info">
                            <span class="setting-icon">©️</span>
                            <div>
                                <div class="setting-label">حقوق الملكية الفكرية</div>
                                <div class="setting-desc">حقوق النشر والعلامة التجارية</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>

                    <div class="setting-item clickable" onclick="showLegalPage('sources')">
                        <div class="setting-info">
                            <span class="setting-icon">📜</span>
                            <div>
                                <div class="setting-label">المصادر المعتمدة</div>
                                <div class="setting-desc">التفاسير والقرّاء والمنهج الشرعي</div>
                            </div>
                        </div>
                        <span class="setting-arrow">←</span>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">ℹ️</span>
                            <div>
                                <div class="setting-label">الإصدار</div>
                                <div class="setting-desc">همسات القرآن v1.0.0</div>
                            </div>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-icon">💝</span>
                            <div>
                                <div class="setting-label">صنع بحب</div>
                                <div class="setting-desc">للأمة الإسلامية</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Account Section -->
                <div class="settings-section" id="account-settings-section">
                    <div class="settings-title">👤 الحساب</div>
                    
                    <div class="setting-item" id="current-account-display">
                        <div class="setting-info">
                            <span class="setting-icon">📧</span>
                            <div>
                                <div class="setting-label" id="settings-account-name">المستخدم</div>
                                <div class="setting-desc" id="settings-account-email">غير مسجل</div>
                            </div>
                        </div>
                    </div>

                    <div class="setting-item" onclick="switchAccount()" style="cursor:pointer;">
                        <div class="setting-info">
                            <span class="setting-icon">🔄</span>
                            <div>
                                <div class="setting-label" data-i18n="switchAccount">تبديل الحساب</div>
                                <div class="setting-desc" data-i18n="switchAccountDesc">تسجيل الخروج والدخول بحساب آخر</div>
                            </div>
                        </div>
                        <span style="color:var(--gold-primary);font-size:18px;">←</span>
                    </div>

                    <div class="setting-item" onclick="fullSignOut()" style="cursor:pointer;">
                        <div class="setting-info">
                            <span class="setting-icon">🚪</span>
                            <div>
                                <div class="setting-label" style="color:#EF4444;" data-i18n="signOut">تسجيل الخروج</div>
                                <div class="setting-desc" data-i18n="signOutDesc">الخروج من الحساب الحالي</div>
                            </div>
                        </div>
                        <span style="color:#EF4444;font-size:18px;">←</span>
                    </div>
                </div>
            </section>
        <!-- ========== ADHKAR DETAIL VIEW ========== -->
        <div class="adhkar-detail-view" id="adhkar-detail-view">
            <div class="adhkar-detail-header">
                <button class="adhkar-detail-back" onclick="closeAdhkarDetail()">→</button>
                <div class="adhkar-detail-title" id="adhkar-detail-title">أذكار الصباح</div>
                <div class="adhkar-detail-progress" id="adhkar-detail-progress">0 / 32 مكتمل</div>
            </div>
            <div class="adhkar-list" id="adhkar-list">
                <!-- Filled by JS -->
            </div>
        </div>

        <!-- ========== UNIVERSAL MODAL ========== -->
        <div class="modal-overlay" id="modal-overlay" onclick="if(event.target===this)closeModal()">
            <div class="modal-box">
                <div class="modal-header">
                    <div class="modal-title" id="modal-title"></div>
                    <button class="modal-close" onclick="closeModal()">✕</button>
                </div>
                <div class="modal-body" id="modal-body"></div>
                <div class="modal-footer" id="modal-footer"></div>
            </div>
        </div>

        <!-- ========== TAFSIR MODAL ========== -->
        <div class="tafsir-overlay" id="tafsir-overlay" onclick="if(event.target===this)closeTafsir()">
            <div class="tafsir-modal">
                <div class="tafsir-header">
                    <div class="tafsir-header-top">
                        <button class="tafsir-close" onclick="closeTafsir()">✕</button>
                        <div class="tafsir-title">📖 التفسير</div>
                        <button class="tafsir-font-btn" onclick="changeTafsirFontSize()">🔤</button>
                    </div>
                    <div class="tafsir-ayah-ref" id="tafsir-ayah-ref">سورة البقرة - الآية 255</div>
                </div>
                
                <!-- Ayah Display -->
                <div class="tafsir-ayah-box" id="tafsir-ayah-box">
                    <div class="tafsir-ayah-text" id="tafsir-ayah-text">Loading...</div>
                </div>
                
                <!-- Tafsir Source Selector -->
                <div class="tafsir-tabs-container">
                    <!-- Language Toggle -->
                    <div style="display:flex;gap:6px;margin-bottom:8px;justify-content:center;">
                        <button class="tafsir-lang-btn active" onclick="switchTafsirLang('ar', this)" style="padding:6px 16px;border-radius:20px;border:1px solid rgba(212,175,55,0.4);background:rgba(212,175,55,0.15);color:#D4AF37;font-family:'Tajawal',sans-serif;font-size:13px;font-weight:700;cursor:pointer;">🇸🇦 عربي</button>
                        <button class="tafsir-lang-btn" onclick="switchTafsirLang('en', this)" style="padding:6px 16px;border-radius:20px;border:1px solid rgba(255,255,255,0.15);background:transparent;color:#888;font-family:'Tajawal',sans-serif;font-size:13px;font-weight:600;cursor:pointer;">🇬🇧 English</button>
                    </div>
                    <!-- Arabic Tafsirs -->
                    <div class="tafsir-tabs" id="tafsir-tabs-ar">
                        <button class="tafsir-tab active" data-tafsir="jalalayn" onclick="selectTafsir('jalalayn', this)">الجلالين</button>
                        <button class="tafsir-tab" data-tafsir="muyassar" onclick="selectTafsir('muyassar', this)">الميسر</button>
                        <button class="tafsir-tab" data-tafsir="kathir" onclick="selectTafsir('kathir', this)">ابن كثير</button>
                        <button class="tafsir-tab" data-tafsir="qurtubi" onclick="selectTafsir('qurtubi', this)">القرطبي</button>
                        <button class="tafsir-tab" data-tafsir="tabari" onclick="selectTafsir('tabari', this)">الطبري</button>
                        <button class="tafsir-tab" data-tafsir="baghawi" onclick="selectTafsir('baghawi', this)">البغوي</button>
                        <button class="tafsir-tab" data-tafsir="waseet" onclick="selectTafsir('waseet', this)">الوسيط</button>
                    </div>
                    <!-- English Tafsirs -->
                    <div class="tafsir-tabs" id="tafsir-tabs-en" style="display:none;">
                        <button class="tafsir-tab" data-tafsir="en-kathir" onclick="selectTafsir('en-kathir', this)">Ibn Kathir</button>
                        <button class="tafsir-tab" data-tafsir="en-jalalayn" onclick="selectTafsir('en-jalalayn', this)">Al-Jalalayn</button>
                        <button class="tafsir-tab" data-tafsir="en-maarif" onclick="selectTafsir('en-maarif', this)">Ma'ariful Quran</button>
                        <button class="tafsir-tab" data-tafsir="en-ibn-abbas" onclick="selectTafsir('en-ibn-abbas', this)">Ibn Abbas</button>
                        <button class="tafsir-tab" data-tafsir="en-wahidi" onclick="selectTafsir('en-wahidi', this)">Asbab Al-Nuzul</button>
                    </div>
                </div>
                
                <!-- Tafsir Content -->
                <div class="tafsir-content-box">
                    <div class="tafsir-source-info">
                        <div class="tafsir-source-name" id="tafsir-source-name">تفسير القرطبي</div>
                        <div class="tafsir-source-author" id="tafsir-source-author">الإمام القرطبي (أشعري - مالكي)</div>
                    </div>
                    <div class="tafsir-text" id="tafsir-text">
                        <div class="tafsir-loading">
                            <div class="loading-spinner"></div>
                            <p>جاري تحميل التفسير...</p>
                        </div>
                    </div>
                </div>
                
                <!-- Navigation -->
                <div class="tafsir-nav">
                    <button class="tafsir-nav-btn" onclick="prevTafsirAyah()"><span data-i18n="prevAyah">→ الآية السابقة</span></button>
                    <button class="tafsir-nav-btn primary" onclick="nextTafsirAyah()"><span data-i18n="nextAyah">الآية التالية ←</span></button>
                </div>
            </div>
        </div>

        </main>

        <!-- Bottom Navigation (Mobile) -->
        <!-- ========== MINI PLAYER (Global Audio) ========== -->
        <div id="mini-player" class="mini-player hidden">
            <div class="mini-player-bar" onclick="toggleMiniPlayerExpanded()">
                <div class="mp-info" id="mini-player-info">—</div>
                <div class="mp-controls">
                    <span id="mp-repeat-indicator" style="font-size:14px;opacity:0.4;cursor:pointer;" onclick="event.stopPropagation();toggleQuickRepeat()">🔁</span>
                    <button class="mp-btn" onclick="event.stopPropagation();prevAyah()">⏮</button>
                    <button class="mp-btn mp-play" id="mp-play-btn" onclick="event.stopPropagation();toggleAudio()">▶</button>
                    <button class="mp-btn" onclick="event.stopPropagation();nextAyah()">⏭</button>
                    <button class="mp-btn" onclick="event.stopPropagation();stopAudio()" style="font-size:14px;">⏹</button>
                </div>
            </div>
            <!-- Expanded panel -->
            <div id="mini-player-expanded" class="mp-expanded">
                <div class="mp-progress-row">
                    <span id="mp-time-current">0:00</span>
                    <input type="range" id="mp-progress" min="0" max="100" value="0" oninput="seekAudio(this.value)" style="flex:1;accent-color:var(--gold-primary);">
                    <span id="mp-time-total">0:00</span>
                </div>
                <div class="mp-speed-row">
                    <span style="font-size:12px;color:#888;">السرعة:</span>
                    <button class="mp-speed-btn" onclick="setPlaybackSpeed(0.75)">0.75x</button>
                    <button class="mp-speed-btn active" onclick="setPlaybackSpeed(1)">1x</button>
                    <button class="mp-speed-btn" onclick="setPlaybackSpeed(1.25)">1.25x</button>
                    <button class="mp-speed-btn" onclick="setPlaybackSpeed(1.5)">1.5x</button>
                </div>
                <div class="mp-repeat-row">
                    <span style="font-size:12px;color:#888;">تكرار الآية:</span>
                    <button class="mp-repeat-btn" onclick="setQuickRepeat(0)">∞</button>
                    <button class="mp-repeat-btn" onclick="setQuickRepeat(2)">2x</button>
                    <button class="mp-repeat-btn" onclick="setQuickRepeat(3)">3x</button>
                    <button class="mp-repeat-btn" onclick="setQuickRepeat(5)">5x</button>
                    <button class="mp-repeat-btn" onclick="setQuickRepeat(10)">10x</button>
                    <button class="mp-repeat-btn" onclick="setQuickRepeat(20)">20x</button>
                </div>
            </div>
        </div>

        <nav class="bottom-nav">
            <div class="bottom-nav-items">
                <button class="bottom-nav-item active" data-page="home">
                    <span>🏠</span>
                    <span>الرئيسية</span>
                </button>
                <button class="bottom-nav-item" data-page="quran">
                    <span>📖</span>
                    <span>القرآن</span>
                </button>
                <button class="bottom-nav-item" data-page="worship">
                    <span>🕌</span>
                    <span>العبادة</span>
                </button>
                <button class="bottom-nav-item" data-page="audio" onclick="openAudioPage()">
                    <span>🔊</span>
                    <span>الصوتيات</span>
                </button>
                <button class="bottom-nav-item" data-page="community">
                    <span>👥</span>
                    <span>المجتمع</span>
                </button>
                <button class="bottom-nav-item" data-page="more">
                    <span>☰</span>
                    <span>المزيد</span>
                </button>
            </div>
        </nav>
    </div>


    <!-- Scripts -->
    
    
    <!-- Service Worker Registration -->

    <!-- ========== FAB: New Post Button ========== -->
    <button id="ig-fab" class="ig-fab" onclick="openCreatePost()">+</button>
    
    <!-- ========== CREATE POST MODAL ========== -->
    <div id="ig-create-post" class="ig-create-post">
        <div class="ig-create-post-card">
            <div class="ig-create-header">
                <h3>📷 منشور جديد</h3>
                <button class="ig-create-close" onclick="closeCreatePost()">✕</button>
            </div>
            
            <!-- Post Type Selector -->
            <div class="ig-post-types">
                <button class="ig-post-type active" data-type="verse" onclick="selectPostType('verse')">📖 آية</button>
                <button class="ig-post-type" data-type="milestone" onclick="selectPostType('milestone')">🏆 إنجاز</button>
                <button class="ig-post-type" data-type="streak" onclick="selectPostType('streak')">🔥 مواظبة</button>
            </div>
            
            <!-- Post Preview -->
            <div id="ig-post-preview" class="ig-post-preview">
                <div class="preview-verse">اختر نوع المنشور...</div>
            </div>
            
            <!-- Share Button -->
            <button class="ig-share-btn" onclick="publishPost()">📤 نشر</button>
        </div>
    </div>

    </div><!-- end #app-content -->

    <!-- Firebase SDK (Auth only - lightweight) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <!-- V41 - Data Optimization + Modular JavaScript -->
    <script src="js/data-loader.js"></script>
    <script src="js/data.js"></script>
    <script src="js/helpers.js"></script>
    <script src="js/i18n.js"></script>
    <script src="js/i18n-settings.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/tafsir-offline.js"></script>
    <script src="js/tafsir.js"></script>
    <script src="js/tafsir-fix.js"></script>
    <script src="js/prayer.js"></script>
    <script src="js/quran-fix.js"></script>
    <script src="js/quran.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/ayah-menu.js"></script>
    <script src="js/adhkar.js"></script>
    <script src="js/ahzab-data.js"></script>
    <script src="js/worship.js"></script>
    <script src="js/misbaha-upgrade.js"></script>
    <script src="js/misbaha-realistic.js"></script>
    <script src="js/misbaha-stats.js"></script>
    <script>
    // Hook misbaha stats into home page refresh
    (function() {
        var _origShowPage = window.showPage;
        if (typeof _origShowPage === 'function') {
            window.showPage = function(page) {
                _origShowPage(page);
                if (page === 'home' && typeof updateMisbahaStats === 'function') {
                    updateMisbahaStats();
                }
            };
        }
    })();
    </script>
    <script src="js/analytics.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/auth-fix.js"></script>
    <script src="js/social.js"></script>
    <script src="js/legal.js"></script>
    <script src="js/feature-status.js"></script>
    <script src="js/settings-accordion.js"></script>
    <script src="js/app.js"></script>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker failed:', err));
            });
        }
    </script>
<script>
/* V42: Misbaha V2 page hook */
var _origShowPage = window.showPage;
if(typeof _origShowPage === 'function') {
    window.showPage = function(p) {
        _origShowPage(p);
        if(p === 'misbaha' && window.MisbahaV2) {
            window.MisbahaV2.init();
        }
    };
}
</script>

<script>
/* V41.8: Double-tap focus mode for Quran reader */
(function(){
  var lastTap=0;
  document.addEventListener('touchend',function(e){
    var reader=document.getElementById('page-reader');
    if(!reader || reader.style.display==='none') return;
    var container=document.getElementById('ayat-container');
    if(!container || !container.contains(e.target)) return;
    if(e.target.closest('button,a,input,select,.page-navigation,.reader-header')) return;
    var now=Date.now();
    if(now-lastTap<350){
      e.preventDefault();
      reader.classList.toggle('reader-focus');
      lastTap=0;
    } else {
      lastTap=now;
    }
  },{passive:false});
})();
</script>
<script>
// Update dhikr stats on progress page
(function(){
  function updateDhikrStats() {
    var el;
    el = document.getElementById('dhikr-stat-today');
    if (el && typeof getMisbahaDailyTotal === 'function') el.textContent = getMisbahaDailyTotal();
    el = document.getElementById('dhikr-stat-week');
    if (el && typeof getMisbahaWeekTotal === 'function') el.textContent = getMisbahaWeekTotal();
    el = document.getElementById('dhikr-stat-rounds');
    if (el && typeof getMisbahaAllTimeRounds === 'function') el.textContent = getMisbahaAllTimeRounds();
    el = document.getElementById('dhikr-stat-total');
    if (el && typeof getMisbahaAllTimeTotal === 'function') el.textContent = getMisbahaAllTimeTotal();
  }
  // Hook into showPage
  var _origShowPage = window.showPage;
  if (typeof _origShowPage === 'function') {
    window.showPage = function(page) {
      _origShowPage(page);
      if (page === 'progress') updateDhikrStats();
      if (page === 'home') updateDhikrStats();
    };
  }
  // Also update on DOM ready
  document.addEventListener('DOMContentLoaded', function() {
    setTimeout(updateDhikrStats, 500);
  });
  // Also hook worship tasbeeh stats into misbaha localStorage
  var _origRenderTasbeeh = window.renderTasbeehPage;
  if (typeof _origRenderTasbeeh === 'function') {
    window.renderTasbeehPage = function() {
      // Sync misbaha data into worship tasbeeh state
      try {
        var mStats = JSON.parse(localStorage.getItem('hamsatMisbaha') || '{}');
        var tState = JSON.parse(localStorage.getItem('hamsatTasbeeh') || '{}');
        // Map misbaha dhikrs to tasbeeh presets
        var map = {
          'subhanallah': 'subhanallah',
          'alhamdulillah': 'alhamdulillah',
          'allahuakbar': 'allahuakbar',
          'lailaha': 'lailaha',
          'salawat': 'salawat',
          'istighfar': 'istighfar'
        };
        Object.keys(map).forEach(function(mk) {
          var tk = map[mk];
          if (mStats[mk]) {
            if (!tState[tk]) tState[tk] = {count:0, total:0, dates:{}};
            tState[tk].total = mStats[mk].total || 0;
            tState[tk].count = mStats[mk].sessionCount || 0;
            if (mStats[mk].dates) tState[tk].dates = mStats[mk].dates;
          }
        });
        localStorage.setItem('hamsatTasbeeh', JSON.stringify(tState));
      } catch(e) {}
      _origRenderTasbeeh();
    };
  }
})();
</script>
</body>
</html>
